import{S as we,i as ke,s as Se,a4 as E,a5 as M,c as $,m as _,a6 as T,j as p,t as m,l as d,X as Ce,Y as Pe,q as G,p as De,a as D,e as V,d as R,f as v,g as P,C as Fe,aa as Ie,o as H,h as J,k as w,x as q,B as qe,u as U,v as pe,n as ge,w as Ne,Q as Le,L as Oe}from"./Toaster.svelte_svelte_type_style_lang-89e761ff.js";import{R as Ve,D as Be}from"./options-1651b5d0.js";import{F as Re,h as Ee}from"./errorHelper-39e9d1d7.js";import{I as Me}from"./input-ab223ce3.js";import{L as Q}from"./label-e50396f8.js";import{T as Te,a as Ye,M as K}from"./MiniStar-8026f138.js";import{S as je,a as Ae,b as Qe,V as Ue,c as Xe}from"./index-210676e1.js";import{C as ze}from"./CustomCurrencyInput-e534ba6a.js";import{D as Ge}from"./dialog-header-5fe8b5ad.js";import{D as He}from"./dialog-footer-37c988b6.js";import{D as Je}from"./dialog-description-ca00c0bf.js";function me(l,e,n){const t=l.slice();return t[16]=e[n],t}function Ke(l){let e;return{c(){e=q("Product")},m(n,t){v(n,e,t)},d(n){n&&w(e)}}}function We(l){let e;return{c(){e=q("Add your product information")},m(n,t){v(n,e,t)},d(n){n&&w(e)}}}function Ze(l){let e,n,t,r;return e=new Ye({props:{$$slots:{default:[Ke]},$$scope:{ctx:l}}}),t=new Je({props:{$$slots:{default:[We]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment),n=D(),$(t.$$.fragment)},m(s,o){_(e,s,o),v(s,n,o),_(t,s,o),r=!0},p(s,o){const a={};o&524288&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const c={};o&524288&&(c.$$scope={dirty:o,ctx:s}),t.$set(c)},i(s){r||(p(e.$$.fragment,s),p(t.$$.fragment,s),r=!0)},o(s){m(e.$$.fragment,s),m(t.$$.fragment,s),r=!1},d(s){s&&w(n),d(e,s),d(t,s)}}}function ye(l){let e,n,t;return n=new K({}),{c(){e=q("Name "),$(n.$$.fragment)},m(r,s){v(r,e,s),_(n,r,s),t=!0},i(r){t||(p(n.$$.fragment,r),t=!0)},o(r){m(n.$$.fragment,r),t=!1},d(r){r&&w(e),d(n,r)}}}function $e(l){let e,n,t,r,s,o;n=new Q({props:{for:"currency-selector",class:"mb-2",$$slots:{default:[xe]},$$scope:{ctx:l}}});function a(u){l[9](u)}let c={onSelectedChange:l[8],required:!0,$$slots:{default:[rt]},$$scope:{ctx:l}};return l[0]!==void 0&&(c.selected=l[0]),r=new je({props:c}),E.push(()=>M(r,"selected",a)),{c(){e=V("div"),$(n.$$.fragment),t=D(),$(r.$$.fragment)},m(u,g){v(u,e,g),_(n,e,null),P(e,t),_(r,e,null),o=!0},p(u,g){const C={};g&524288&&(C.$$scope={dirty:g,ctx:u}),n.$set(C);const k={};g&4&&(k.onSelectedChange=u[8]),g&524320&&(k.$$scope={dirty:g,ctx:u}),!s&&g&1&&(s=!0,k.selected=u[0],T(()=>s=!1)),r.$set(k)},i(u){o||(p(n.$$.fragment,u),p(r.$$.fragment,u),o=!0)},o(u){m(n.$$.fragment,u),m(r.$$.fragment,u),o=!1},d(u){u&&w(e),d(n),d(r)}}}function xe(l){let e,n,t;return n=new K({}),{c(){e=q("Currency "),$(n.$$.fragment)},m(r,s){v(r,e,s),_(n,r,s),t=!0},i(r){t||(p(n.$$.fragment,r),t=!0)},o(r){m(n.$$.fragment,r),t=!1},d(r){r&&w(e),d(n,r)}}}function et(l){let e,n;return e=new Ue({props:{placeholder:"Select currency"}}),{c(){$(e.$$.fragment)},m(t,r){_(e,t,r),n=!0},p:U,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){d(e,t)}}}function _e(l){let e;return{c(){e=V("div"),e.textContent="You have no currencies saved",R(e,"class","text-sm p-2 text-muted-foreground italic")},m(n,t){v(n,e,t)},p:U,d(n){n&&w(e)}}}function tt(l){let e=l[16].name+"",n;return{c(){n=q(e)},m(t,r){v(t,n,r)},p(t,r){r&32&&e!==(e=t[16].name+"")&&Le(n,e)},d(t){t&&w(n)}}}function de(l){let e,n;return e=new Xe({props:{value:l[16],$$slots:{default:[tt]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment)},m(t,r){_(e,t,r),n=!0},p(t,r){const s={};r&32&&(s.value=t[16]),r&524320&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){d(e,t)}}}function nt(l){let e,n,t=pe(l[5]),r=[];for(let a=0;a<t.length;a+=1)r[a]=de(me(l,t,a));const s=a=>m(r[a],1,1,()=>{r[a]=null});let o=null;return t.length||(o=_e()),{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=ge(),o&&o.c()},m(a,c){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,c);v(a,e,c),o&&o.m(a,c),n=!0},p(a,c){if(c&32){t=pe(a[5]);let u;for(u=0;u<t.length;u+=1){const g=me(a,t,u);r[u]?(r[u].p(g,c),p(r[u],1)):(r[u]=de(g),r[u].c(),p(r[u],1),r[u].m(e.parentNode,e))}for(H(),u=t.length;u<r.length;u+=1)s(u);J(),!t.length&&o?o.p(a,c):t.length?o&&(o.d(1),o=null):(o=_e(),o.c(),o.m(e.parentNode,e))}},i(a){if(!n){for(let c=0;c<t.length;c+=1)p(r[c]);n=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)m(r[c]);n=!1},d(a){a&&w(e),Ne(r,a),o&&o.d(a)}}}function rt(l){let e,n,t,r;return e=new Ae({props:{id:"currency-selector",class:"shadow-none",$$slots:{default:[et]},$$scope:{ctx:l}}}),t=new Qe({props:{class:"max-h-60 overflow-y-auto",$$slots:{default:[nt]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment),n=D(),$(t.$$.fragment)},m(s,o){_(e,s,o),v(s,n,o),_(t,s,o),r=!0},p(s,o){const a={};o&524288&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const c={};o&524320&&(c.$$scope={dirty:o,ctx:s}),t.$set(c)},i(s){r||(p(e.$$.fragment,s),p(t.$$.fragment,s),r=!0)},o(s){m(e.$$.fragment,s),m(t.$$.fragment,s),r=!1},d(s){s&&w(n),d(e,s),d(t,s)}}}function st(l){let e,n,t;return n=new K({}),{c(){e=q("Unit Price "),$(n.$$.fragment)},m(r,s){v(r,e,s),_(n,r,s),t=!0},i(r){t||(p(n.$$.fragment,r),t=!0)},o(r){m(n.$$.fragment,r),t=!1},d(r){r&&w(e),d(n,r)}}}function ot(l){let e;return{c(){e=q("Description")},m(n,t){v(n,e,t)},d(n){n&&w(e)}}}function lt(l){let e;return{c(){e=q("Save")},m(n,t){v(n,e,t)},i:U,o:U,d(n){n&&w(e)}}}function at(l){let e,n,t;return e=new Oe({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){$(e.$$.fragment),n=q(`
            Saving`)},m(r,s){_(e,r,s),v(r,n,s),t=!0},i(r){t||(p(e.$$.fragment,r),t=!0)},o(r){m(e.$$.fragment,r),t=!1},d(r){r&&w(n),d(e,r)}}}function ut(l){let e,n,t,r;const s=[at,lt],o=[];function a(c,u){return c[4]?0:1}return e=a(l),n=o[e]=s[e](l),{c(){n.c(),t=ge()},m(c,u){o[e].m(c,u),v(c,t,u),r=!0},p(c,u){let g=e;e=a(c),e!==g&&(H(),m(o[g],1,1,()=>{o[g]=null}),J(),n=o[e],n||(n=o[e]=s[e](c),n.c()),p(n,1),n.m(t.parentNode,t))},i(c){r||(p(n),r=!0)},o(c){m(n),r=!1},d(c){c&&w(t),o[e].d(c)}}}function ct(l){let e,n;return e=new qe({props:{disabled:l[4],$$slots:{default:[ut]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment)},m(t,r){_(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.disabled=t[4]),r&524304&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){d(e,t)}}}function ft(l){var te,ne;let e,n,t,r,s,o,a,c,u,g,C,k,Y,F,B,j,N,I,i,S,O,W,L,A,X,Z;e=new Ge({props:{$$slots:{default:[Ze]},$$scope:{ctx:l}}}),s=new Q({props:{for:"product-name",$$slots:{default:[ye]},$$scope:{ctx:l}}});function be(f){l[7](f)}let y={required:!0,type:"text",id:"product-name",placeholder:"Product name"};l[2].name!==void 0&&(y.value=l[2].name),a=new Me({props:y}),E.push(()=>M(a,"value",be));let h=!l[3]&&$e(l);k=new Q({props:{for:"unit-price",$$slots:{default:[st]},$$scope:{ctx:l}}});function he(f){l[10](f)}let x={inputClass:"text-start",currencyName:(ne=(te=l[0])==null?void 0:te.value)==null?void 0:ne.name,placeholder:"Product price"};l[2].price!==void 0&&(x.value=l[2].price),F=new ze({props:x}),E.push(()=>M(F,"value",he)),I=new Q({props:{for:"product-description",$$slots:{default:[ot]},$$scope:{ctx:l}}});function ve(f){l[11](f)}let ee={id:"product-description",placeholder:"Product description",class:"h-20 shadow-none"};return l[2].description!==void 0&&(ee.value=l[2].description),S=new Te({props:ee}),E.push(()=>M(S,"value",ve)),L=new He({props:{$$slots:{default:[ct]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment),n=D(),t=V("form"),r=V("div"),$(s.$$.fragment),o=D(),$(a.$$.fragment),u=D(),h&&h.c(),g=D(),C=V("div"),$(k.$$.fragment),Y=D(),$(F.$$.fragment),j=D(),N=V("div"),$(I.$$.fragment),i=D(),$(S.$$.fragment),W=D(),$(L.$$.fragment),R(r,"class","grid w-full items-center gap-1.5"),R(C,"class","grid w-full items-center gap-1.5"),R(N,"class","grid w-full items-center gap-1.5"),R(t,"class","space-y-4")},m(f,b){_(e,f,b),v(f,n,b),v(f,t,b),P(t,r),_(s,r,null),P(r,o),_(a,r,null),P(t,u),h&&h.m(t,null),P(t,g),P(t,C),_(k,C,null),P(C,Y),_(F,C,null),P(t,j),P(t,N),_(I,N,null),P(N,i),_(S,N,null),P(t,W),_(L,t,null),A=!0,X||(Z=Fe(t,"submit",Ie(l[6])),X=!0)},p(f,b){var fe,ie;const re={};b&524288&&(re.$$scope={dirty:b,ctx:f}),e.$set(re);const se={};b&524288&&(se.$$scope={dirty:b,ctx:f}),s.$set(se);const oe={};!c&&b&4&&(c=!0,oe.value=f[2].name,T(()=>c=!1)),a.$set(oe),f[3]?h&&(H(),m(h,1,1,()=>{h=null}),J()):h?(h.p(f,b),b&8&&p(h,1)):(h=$e(f),h.c(),p(h,1),h.m(t,g));const le={};b&524288&&(le.$$scope={dirty:b,ctx:f}),k.$set(le);const z={};b&1&&(z.currencyName=(ie=(fe=f[0])==null?void 0:fe.value)==null?void 0:ie.name),!B&&b&4&&(B=!0,z.value=f[2].price,T(()=>B=!1)),F.$set(z);const ae={};b&524288&&(ae.$$scope={dirty:b,ctx:f}),I.$set(ae);const ue={};!O&&b&4&&(O=!0,ue.value=f[2].description,T(()=>O=!1)),S.$set(ue);const ce={};b&524304&&(ce.$$scope={dirty:b,ctx:f}),L.$set(ce)},i(f){A||(p(e.$$.fragment,f),p(s.$$.fragment,f),p(a.$$.fragment,f),p(h),p(k.$$.fragment,f),p(F.$$.fragment,f),p(I.$$.fragment,f),p(S.$$.fragment,f),p(L.$$.fragment,f),A=!0)},o(f){m(e.$$.fragment,f),m(s.$$.fragment,f),m(a.$$.fragment,f),m(h),m(k.$$.fragment,f),m(F.$$.fragment,f),m(I.$$.fragment,f),m(S.$$.fragment,f),m(L.$$.fragment,f),A=!1},d(f){f&&(w(n),w(t)),d(e,f),d(s),d(a),h&&h.d(),d(k),d(F),d(I),d(S),d(L),X=!1,Z()}}}function it(l){let e,n;return e=new Be({props:{class:"max-w-lg",$$slots:{default:[ft]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment)},m(t,r){_(e,t,r),n=!0},p(t,r){const s={};r&524349&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){d(e,t)}}}function pt(l){let e,n,t;function r(o){l[12](o)}let s={$$slots:{default:[it]},$$scope:{ctx:l}};return l[1]!==void 0&&(s.open=l[1]),e=new Ve({props:s}),E.push(()=>M(e,"open",r)),{c(){$(e.$$.fragment)},m(o,a){_(e,o,a),t=!0},p(o,[a]){const c={};a&524349&&(c.$$scope={dirty:a,ctx:o}),!n&&a&2&&(n=!0,c.open=o[1],T(()=>n=!1)),e.$set(c)},i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){m(e.$$.fragment,o),t=!1},d(o){d(e,o)}}}function mt(l,e,n){let t;Ce(l,Re,i=>n(5,t=i));let{isOpen:r=!1}=e,{product:s={}}=e,{selectedCurrency:o=null}=e,{loadedFromFormInvoice:a=!1}=e;const c=Pe();let u=!1;const g=()=>{let i=!0;return s.price||(G.error("Please fill unit price"),i=!1),s.currency||(G.error("Please choose currency"),i=!1),i},C=()=>{n(2,s={}),n(0,o=null)},k=()=>{if(!g()||u)return;n(4,u=!0);const i=s.id?"product/update":"product/add";G.promise(De(i,s,S=>{var O;c("update",(O=S.data)==null?void 0:O.data)}),{loading:"Saving product...",success:()=>(C(),n(4,u=!1),n(1,r=!1),"Product saved successfully!"),error:S=>(n(4,u=!1),Ee(S,"Failed to save product"))})};function Y(i){l.$$.not_equal(s.name,i)&&(s.name=i,n(2,s),n(3,a),n(0,o))}const F=i=>{n(2,s.currency=i.value,s)};function B(i){o=i,n(0,o)}function j(i){l.$$.not_equal(s.price,i)&&(s.price=i,n(2,s),n(3,a),n(0,o))}function N(i){l.$$.not_equal(s.description,i)&&(s.description=i,n(2,s),n(3,a),n(0,o))}function I(i){r=i,n(1,r)}return l.$$set=i=>{"isOpen"in i&&n(1,r=i.isOpen),"product"in i&&n(2,s=i.product),"selectedCurrency"in i&&n(0,o=i.selectedCurrency),"loadedFromFormInvoice"in i&&n(3,a=i.loadedFromFormInvoice)},l.$$.update=()=>{l.$$.dirty&9&&a&&n(2,s.currency=o==null?void 0:o.value,s)},[o,r,s,a,u,t,k,Y,F,B,j,N,I]}class Pt extends we{constructor(e){super(),ke(this,e,mt,pt,Se,{isOpen:1,product:2,selectedCurrency:0,loadedFromFormInvoice:3})}}export{Pt as P};
