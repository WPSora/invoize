import{S as Y,i as Z,s as ee,E as z,I as se,c as k,m as x,F as te,G as ne,j as p,t as m,l as h,H as R,J as oe,K as ie,M as ae,N as fe,a as y,e as C,d as g,f as $,h as D,k as v,O as we,n as U,p as Q,P as ge,r as V,o as J,x as A,g as w,Q as G,B as E,L as ce}from"./Toaster.svelte_svelte_type_style_lang-7f7e6c6a.js";import{h as O,C as be,a as ke}from"./errorHelper-c5761fa6.js";import{C as xe,a as he}from"./index-8135346f.js";import{d as Ce,P as ye}from"./download-792a1be3.js";import{L as Ne,B as Le,a as Ie,I as Te,C as Pe,R as He,A as Me}from"./action-history-1a30dec5.js";import{B as qe}from"./Breadcrumb-694ccbf9.js";import{h as W}from"./moment-a9aaa855.js";import{S as Se}from"./separator-8c150833.js";import{c as pe}from"./capitalHelper-77c0a756.js";import{q as X,A as De}from"./quotation-f89d572c.js";import{C as Qe}from"./copy-31e37340.js";import{M as ze}from"./mail-ca6904f4.js";import"./_commonjsHelpers-725317a4.js";import"./card-footer-319409b2.js";import"./table-row-c2593e52.js";import"./MultilineText-1b659c34.js";import"./decimalFormatter-88348579.js";import"./woocommerce-ffbc825a.js";import"./pluralHelper-a32d0151.js";import"./index-f8fb6e4a.js";import"./updater-76d8237b.js";import"./arrays-9d05857f.js";import"./ProBadge-053dd74a.js";function Fe(o){let e;const r=o[2].default,t=oe(r,o,o[3],null);return{c(){t&&t.c()},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&ie(t,r,l,l[3],e?fe(r,l[3],n,null):ae(l[3]),null)},i(l){e||(p(t,l),e=!0)},o(l){m(t,l),e=!1},d(l){t&&t.d(l)}}}function Ae(o){let e,r;const t=[{name:"download"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Fe]},$$scope:{ctx:o}};for(let n=0;n<t.length;n+=1)l=z(l,t[n]);return e=new se({props:l}),{c(){k(e.$$.fragment)},m(n,s){x(e,n,s),r=!0},p(n,[s]){const f=s&3?te(t,[t[0],s&2&&ne(n[1]),s&1&&{iconNode:n[0]}]):{};s&8&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i(n){r||(p(e.$$.fragment,n),r=!0)},o(n){m(e.$$.fragment,n),r=!1},d(n){h(e,n)}}}function je(o,e,r){let{$$slots:t={},$$scope:l}=e;const n=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]];return o.$$set=s=>{r(1,e=z(z({},e),R(s))),"$$scope"in s&&r(3,l=s.$$scope)},e=R(e),[n,e,t,l]}class Be extends Y{constructor(e){super(),Z(this,e,je,Ae,ee,{})}}const Ee=Be;function Re(o){let e;const r=o[2].default,t=oe(r,o,o[3],null);return{c(){t&&t.c()},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&ie(t,r,l,l[3],e?fe(r,l[3],n,null):ae(l[3]),null)},i(l){e||(p(t,l),e=!0)},o(l){m(t,l),e=!1},d(l){t&&t.d(l)}}}function Ge(o){let e,r;const t=[{name:"external-link"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Re]},$$scope:{ctx:o}};for(let n=0;n<t.length;n+=1)l=z(l,t[n]);return e=new se({props:l}),{c(){k(e.$$.fragment)},m(n,s){x(e,n,s),r=!0},p(n,[s]){const f=s&3?te(t,[t[0],s&2&&ne(n[1]),s&1&&{iconNode:n[0]}]):{};s&8&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i(n){r||(p(e.$$.fragment,n),r=!0)},o(n){m(e.$$.fragment,n),r=!1},d(n){h(e,n)}}}function Ue(o,e,r){let{$$slots:t={},$$scope:l}=e;const n=[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}],["polyline",{points:"15 3 21 3 21 9"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3"}]];return o.$$set=s=>{r(1,e=z(z({},e),R(s))),"$$scope"in s&&r(3,l=s.$$scope)},e=R(e),[n,e,t,l]}class Ve extends Y{constructor(e){super(),Z(this,e,Ue,Ge,ee,{})}}const Je=Ve;function Ke(o){let e;const r=o[2].default,t=oe(r,o,o[3],null);return{c(){t&&t.c()},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&ie(t,r,l,l[3],e?fe(r,l[3],n,null):ae(l[3]),null)},i(l){e||(p(t,l),e=!0)},o(l){m(t,l),e=!1},d(l){t&&t.d(l)}}}function Oe(o){let e,r;const t=[{name:"folder-sync"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Ke]},$$scope:{ctx:o}};for(let n=0;n<t.length;n+=1)l=z(l,t[n]);return e=new se({props:l}),{c(){k(e.$$.fragment)},m(n,s){x(e,n,s),r=!0},p(n,[s]){const f=s&3?te(t,[t[0],s&2&&ne(n[1]),s&1&&{iconNode:n[0]}]):{};s&8&&(f.$$scope={dirty:s,ctx:n}),e.$set(f)},i(n){r||(p(e.$$.fragment,n),r=!0)},o(n){m(e.$$.fragment,n),r=!1},d(n){h(e,n)}}}function We(o,e,r){let{$$slots:t={},$$scope:l}=e;const n=[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v1"}],["path",{d:"M12 10v4h4"}],["path",{d:"m12 14 1.5-1.5c.9-.9 2.2-1.5 3.5-1.5s2.6.6 3.5 1.5c.4.4.8 1 1 1.5"}],["path",{d:"M22 22v-4h-4"}],["path",{d:"m22 18-1.5 1.5c-.9.9-2.1 1.5-3.5 1.5s-2.6-.6-3.5-1.5c-.4-.4-.8-1-1-1.5"}]];return o.$$set=s=>{r(1,e=z(z({},e),R(s))),"$$scope"in s&&r(3,l=s.$$scope)},e=R(e),[n,e,t,l]}class Xe extends Y{constructor(e){super(),Z(this,e,We,Oe,ee,{})}}const Ye=Xe;function me(o){let e,r,t;return r=new qe({props:{to:o[7]}}),{c(){e=C("div"),k(r.$$.fragment),g(e,"class","print:hidden")},m(l,n){$(l,e,n),x(r,e,null),t=!0},p:U,i(l){t||(p(r.$$.fragment,l),t=!0)},o(l){m(r.$$.fragment,l),t=!1},d(l){l&&v(e),h(r)}}}function Ze(o){let e,r;return e=new Ne({}),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p:U,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function et(o){let e,r,t,l,n,s;const f=[o[6]];let i={$$slots:{date:[rt],status:[lt],"header-title":[nt]},$$scope:{ctx:o}};for(let u=0;u<f.length;u+=1)i=z(i,f[u]);e=new Le({props:i});const a=[ot,st],c=[];function d(u,b){return u[0]?1:0}return t=d(o),l=c[t]=a[t](o),{c(){k(e.$$.fragment),r=y(),l.c(),n=J()},m(u,b){x(e,u,b),$(u,r,b),c[t].m(u,b),$(u,n,b),s=!0},p(u,b){const L=b&64?te(f,[ne(u[6])]):{};b&2097153&&(L.$$scope={dirty:b,ctx:u}),e.$set(L);let S=t;t=d(u),t===S?c[t].p(u,b):(Q(),m(c[S],1,1,()=>{c[S]=null}),D(),l=c[t],l?l.p(u,b):(l=c[t]=a[t](u),l.c()),p(l,1),l.m(n.parentNode,n))},i(u){s||(p(e.$$.fragment,u),p(l),s=!0)},o(u){m(e.$$.fragment,u),m(l),s=!1},d(u){u&&(v(r),v(n)),h(e,u),c[t].d(u)}}}function tt(o){let e;return{c(){e=A("Quotation")},m(r,t){$(r,e,t)},d(r){r&&v(e)}}}function nt(o){let e,r,t,l,n=o[0].quotationNumber+"",s,f;return r=new xe({props:{class:"sm:text-[32px] text-[24px] font-bold mb-2",$$slots:{default:[tt]},$$scope:{ctx:o}}}),{c(){e=C("div"),k(r.$$.fragment),t=y(),l=C("p"),s=A(n),g(l,"class","text-base italic font-semibold text-muted-foreground"),g(e,"class","flex flex-col items-end")},m(i,a){$(i,e,a),x(r,e,null),w(e,t),w(e,l),w(l,s),f=!0},p(i,a){const c={};a&2097152&&(c.$$scope={dirty:a,ctx:i}),r.$set(c),(!f||a&1)&&n!==(n=i[0].quotationNumber+"")&&G(s,n)},i(i){f||(p(r.$$.fragment,i),f=!0)},o(i){m(r.$$.fragment,i),f=!1},d(i){i&&v(e),h(r)}}}function lt(o){var d;let e,r,t,l,n,s,f,i=((d=o[0].status)==null?void 0:d.toUpperCase())+"",a,c;return{c(){e=C("div"),r=C("div"),r.innerHTML="<div>Status</div>",t=y(),l=C("div"),l.innerHTML="<div>:</div>",n=y(),s=C("div"),f=C("div"),a=A(i),g(r,"class","w-32 font-medium space-y-1"),g(l,"class","w-10 flex flex-col flex-nowrap items-center space-y-1"),g(f,"id","invoice-status"),g(f,"class",c="w-24 rounded-md text-center text-white "+(o[0].status=="active"?"bg-green-600":"bg-gray-600")),g(s,"class","flex flex-col items-end w-32 space-y-1 font-semibold"),g(e,"class","flex flex-row flex-nowrap")},m(u,b){$(u,e,b),w(e,r),w(e,t),w(e,l),w(e,n),w(e,s),w(s,f),w(f,a)},p(u,b){var L;b&1&&i!==(i=((L=u[0].status)==null?void 0:L.toUpperCase())+"")&&G(a,i),b&1&&c!==(c="w-24 rounded-md text-center text-white "+(u[0].status=="active"?"bg-green-600":"bg-gray-600"))&&g(f,"class",c)},d(u){u&&v(e)}}}function rt(o){let e,r,t,l,n,s,f,i=W(o[0].quotationDate).format(invoize.date_format)+"",a,c,d,u=W(o[0].dueDate).format(invoize.date_format)+"",b;return{c(){e=C("div"),r=C("div"),r.innerHTML="<div>Quotation date</div> <div>Expired date</div>",t=y(),l=C("div"),l.innerHTML="<div>:</div> <div>:</div>",n=y(),s=C("div"),f=C("div"),a=A(i),c=y(),d=C("div"),b=A(u),g(r,"class","w-32 font-medium space-y-1"),g(l,"class","w-10 flex flex-col flex-nowrap items-center space-y-1"),g(s,"class","flex flex-col flex-nowrap items-end w-32 space-y-1"),g(e,"class","flex flex-row flex-nowrap")},m(L,S){$(L,e,S),w(e,r),w(e,t),w(e,l),w(e,n),w(e,s),w(s,f),w(f,a),w(s,c),w(s,d),w(d,b)},p(L,S){S&1&&i!==(i=W(L[0].quotationDate).format(invoize.date_format)+"")&&G(a,i),S&1&&u!==(u=W(L[0].dueDate).format(invoize.date_format)+"")&&G(b,u)},d(L){L&&v(e)}}}function st(o){let e,r;return e=new be({props:{class:"sticky top-16 h-fit rounded-md w-[800px] xl:w-80 space-y-4 print:hidden",$$slots:{default:[Ct]},$$scope:{ctx:o}}}),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p(t,l){const n={};l&2097215&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function ot(o){let e,r;return e=new Ie({}),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p:U,i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function it(o){let e,r,t,l,n=pe(o[0].status)+"",s,f;return{c(){e=C("div"),r=C("div"),r.textContent="Status:",t=y(),l=C("div"),s=A(n),g(r,"class","font-medium"),g(l,"class",f="text-white font-bold px-2 rounded-md "+(o[0].status==="active"?"bg-green-600":"bg-destructive")),g(e,"class","flex flex-col justify-center items-center")},m(i,a){$(i,e,a),w(e,r),w(e,t),w(e,l),w(l,s)},p(i,a){a&1&&n!==(n=pe(i[0].status)+"")&&G(s,n),a&1&&f!==(f="text-white font-bold px-2 rounded-md "+(i[0].status==="active"?"bg-green-600":"bg-destructive"))&&g(l,"class",f)},d(i){i&&v(e)}}}function at(o){let e,r,t,l;return e=new ce({props:{class:"h-4 w-4 animate-spin text-primary"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Processing...",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function ft(o){let e,r,t,l;return e=new Ee({props:{class:"h-4 w-4 text-success"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Download Quotation as PDF",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function ct(o){let e,r,t,l;const n=[ft,at],s=[];function f(i,a){return i[5].download?1:0}return e=f(o),r=s[e]=n[e](o),{c(){r.c(),t=J()},m(i,a){s[e].m(i,a),$(i,t,a),l=!0},p(i,a){let c=e;e=f(i),e!==c&&(Q(),m(s[c],1,1,()=>{s[c]=null}),D(),r=s[e],r||(r=s[e]=n[e](i),r.c()),p(r,1),r.m(t.parentNode,t))},i(i){l||(p(r),l=!0)},o(i){m(r),l=!1},d(i){i&&v(t),s[e].d(i)}}}function ut(o){let e,r,t,l;return e=new ye({props:{class:"h-4 w-4 text-primary"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Print",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},p:U,i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function de(o){let e,r;return e=new E({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 min-w-fit flex-nowrap items-center text-xs gap-2 px-3",$$slots:{default:[pt]},$$scope:{ctx:o}}}),e.$on("click",o[8].copy),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p(t,l){const n={};l&2097152&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function pt(o){let e,r,t,l;return e=new Qe({props:{class:"h-4 w-4 text-primary"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Copy Link",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},p:U,i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function mt(o){let e,r;return e=new E({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 min-w-fit flex-nowrap items-center text-xs gap-2 px-3",disabled:o[5].convertToInvoice,$$slots:{default:[vt]},$$scope:{ctx:o}}}),e.$on("click",o[8].convertToInvoice),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p(t,l){const n={};l&32&&(n.disabled=t[5].convertToInvoice),l&2097184&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function dt(o){let e,r;return e=new E({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 min-w-fit flex-nowrap items-center text-xs gap-2 px-3",target:"_blank",href:"#/invoice/"+o[1].token,$$slots:{default:[wt]},$$scope:{ctx:o}}}),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p(t,l){const n={};l&2&&(n.href="#/invoice/"+t[1].token),l&2097154&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function _t(o){let e,r,t,l;return e=new Ye({props:{class:"h-4 w-4 text-primary"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Convert to Invoice",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function $t(o){let e,r,t,l;return e=new ce({props:{class:"h-4 w-4 animate-spin text-primary"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Converting...",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function vt(o){let e,r,t,l;const n=[$t,_t],s=[];function f(i,a){return i[5].convertToInvoice?0:1}return e=f(o),r=s[e]=n[e](o),{c(){r.c(),t=J()},m(i,a){s[e].m(i,a),$(i,t,a),l=!0},p(i,a){let c=e;e=f(i),e!==c&&(Q(),m(s[c],1,1,()=>{s[c]=null}),D(),r=s[e],r||(r=s[e]=n[e](i),r.c()),p(r,1),r.m(t.parentNode,t))},i(i){l||(p(r),l=!0)},o(i){m(r),l=!1},d(i){i&&v(t),s[e].d(i)}}}function wt(o){let e,r,t,l,n=o[1].invoiceNumber+"",s,f;return e=new Je({props:{class:"h-4 w-4 text-primary"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),l=A("Invoice "),s=A(n),g(t,"class","w-full text-start text-nowrap")},m(i,a){x(e,i,a),$(i,r,a),$(i,t,a),w(t,l),w(t,s),f=!0},p(i,a){(!f||a&2)&&n!==(n=i[1].invoiceNumber+"")&&G(s,n)},i(i){f||(p(e.$$.fragment,i),f=!0)},o(i){m(e.$$.fragment,i),f=!1},d(i){i&&(v(r),v(t)),h(e,i)}}}function _e(o){let e,r;return e=new E({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 min-w-fit flex-nowrap items-center text-xs gap-2 px-3",$$slots:{default:[gt]},$$scope:{ctx:o}}}),e.$on("click",o[8].send),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p(t,l){const n={};l&2097152&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function gt(o){let e,r,t,l;return e=new ze({props:{class:"h-4 w-4 text-blue-400"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Send",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},p:U,i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function $e(o){let e,r;return e=new E({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 min-w-fit flex-nowrap items-center text-xs gap-2 px-3",$$slots:{default:[xt]},$$scope:{ctx:o}}}),e.$on("click",o[8].archive),{c(){k(e.$$.fragment)},m(t,l){x(e,t,l),r=!0},p(t,l){const n={};l&2097184&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){r||(p(e.$$.fragment,t),r=!0)},o(t){m(e.$$.fragment,t),r=!1},d(t){h(e,t)}}}function bt(o){let e,r,t,l;return e=new De({props:{class:"h-4 w-4 text-warning"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Archive",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function kt(o){let e,r,t,l;return e=new ce({props:{class:"h-4 w-4 animate-spin text-warning"}}),{c(){k(e.$$.fragment),r=y(),t=C("div"),t.textContent="Processing...",g(t,"class","w-full text-start text-nowrap")},m(n,s){x(e,n,s),$(n,r,s),$(n,t,s),l=!0},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),l=!1},d(n){n&&(v(r),v(t)),h(e,n)}}}function xt(o){let e,r,t,l;const n=[kt,bt],s=[];function f(i,a){return i[5].archive?0:1}return e=f(o),r=s[e]=n[e](o),{c(){r.c(),t=J()},m(i,a){s[e].m(i,a),$(i,t,a),l=!0},p(i,a){let c=e;e=f(i),e!==c&&(Q(),m(s[c],1,1,()=>{s[c]=null}),D(),r=s[e],r||(r=s[e]=n[e](i),r.c()),p(r,1),r.m(t.parentNode,t))},i(i){l||(p(r),l=!0)},o(i){m(r),l=!1},d(i){i&&v(t),s[e].d(i)}}}function ve(o){let e,r,t,l,n,s,f,i;return e=new Te({props:{internalNote:o[0].internalNote}}),t=new Pe({props:{name:o[2].name,email:o[2].email}}),n=new He({props:{reminder:o[0].reminders}}),f=new Me({props:{actionHistory:o[3]}}),{c(){k(e.$$.fragment),r=y(),k(t.$$.fragment),l=y(),k(n.$$.fragment),s=y(),k(f.$$.fragment)},m(a,c){x(e,a,c),$(a,r,c),x(t,a,c),$(a,l,c),x(n,a,c),$(a,s,c),x(f,a,c),i=!0},p(a,c){const d={};c&1&&(d.internalNote=a[0].internalNote),e.$set(d);const u={};c&4&&(u.name=a[2].name),c&4&&(u.email=a[2].email),t.$set(u);const b={};c&1&&(b.reminder=a[0].reminders),n.$set(b);const L={};c&8&&(L.actionHistory=a[3]),f.$set(L)},i(a){i||(p(e.$$.fragment,a),p(t.$$.fragment,a),p(n.$$.fragment,a),p(f.$$.fragment,a),i=!0)},o(a){m(e.$$.fragment,a),m(t.$$.fragment,a),m(n.$$.fragment,a),m(f.$$.fragment,a),i=!1},d(a){a&&(v(r),v(l),v(s)),h(e,a),h(t,a),h(n,a),h(f,a)}}}function ht(o){let e,r,t,l,n,s,f,i,a,c,d,u,b,L,S,j,N,B;r=new E({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 min-w-fit flex-nowrap items-center text-xs gap-2 px-3",disabled:o[5].download,$$slots:{default:[ct]},$$scope:{ctx:o}}}),r.$on("click",o[8].download),n=new E({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 min-w-fit flex-nowrap items-center text-xs gap-2 px-3",$$slots:{default:[ut]},$$scope:{ctx:o}}}),n.$on("click",o[8].print);let H=!o[4]&&de(o);a=new Se({});const K=[dt,mt],I=[];function F(_,T){return _[1].length!==0?0:_[0].status=="active"&&!_[4]?1:-1}~(d=F(o))&&(u=I[d]=K[d](o));let P=o[0].status=="active"&&!o[4]&&_e(o),M=o[0].status=="active"&&!o[4]&&$e(o),q=!o[4]&&ve(o);return{c(){e=C("div"),k(r.$$.fragment),t=y(),l=C("div"),k(n.$$.fragment),s=y(),H&&H.c(),i=y(),k(a.$$.fragment),c=y(),u&&u.c(),b=y(),L=C("div"),P&&P.c(),S=y(),M&&M.c(),j=y(),q&&q.c(),N=J(),g(l,"class",f="grid "+(o[4]?"grid-cols-1":"grid-cols-2")+" gap-x-1 gap-y-2"),g(L,"class","grid grid-cols-2 gap-x-1 gap-y-2"),g(e,"class","space-y-2")},m(_,T){$(_,e,T),x(r,e,null),w(e,t),w(e,l),x(n,l,null),w(l,s),H&&H.m(l,null),w(e,i),x(a,e,null),w(e,c),~d&&I[d].m(e,null),w(e,b),w(e,L),P&&P.m(L,null),w(L,S),M&&M.m(L,null),$(_,j,T),q&&q.m(_,T),$(_,N,T),B=!0},p(_,T){const le={};T&32&&(le.disabled=_[5].download),T&2097184&&(le.$$scope={dirty:T,ctx:_}),r.$set(le);const ue={};T&2097152&&(ue.$$scope={dirty:T,ctx:_}),n.$set(ue),_[4]?H&&(Q(),m(H,1,1,()=>{H=null}),D()):H?(H.p(_,T),T&16&&p(H,1)):(H=de(_),H.c(),p(H,1),H.m(l,null)),(!B||T&16&&f!==(f="grid "+(_[4]?"grid-cols-1":"grid-cols-2")+" gap-x-1 gap-y-2"))&&g(l,"class",f);let re=d;d=F(_),d===re?~d&&I[d].p(_,T):(u&&(Q(),m(I[re],1,1,()=>{I[re]=null}),D()),~d?(u=I[d],u?u.p(_,T):(u=I[d]=K[d](_),u.c()),p(u,1),u.m(e,b)):u=null),_[0].status=="active"&&!_[4]?P?(P.p(_,T),T&17&&p(P,1)):(P=_e(_),P.c(),p(P,1),P.m(L,S)):P&&(Q(),m(P,1,1,()=>{P=null}),D()),_[0].status=="active"&&!_[4]?M?(M.p(_,T),T&17&&p(M,1)):(M=$e(_),M.c(),p(M,1),M.m(L,null)):M&&(Q(),m(M,1,1,()=>{M=null}),D()),_[4]?q&&(Q(),m(q,1,1,()=>{q=null}),D()):q?(q.p(_,T),T&16&&p(q,1)):(q=ve(_),q.c(),p(q,1),q.m(N.parentNode,N))},i(_){B||(p(r.$$.fragment,_),p(n.$$.fragment,_),p(H),p(a.$$.fragment,_),p(u),p(P),p(M),p(q),B=!0)},o(_){m(r.$$.fragment,_),m(n.$$.fragment,_),m(H),m(a.$$.fragment,_),m(u),m(P),m(M),m(q),B=!1},d(_){_&&(v(e),v(j),v(N)),h(r),h(n),H&&H.d(),h(a),~d&&I[d].d(),P&&P.d(),M&&M.d(),q&&q.d(_)}}}function Ct(o){let e,r,t,l;return e=new he({props:{class:"bg-accent flex flex-row items-center justify-around",$$slots:{default:[it]},$$scope:{ctx:o}}}),t=new ke({props:{class:"space-y-4",$$slots:{default:[ht]},$$scope:{ctx:o}}}),{c(){k(e.$$.fragment),r=y(),k(t.$$.fragment)},m(n,s){x(e,n,s),$(n,r,s),x(t,n,s),l=!0},p(n,s){const f={};s&2097153&&(f.$$scope={dirty:s,ctx:n}),e.$set(f);const i={};s&2097215&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){l||(p(e.$$.fragment,n),p(t.$$.fragment,n),l=!0)},o(n){m(e.$$.fragment,n),m(t.$$.fragment,n),l=!1},d(n){n&&v(r),h(e,n),h(t,n)}}}function yt(o){let e,r,t,l,n,s=!o[4]&&me(o);const f=[et,Ze],i=[];function a(c,d){return c[0]?0:1}return t=a(o),l=i[t]=f[t](o),{c(){s&&s.c(),e=y(),r=C("div"),l.c(),g(r,"class","flex flex-wrap xl:flex-nowrap justify-center xl:justify-center gap-8 mt-8"),g(r,"id","invoice-content-wrap")},m(c,d){s&&s.m(c,d),$(c,e,d),$(c,r,d),i[t].m(r,null),n=!0},p(c,[d]){c[4]?s&&(Q(),m(s,1,1,()=>{s=null}),D()):s?(s.p(c,d),d&16&&p(s,1)):(s=me(c),s.c(),p(s,1),s.m(e.parentNode,e));let u=t;t=a(c),t===u?i[t].p(c,d):(Q(),m(i[u],1,1,()=>{i[u]=null}),D(),l=i[t],l?l.p(c,d):(l=i[t]=f[t](c),l.c()),p(l,1),l.m(r,null))},i(c){n||(p(s),p(l),n=!0)},o(c){m(s),m(l),n=!1},d(c){c&&(v(e),v(r)),s&&s.d(c),i[t].d()}}}function Nt(o,e,r){let t,{params:l={}}=e,n,s,f,i=null,a,c,d,u=!1;const b=location.hash.split("/"),L=[{name:"Quotation",link:"quotations"},{name:"List",link:`${b[1]}/${b[2]}`},{name:"Detail",link:`${b[1]}/${b[2]}/${b[3]}`}],S=()=>{r(10,d=`${invoize.base_url}/invoize-quotation/${s}`)},j=async()=>{try{r(0,f=await X.detail(s)),r(2,a=f.user),n=f.id,r(3,c=f.actionHistory),r(1,i=f.invoice)}catch(I){O(I,"Failed to fetch quotation detail")}},N={convertToInvoice:!1,archive:!1,send:!1,download:!1},B={download:()=>{r(5,N.download=!0,N),ge(`download/quotation?token=${s}`).then(I=>{Ce(atob(I.data.content),`${I.data.filename}`,"application/pdf")}).catch(I=>{V.error(I.message.response.data.message)}).finally(()=>{r(5,N.download=!1,N)})},send:()=>{r(5,N.send=!0,N),V.promise(X.send(s),{loading:"Sending Quotation...",success:()=>(r(5,N.send=!1,N),"Quotation sent successfully"),error:I=>{var F,P;return r(5,N.send=!1,N),O(I,(P=(F=I.message.response)==null?void 0:F.data)==null?void 0:P.message,!1)}})},copy:()=>{navigator.clipboard.writeText(d),V.success("Link copied to clipboard")},archive:()=>{r(5,N.archive=!0,N),V.promise(X.archive(s),{loading:"Processing...",success:()=>(r(5,N.archive=!1,N),j(),"Successfully archived"),error:I=>(r(5,N.archive=!1,N),O(I,"Failed to archive"))})},print:()=>{window.print()},convertToInvoice:()=>{r(5,N.convertToInvoice=!0,N),V.promise(X.convertToInvoice(s),{loading:"Converting to invoice...",success:()=>(r(5,N.convertToInvoice=!1,N),j(),"Successfully converted to invoice"),error:I=>(r(5,N.convertToInvoice=!1,N),O(I,"Failed to convert to invoice"))})}},H=()=>{if(u){const F=window.location.pathname.split("/");s=F.pop()||F.pop()}else s=l==null?void 0:l.token},K=()=>{r(4,u=window.location.href.includes(`${invoize.base_url}/invoize-quotation/`))};return we(()=>{K(),H(),S(),j()}),o.$$set=I=>{"params"in I&&r(9,l=I.params)},o.$$.update=()=>{o.$$.dirty&1025&&r(6,t={invoice:f,note:f==null?void 0:f.notes,publicLink:d,isQuotation:!0})},[f,i,a,c,u,N,t,L,B,l,d]}class Wt extends Y{constructor(e){super(),Z(this,e,Nt,yt,ee,{params:9})}}export{Wt as default};
