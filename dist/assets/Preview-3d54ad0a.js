import{S as J,i as K,s as Q,E as ie,I as St,c as v,m as h,F as ue,G as ke,j as _,t as p,l as D,H as De,J as Pt,K as yt,M as It,N as Lt,y as pe,d as A,a8 as Ce,f as b,g as C,v as U,k,a9 as Se,e as L,a as N,x as T,Q as X,a4 as ee,a5 as te,a6 as ne,n as re,o as z,h as j,L as $e,B as se,z as Le,a7 as ge,u as Ne,w as At,P as Pe,q as ce,Y as Nt,C as Et,aa as Tt,ab as Rt,X as Ee,O as Ot,p as fe,Z as Mt}from"./Toaster.svelte_svelte_type_style_lang-3086cbd0.js";import{I as M,a as Te,b as W,c as Ut}from"./enum-9d62bdc6.js";import{t as he}from"./triggerTabUpdateHelper-54f25315.js";import{C as Ht,a as zt,e as Re,i as jt,h as ae}from"./errorHelper-eef9e97b.js";import{a as Vt,I as Wt,C as Bt,R as Ft,A as Gt,B as Xt,L as Zt}from"./action-history-6aa79567.js";import{B as qt}from"./Breadcrumb-8a216a28.js";import{A as rt,a as lt,b as Yt}from"./index-0984da6d.js";import{A as Jt}from"./alert-circle-114bd275.js";import{R as Kt,D as Qt}from"./options-89ca2928.js";import{f as ye,s as Oe,a as xt,C as en}from"./index-2f32262e.js";import{D as Ae}from"./dialog-header-208ee491.js";import{X as tn}from"./x-circle-cf56b721.js";import{B as nn}from"./badge-check-09e42ec2.js";import{X as rn}from"./x-e55b9835.js";import{C as st}from"./check-f7986a1f.js";import{S as ln}from"./separator-d7b15c7c.js";import{g as sn}from"./actionHelper-40ee3d39.js";import{R as on,T as an,a as fn}from"./index-d3c8ba18.js";import{H as cn}from"./history-71cd67db.js";import{R as un}from"./refresh-ccw-0ff8dd89.js";import{P as mn}from"./pencil-15e1e778.js";import{T as _n,P as dn,B as pn,F as gn,C as $n,a as bn}from"./CreateRecurringModal-63416434.js";import{S as kn}from"./send-e1cefc13.js";import{C as ot}from"./circle-dollar-sign-0af52bca.js";import{P as wn,d as Me}from"./download-21aefe34.js";import{h as Ie}from"./moment-a9aaa855.js";import{c as Ue}from"./capitalHelper-77c0a756.js";import{R as vn,A as hn,a as at,b as ft,c as ct,d as ut,e as mt}from"./index-e2de6100.js";import{C as Dn}from"./checkbox-3eb65d0a.js";import{L as Cn}from"./label-7d3a217f.js";import"./invoice-list-store-3ca58dd7.js";import"./card-footer-7cfda621.js";import"./table-row-9bf80d0a.js";import"./MultilineText-07aaf54e.js";import"./decimalFormatter-88348579.js";import"./woocommerce-cbeb8447.js";import"./_commonjsHelpers-725317a4.js";import"./pluralHelper-a32d0151.js";import"./index-4f0b7d19.js";import"./updater-cbd8223a.js";import"./arrays-9d05857f.js";import"./ProBadge-35078e4e.js";import"./helpers-9268112f.js";import"./input-342b31a9.js";import"./index-7095afc4.js";import"./Check-fa20f0eb.js";import"./action-39728114.js";import"./create-e552ce8d.js";import"./setDefaultRecurring-f1d67430.js";function Sn(s){let e;const t=s[2].default,n=Pt(t,s,s[3],null);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&8)&&yt(n,t,i,i[3],e?Lt(t,i[3],r,null):It(i[3]),null)},i(i){e||(_(n,i),e=!0)},o(i){p(n,i),e=!1},d(i){n&&n.d(i)}}}function Pn(s){let e,t;const n=[{name:"help-circle"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Sn]},$$scope:{ctx:s}};for(let r=0;r<n.length;r+=1)i=ie(i,n[r]);return e=new St({props:i}),{c(){v(e.$$.fragment)},m(r,l){h(e,r,l),t=!0},p(r,[l]){const a=l&3?ue(n,[n[0],l&2&&ke(r[1]),l&1&&{iconNode:r[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){p(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function yn(s,e,t){let{$$slots:n={},$$scope:i}=e;const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];return s.$$set=l=>{t(1,e=ie(ie({},e),De(l))),"$$scope"in l&&t(3,i=l.$$scope)},e=De(e),[r,e,n,i]}class In extends J{constructor(e){super(),K(this,e,yn,Pn,Q,{})}}const Ln=In;function An(s){let e,t,n=[{width:s[1]},{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[2]],i={};for(let r=0;r<n.length;r+=1)i=ie(i,n[r]);return{c(){e=pe("svg"),t=pe("path"),A(t,"fill-rule","evenodd"),A(t,"clip-rule","evenodd"),A(t,"d","M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z"),A(t,"fill",s[0]),Ce(e,i)},m(r,l){b(r,e,l),C(e,t)},p(r,[l]){l&1&&A(t,"fill",r[0]),Ce(e,i=ue(n,[l&2&&{width:r[1]},l&2&&{height:r[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},l&4&&r[2]]))},i:U,o:U,d(r){r&&k(e)}}}function Nn(s,e,t){const n=["color","size"];let i=Se(e,n),{color:r="currentColor"}=e,{size:l=15}=e;return s.$$set=a=>{e=ie(ie({},e),De(a)),t(2,i=Se(e,n)),"color"in a&&t(0,r=a.color),"size"in a&&t(1,l=a.size)},[r,l,i]}class En extends J{constructor(e){super(),K(this,e,Nn,An,Q,{color:0,size:1})}}const Tn=En;function Rn(s){let e,t,n=[{width:s[1]},{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[2]],i={};for(let r=0;r<n.length;r+=1)i=ie(i,n[r]);return{c(){e=pe("svg"),t=pe("path"),A(t,"fill-rule","evenodd"),A(t,"clip-rule","evenodd"),A(t,"d","M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5539 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1041 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z"),A(t,"fill",s[0]),Ce(e,i)},m(r,l){b(r,e,l),C(e,t)},p(r,[l]){l&1&&A(t,"fill",r[0]),Ce(e,i=ue(n,[l&2&&{width:r[1]},l&2&&{height:r[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},l&4&&r[2]]))},i:U,o:U,d(r){r&&k(e)}}}function On(s,e,t){const n=["color","size"];let i=Se(e,n),{color:r="currentColor"}=e,{size:l=15}=e;return s.$$set=a=>{e=ie(ie({},e),De(a)),t(2,i=Se(e,n)),"color"in a&&t(0,r=a.color),"size"in a&&t(1,l=a.size)},[r,l,i]}class Mn extends J{constructor(e){super(),K(this,e,On,Rn,Q,{color:0,size:1})}}const _t=Mn;function Un(s){let e,t;return{c(){e=T("This invoice has "),t=T(s[0])},m(n,i){b(n,e,i),b(n,t,i)},p(n,i){i&1&&X(t,n[0])},d(n){n&&(k(e),k(t))}}}function Hn(s){let e;return{c(){e=T("Please contact your merchant for more information.")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function zn(s){let e,t,n,i,r,l,a,o;return t=new Jt({props:{class:"h-8 w-8 text-destructive mr-2"}}),r=new lt({props:{$$slots:{default:[Un]},$$scope:{ctx:s}}}),a=new Yt({props:{$$slots:{default:[Hn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),i=L("div"),v(r.$$.fragment),l=N(),v(a.$$.fragment)},m(f,u){b(f,e,u),h(t,e,null),b(f,n,u),b(f,i,u),h(r,i,null),C(i,l),h(a,i,null),o=!0},p(f,u){const c={};u&3&&(c.$$scope={dirty:u,ctx:f}),r.$set(c);const g={};u&2&&(g.$$scope={dirty:u,ctx:f}),a.$set(g)},i(f){o||(_(t.$$.fragment,f),_(r.$$.fragment,f),_(a.$$.fragment,f),o=!0)},o(f){p(t.$$.fragment,f),p(r.$$.fragment,f),p(a.$$.fragment,f),o=!1},d(f){f&&(k(e),k(n),k(i)),D(t),D(r),D(a)}}}function jn(s){let e,t,n;return t=new rt({props:{class:"md:w-1/2 w-full md:mx-0 mx-5 flex",$$slots:{default:[zn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),A(e,"class","w-full h-60 flex justify-center items-center")},m(i,r){b(i,e,r),h(t,e,null),n=!0},p(i,[r]){const l={};r&3&&(l.$$scope={dirty:r,ctx:i}),t.$set(l)},i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&k(e),D(t)}}}function Vn(s,e,t){let{tab:n}=e;return s.$$set=i=>{"tab"in i&&t(0,n=i.tab)},[n]}class Wn extends J{constructor(e){super(),K(this,e,Vn,jn,Q,{tab:0})}}function Bn(s){let e;return{c(){e=T("Invoice not found")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function Fn(s){let e,t,n,i,r;return t=new Ln({props:{class:"h-8 w-8 text-amber-500 mr-3"}}),i=new lt({props:{class:"text-muted-foreground",$$slots:{default:[Bn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment)},m(l,a){b(l,e,a),h(t,e,null),b(l,n,a),h(i,l,a),r=!0},p(l,a){const o={};a&1&&(o.$$scope={dirty:a,ctx:l}),i.$set(o)},i(l){r||(_(t.$$.fragment,l),_(i.$$.fragment,l),r=!0)},o(l){p(t.$$.fragment,l),p(i.$$.fragment,l),r=!1},d(l){l&&(k(e),k(n)),D(t),D(i,l)}}}function Gn(s){let e,t,n;return t=new rt({props:{class:"md:w-1/2 w-full md:mx-0 mx-5 flex items-center text-lg",$$slots:{default:[Fn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),A(e,"class","w-full h-60 flex justify-center items-center")},m(i,r){b(i,e,r),h(t,e,null),n=!0},p(i,[r]){const l={};r&1&&(l.$$scope={dirty:r,ctx:i}),t.$set(l)},i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&k(e),D(t)}}}class Xn extends J{constructor(e){super(),K(this,e,null,Gn,Q,{})}}function Zn(s){let e,t,n,i,r,l,a,o;const f=[Jn,Yn],u=[];function c(m,S){return m[3]?0:m[3]?-1:1}~(e=c(s))&&(t=u[e]=f[e](s));const g=[ti,ei,xn],$=[];function y(m,S){return m[4]?0:!m[4]&&m[5]?1:!m[4]&&!m[5]?2:-1}~(i=y(s))&&(r=$[i]=g[i](s));let d=!s[4]&&ze(s);return{c(){t&&t.c(),n=N(),r&&r.c(),l=N(),d&&d.c(),a=re()},m(m,S){~e&&u[e].m(m,S),b(m,n,S),~i&&$[i].m(m,S),b(m,l,S),d&&d.m(m,S),b(m,a,S),o=!0},p(m,S){let I=e;e=c(m),e===I?~e&&u[e].p(m,S):(t&&(z(),p(u[I],1,1,()=>{u[I]=null}),j()),~e?(t=u[e],t?t.p(m,S):(t=u[e]=f[e](m),t.c()),_(t,1),t.m(n.parentNode,n)):t=null);let w=i;i=y(m),i===w?~i&&$[i].p(m,S):(r&&(z(),p($[w],1,1,()=>{$[w]=null}),j()),~i?(r=$[i],r?r.p(m,S):(r=$[i]=g[i](m),r.c()),_(r,1),r.m(l.parentNode,l)):r=null),m[4]?d&&(z(),p(d,1,1,()=>{d=null}),j()):d?(d.p(m,S),S&16&&_(d,1)):(d=ze(m),d.c(),_(d,1),d.m(a.parentNode,a))},i(m){o||(_(t),_(r),_(d),o=!0)},o(m){p(t),p(r),p(d),o=!1},d(m){m&&(k(n),k(l),k(a)),~e&&u[e].d(m),~i&&$[i].d(m),d&&d.d(m)}}}function qn(s){let e,t,n,i,r;return t=new Ae({props:{$$slots:{default:[ii]},$$scope:{ctx:s}}}),i=new $e({props:{class:"h-20 w-20 animate-spin text-primary",strokeWidth:1}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment),A(e,"class","h-60 flex flex-col items-center justify-center gap-3")},m(l,a){b(l,e,a),h(t,e,null),C(e,n),h(i,e,null),r=!0},p(l,a){const o={};a&512&&(o.$$scope={dirty:a,ctx:l}),t.$set(o)},i(l){r||(_(t.$$.fragment,l),_(i.$$.fragment,l),r=!0)},o(l){p(t.$$.fragment,l),p(i.$$.fragment,l),r=!1},d(l){l&&k(e),D(t),D(i)}}}function Yn(s){let e,t,n,i,r,l;return t=new Ae({props:{class:"font-semibold text-xl mb-4",$$slots:{default:[Kn]},$$scope:{ctx:s}}}),i=new tn({props:{class:"h-28 w-28 text-destructive"}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment),A(e,"class","flex flex-col items-center justify-center")},m(a,o){b(a,e,o),h(t,e,null),C(e,n),h(i,e,null),l=!0},p(a,o){const f={};o&512&&(f.$$scope={dirty:o,ctx:a}),t.$set(f)},i(a){l||(_(t.$$.fragment,a),_(i.$$.fragment,a),a&&Le(()=>{l&&(r||(r=ge(e,ye,{},!0)),r.run(1))}),l=!0)},o(a){p(t.$$.fragment,a),p(i.$$.fragment,a),a&&(r||(r=ge(e,ye,{},!1)),r.run(0)),l=!1},d(a){a&&k(e),D(t),D(i),a&&r&&r.end()}}}function Jn(s){let e,t,n,i,r,l,a,o,f,u=(s[1]??"")+"",c,g,$,y;return t=new nn({props:{class:"h-44 w-44 text-green-600"}}),i=new Ae({props:{class:"text-2xl font-bold mb-1",$$slots:{default:[Qn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment),r=N(),l=L("div"),a=T("Your payment for "),o=L("b"),f=T("Invoice "),c=T(u),g=T(" has been successfully accepted."),A(l,"class","text-center text-base"),A(e,"class","flex flex-col items-center justify-center mb-2")},m(d,m){b(d,e,m),h(t,e,null),C(e,n),h(i,e,null),C(e,r),C(e,l),C(l,a),C(l,o),C(o,f),C(o,c),C(l,g),y=!0},p(d,m){const S={};m&512&&(S.$$scope={dirty:m,ctx:d}),i.$set(S),(!y||m&2)&&u!==(u=(d[1]??"")+"")&&X(c,u)},i(d){y||(_(t.$$.fragment,d),_(i.$$.fragment,d),d&&Le(()=>{y&&($||($=ge(e,ye,{},!0)),$.run(1))}),y=!0)},o(d){p(t.$$.fragment,d),p(i.$$.fragment,d),d&&($||($=ge(e,ye,{},!1)),$.run(0)),y=!1},d(d){d&&k(e),D(t),D(i),d&&$&&$.end()}}}function Kn(s){let e;return{c(){e=T("Payment Failed")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function Qn(s){let e;return{c(){e=T("Payment Successful")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function xn(s){let e,t,n,i,r,l,a;n=new rn({props:{class:"h-4 w-4 text-destructive"}});let o=s[3]&&He();return{c(){e=L("div"),t=L("div"),v(n.$$.fragment),i=N(),r=L("div"),r.textContent="Failed to update Invoice payment status.",l=N(),o&&o.c(),A(r,"class","text-sm"),A(t,"class","flex gap-2 items-center justify-center")},m(f,u){b(f,e,u),C(e,t),h(n,t,null),C(t,i),C(t,r),C(e,l),o&&o.m(e,null),a=!0},p(f,u){f[3]?o||(o=He(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(f){a||(_(n.$$.fragment,f),a=!0)},o(f){p(n.$$.fragment,f),a=!1},d(f){f&&k(e),D(n),o&&o.d()}}}function ei(s){let e,t,n,i,r;return t=new st({props:{class:"h-4 w-4 text-green-600",strokeWidth:3}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),i=L("div"),i.textContent="Invoice payment status has been updated",A(i,"class","text-sm"),A(e,"class","flex gap-2 items-center justify-center")},m(l,a){b(l,e,a),h(t,e,null),C(e,n),C(e,i),r=!0},p:U,i(l){r||(_(t.$$.fragment,l),r=!0)},o(l){p(t.$$.fragment,l),r=!1},d(l){l&&k(e),D(t)}}}function ti(s){let e,t,n,i,r;return i=new $e({props:{class:"h-4 w-4 text-primary-300 animate-spin"}}),{c(){e=L("div"),t=L("div"),t.textContent="Updating invoice payment status",n=N(),v(i.$$.fragment),A(t,"class","text-muted-foreground"),A(e,"class","flex gap-2 items-center justify-center")},m(l,a){b(l,e,a),C(e,t),C(e,n),h(i,e,null),r=!0},p:U,i(l){r||(_(i.$$.fragment,l),r=!0)},o(l){p(i.$$.fragment,l),r=!1},d(l){l&&k(e),D(i)}}}function He(s){let e;return{c(){e=L("div"),e.textContent="Please contact your merchant to manually update the invoice payment satus",A(e,"class","text-xs text-center")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ze(s){let e,t;return e=new se({props:{class:"mt-2",$$slots:{default:[ni]},$$scope:{ctx:s}}}),e.$on("click",s[6]),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&512&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ni(s){let e;return{c(){e=T("Return to Invoice")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ii(s){let e;return{c(){e=T("Don't close this page while we process your payment...")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ri(s){let e,t,n,i;const r=[qn,Zn],l=[];function a(o,f){return o[2]?0:1}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=re()},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?l[e].p(o,f):(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t?t.p(o,f):(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function li(s){let e,t;return e=new Qt({props:{class:"flex flex-col justify-center items-center bg-gradient-to-tr from-slate-100 to-white shadow-2xl p-12",$$slots:{default:[ri]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&574&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function si(s){let e,t,n;function i(l){s[8](l)}let r={closeOnOutsideClick:!1,closeOnEscape:!1,onOpenChange:s[6],$$slots:{default:[li]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.open=s[0]),e=new Kt({props:r}),ee.push(()=>te(e,"open",i)),{c(){v(e.$$.fragment)},m(l,a){h(e,l,a),n=!0},p(l,[a]){const o={};a&574&&(o.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,o.open=l[0],ne(()=>t=!1)),e.$set(o)},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){D(e,l)}}}function oi(s,e,t){let{invoiceId:n}=e,{isOpen:i=!1}=e,{isCapturingPayment:r}=e,{isPaymentSuccess:l}=e,{isUpdatingPaymentStatus:a}=e,{publicLink:o}=e,{isInvoicePaymentStatusUpdated:f}=e;const u=()=>{window.location.href=o};function c(g){i=g,t(0,i)}return s.$$set=g=>{"invoiceId"in g&&t(1,n=g.invoiceId),"isOpen"in g&&t(0,i=g.isOpen),"isCapturingPayment"in g&&t(2,r=g.isCapturingPayment),"isPaymentSuccess"in g&&t(3,l=g.isPaymentSuccess),"isUpdatingPaymentStatus"in g&&t(4,a=g.isUpdatingPaymentStatus),"publicLink"in g&&t(7,o=g.publicLink),"isInvoicePaymentStatusUpdated"in g&&t(5,f=g.isInvoicePaymentStatusUpdated)},[i,n,r,l,a,f,u,o,c]}class ai extends J{constructor(e){super(),K(this,e,oi,si,Q,{invoiceId:1,isOpen:0,isCapturingPayment:2,isPaymentSuccess:3,isUpdatingPaymentStatus:4,publicLink:7,isInvoicePaymentStatusUpdated:5})}}function je(s,e,t){const n=s.slice();return n[6]=e[t],n}function fi(s){let e,t;function n(){return s[5](s[6])}return e=new se({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 flex-nowrap items-center justify-between text-xs gap-2 px-3",$$slots:{default:[vi]},$$scope:{ctx:s}}}),e.$on("click",n),{c(){v(e.$$.fragment)},m(i,r){h(e,i,r),t=!0},p(i,r){s=i;const l={};r&1029&&(l.$$scope={dirty:r,ctx:s}),e.$set(l)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function ci(s){let e,t;return e=new on({props:{openDelay:200,$$slots:{default:[Si]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&1035&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ui(s){let e,t;return e=new cn({props:{class:le+" text-teal-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function mi(s){let e,t;return e=new un({props:{class:le+" text-teal-400"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function _i(s){let e,t;return e=new mn({props:{class:le+" text-blue-400"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function di(s){let e,t;return e=new _n({props:{class:le+" text-red-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function pi(s){let e,t;return e=new dn({props:{class:le+" text-amber-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function gi(s){let e,t;return e=new pn({props:{class:le+" text-gray-400"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function $i(s){let e,t;return e=new gn({props:{class:le+" text-primary-300"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function bi(s){let e,t;return e=new kn({props:{class:le+" text-cyan-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ki(s){let e,t;return e=new ot({props:{class:le+" text-destructive"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function wi(s){let e,t;return e=new ot({props:{class:le+" text-green-600"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ve(s){let e,t;return{c(){e=pe("svg"),t=pe("path"),A(t,"fill","#22c55e"),A(t,"d","M63.94 39.721l-3.956-22.388c-.369-2.093-2.37-3.495-4.465-3.125l-31.726 5.605c-1.971.348-3.308 2.148-3.15 4.102-.022.162 3.983 22.751 3.983 22.751a3.82 3.82 0 0 0 1.586 2.487c.655.458 1.418.696 2.201.696a3.88 3.88 0 0 0 .678-.06l31.724-5.605c1.014-.179 1.896-.741 2.487-1.586a3.83 3.83 0 0 0 .638-2.879zm-2.673-3.636L50.6 27.879c3.003-3.233 6.138-6.785 7.702-8.572l2.965 16.778zM24.143 21.783l31.725-5.606c.109-.018.217-.028.323-.028.613 0 1.174.311 1.515.8-.932 1.072-9.375 10.757-13.433 14.56-1.062.993-2.603 1.243-3.918.632-4.79-2.213-15.22-7.446-17.727-8.707a1.84 1.84 0 0 1 .32-.887c.284-.406.709-.677 1.195-.764zm-1.164 4.064l10.512 5.219-7.523 11.702-2.99-16.921zm38.686 15.607a1.84 1.84 0 0 1-1.195.763l-31.725 5.606a1.85 1.85 0 0 1-1.386-.308 1.84 1.84 0 0 1-.763-1.195l-.115-.652 8.82-13.72h0l4.215 2.009a5.56 5.56 0 0 0 2.335.516 5.53 5.53 0 0 0 3.789-1.505c1.005-.941 2.255-2.215 3.586-3.622l12.558 9.66.188 1.063a1.84 1.84 0 0 1-.308 1.385zM19.008 29.867c-.096-.544-.616-.911-1.158-.811L.826 32.065a1 1 0 0 0 .172 1.984.95.95 0 0 0 .175-.016l17.024-3.008a1 1 0 0 0 .81-1.158zm1.021 5.785a1 1 0 0 0-1.158-.811L8.657 36.646a1 1 0 0 0 .173 1.984.95.95 0 0 0 .175-.016l10.214-1.805a1 1 0 0 0 .811-1.158zm-.141 4.945L13.079 41.8a1 1 0 0 0 .173 1.984.95.95 0 0 0 .175-.016l6.809-1.203a1 1 0 0 0 .811-1.158c-.095-.544-.617-.912-1.158-.811z"),A(e,"data-bs-toggle","tooltip"),A(e,"title","Email sent"),A(e,"class","w-5 h-5"),A(e,"xmlns","http://www.w3.org/2000/svg"),A(e,"viewBox","0 0 64 64"),A(e,"xmlns:v","https://vecta.io/nano")},m(n,i){b(n,e,i),C(e,t)},d(n){n&&k(e)}}}function vi(s){let e,t,n,i,r,l=(s[6].label===Te.DUPLICATE?"Duplicate":s[6].label)+"",a,o,f,u;const c=[wi,ki,bi,$i,gi,pi,di,_i,mi,ui],g=[];function $(d,m){return d[6].status===W.PAID?0:d[6].status===W.UNPAID?1:d[6].status===M.SEND?2:d[6].status===M.DUPLICATE?3:d[6].status===M.CANCELLED?4:d[6].status===M.ARCHIVED?5:d[6].status===M.TRASHED?6:d[6].status===M.EDIT?7:d[6].status===M.REGENERATE?8:9}t=$(s),n=g[t]=c[t](s);let y=s[2]&&s[6].status===M.SEND&&Ve();return{c(){e=L("div"),n.c(),i=N(),r=L("div"),a=T(l),o=N(),y&&y.c(),f=N(),A(r,"class","w-full text-start text-wrap"),A(e,"class","flex flex-row flex-nowrap h-10 items-center w-full gap-2")},m(d,m){b(d,e,m),g[t].m(e,null),C(e,i),C(e,r),C(r,a),b(d,o,m),y&&y.m(d,m),b(d,f,m),u=!0},p(d,m){let S=t;t=$(d),t===S?g[t].p(d,m):(z(),p(g[S],1,1,()=>{g[S]=null}),j(),n=g[t],n?n.p(d,m):(n=g[t]=c[t](d),n.c()),_(n,1),n.m(e,i)),(!u||m&1)&&l!==(l=(d[6].label===Te.DUPLICATE?"Duplicate":d[6].label)+"")&&X(a,l),d[2]&&d[6].status===M.SEND?y||(y=Ve(),y.c(),y.m(f.parentNode,f)):y&&(y.d(1),y=null)},i(d){u||(_(n),u=!0)},o(d){p(n),u=!1},d(d){d&&(k(e),k(o),k(f)),g[t].d(),y&&y.d(d)}}}function hi(s){let e,t,n,i,r=s[6].label+"",l,a;return t=new $n({props:{class:le+" text-teal-500"}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),i=L("div"),l=T(r),A(i,"class","w-full text-start text-wrap"),A(e,"class","flex flex-row flex-nowrap h-10 items-center w-full gap-2")},m(o,f){b(o,e,f),h(t,e,null),C(e,n),C(e,i),C(i,l),a=!0},p(o,f){(!a||f&1)&&r!==(r=o[6].label+"")&&X(l,r)},i(o){a||(_(t.$$.fragment,o),a=!0)},o(o){p(t.$$.fragment,o),a=!1},d(o){o&&k(e),D(t)}}}function Di(s){let e,t;function n(){return s[4](s[6])}return e=new se({props:{builders:[s[9]],variant:"outline",class:"w-full flex flex-row h-10 p-4 col-span-2 flex-nowrap items-center justify-between text-xs gap-2 px-3 "+(s[3]?"opacity-50 cursor-not-allowed":""),$$slots:{default:[hi]},$$scope:{ctx:s}}}),e.$on("click",n),{c(){v(e.$$.fragment)},m(i,r){h(e,i,r),t=!0},p(i,r){s=i;const l={};r&512&&(l.builders=[s[9]]),r&8&&(l.class="w-full flex flex-row h-10 p-4 col-span-2 flex-nowrap items-center justify-between text-xs gap-2 px-3 "+(s[3]?"opacity-50 cursor-not-allowed":"")),r&1025&&(l.$$scope={dirty:r,ctx:s}),e.$set(l)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function We(s){let e,t;return e=new fn({props:{$$slots:{default:[Ci]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ci(s){let e;return{c(){e=L("div"),e.textContent="Invoice is already recurring"},m(t,n){b(t,e,n)},p:U,d(t){t&&k(e)}}}function Si(s){let e,t,n,i;e=new an({props:{asChild:!0,$$slots:{default:[Di,({builder:l})=>({9:l}),({builder:l})=>l?512:0]},$$scope:{ctx:s}}});let r=s[3]&&We(s);return{c(){v(e.$$.fragment),t=N(),r&&r.c(),n=N()},m(l,a){h(e,l,a),b(l,t,a),r&&r.m(l,a),b(l,n,a),i=!0},p(l,a){const o={};a&1547&&(o.$$scope={dirty:a,ctx:l}),e.$set(o),l[3]?r?a&8&&_(r,1):(r=We(l),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(z(),p(r,1,1,()=>{r=null}),j())},i(l){i||(_(e.$$.fragment,l),_(r),i=!0)},o(l){p(e.$$.fragment,l),p(r),i=!1},d(l){l&&(k(t),k(n)),D(e,l),r&&r.d(l)}}}function Be(s){let e,t,n,i;const r=[ci,fi],l=[];function a(o,f){return o[6].status===M.TO_RECURRING?0:1}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=re()},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?l[e].p(o,f):(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t?t.p(o,f):(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function Pi(s){let e,t,n=Ne(s[0]),i=[];for(let l=0;l<n.length;l+=1)i[l]=Be(je(s,n,l));const r=l=>p(i[l],1,1,()=>{i[l]=null});return{c(){e=L("div");for(let l=0;l<i.length;l+=1)i[l].c();A(e,"class","grid grid-cols-3 xl:grid-cols-2 gap-y-2 gap-x-1")},m(l,a){b(l,e,a);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);t=!0},p(l,[a]){if(a&527){n=Ne(l[0]);let o;for(o=0;o<n.length;o+=1){const f=je(l,n,o);i[o]?(i[o].p(f,a),_(i[o],1)):(i[o]=Be(f),i[o].c(),_(i[o],1),i[o].m(e,null))}for(z(),o=n.length;o<i.length;o+=1)r(o);j()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)_(i[a]);t=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)p(i[a]);t=!1},d(l){l&&k(e),At(i,l)}}}const le="h-4 w-4";function yi(s,e,t){let{invoiceActions:n}=e,{actionHandler:i}=e,{isSent:r}=e,{isRecurring:l=!1}=e;const a=f=>{l||i(f)},o=f=>i(f);return s.$$set=f=>{"invoiceActions"in f&&t(0,n=f.invoiceActions),"actionHandler"in f&&t(1,i=f.actionHandler),"isSent"in f&&t(2,r=f.isSent),"isRecurring"in f&&t(3,l=f.isRecurring)},[n,i,r,l,a,o]}class Ii extends J{constructor(e){super(),K(this,e,yi,Pi,Q,{invoiceActions:0,actionHandler:1,isSent:2,isRecurring:3})}}function Li(s){let e,t;return e=new _t({props:{class:"h-4 w-4 mr-3 text-green-600"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ai(s){let e,t;return e=new $e({props:{class:"h-4 w-4 mr-3 text-primary animate-spin"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ni(s){let e,t,n,i;const r=[Ai,Li],l=[];function a(o,f){return o[1]?0:1}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=T(`
    Download Invoice as PDF`)},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e!==u&&(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t||(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function Fe(s){let e,t;return e=new se({props:{disabled:s[2],variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start items-center text-xs",$$slots:{default:[Ri]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&4&&(r.disabled=n[2]),i&1028&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ei(s){let e,t;return e=new _t({props:{class:"h-4 w-4 mr-3 text-cyan-600"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ti(s){let e,t;return e=new $e({props:{class:"h-4 w-4 mr-3 text-primary animate-spin"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ri(s){let e,t,n,i;const r=[Ti,Ei],l=[];function a(o,f){return o[2]?0:1}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=T(`
      Download Receipt as PDF`)},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e!==u&&(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t||(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function Oi(s){let e,t,n;return e=new wn({props:{class:"h-4 w-4 mr-3 text-primary"}}),{c(){v(e.$$.fragment),t=T(`
      Print`)},m(i,r){h(e,i,r),b(i,t,r),n=!0},p:U,i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){i&&k(t),D(e,i)}}}function Mi(s){let e,t;return e=new Tn({props:{class:"h-4 w-4 mr-3 text-primary col-span-1"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ui(s){let e,t,n,i;return t=new st({props:{class:"h-4 w-4 mr-3 text-green-600 col-span-1"}}),{c(){e=L("div"),v(t.$$.fragment)},m(r,l){b(r,e,l),h(t,e,null),i=!0},i(r){i||(_(t.$$.fragment,r),r&&Le(()=>{i&&(n||(n=ge(e,Oe,{},!0)),n.run(1))}),i=!0)},o(r){p(t.$$.fragment,r),r&&(n||(n=ge(e,Oe,{},!1)),n.run(0)),i=!1},d(r){r&&k(e),D(t),r&&n&&n.end()}}}function Hi(s){let e,t,n,i,r;const l=[Ui,Mi],a=[];function o(f,u){return f[3]?0:1}return t=o(s),n=a[t]=l[t](s),{c(){e=L("div"),n.c(),i=T(`
      Copy link`),A(e,"class","grid grid-cols-1")},m(f,u){b(f,e,u),a[t].m(e,null),b(f,i,u),r=!0},p(f,u){let c=t;t=o(f),t!==c&&(z(),p(a[c],1,1,()=>{a[c]=null}),j(),n=a[t],n||(n=a[t]=l[t](f),n.c()),_(n,1),n.m(e,null))},i(f){r||(_(n),r=!0)},o(f){p(n),r=!1},d(f){f&&(k(e),k(i)),a[t].d()}}}function zi(s){let e,t,n,i,r,l,a,o,f;t=new se({props:{disabled:s[1],variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start items-center text-xs",$$slots:{default:[Ni]},$$scope:{ctx:s}}}),t.$on("click",s[4]);let u=s[0]===W.PAID&&Fe(s);return l=new se({props:{variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start text-xs",$$slots:{default:[Oi]},$$scope:{ctx:s}}}),l.$on("click",s[6]),o=new se({props:{variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start text-xs",$$slots:{default:[Hi]},$$scope:{ctx:s}}}),o.$on("click",s[7]),{c(){e=L("div"),v(t.$$.fragment),n=N(),u&&u.c(),i=N(),r=L("div"),v(l.$$.fragment),a=N(),v(o.$$.fragment),A(r,"class","flex gap-x-2"),A(e,"class","space-y-2")},m(c,g){b(c,e,g),h(t,e,null),C(e,n),u&&u.m(e,null),C(e,i),C(e,r),h(l,r,null),C(r,a),h(o,r,null),f=!0},p(c,[g]){const $={};g&2&&($.disabled=c[1]),g&1026&&($.$$scope={dirty:g,ctx:c}),t.$set($),c[0]===W.PAID?u?(u.p(c,g),g&1&&_(u,1)):(u=Fe(c),u.c(),_(u,1),u.m(e,i)):u&&(z(),p(u,1,1,()=>{u=null}),j());const y={};g&1024&&(y.$$scope={dirty:g,ctx:c}),l.$set(y);const d={};g&1032&&(d.$$scope={dirty:g,ctx:c}),o.$set(d)},i(c){f||(_(t.$$.fragment,c),_(u),_(l.$$.fragment,c),_(o.$$.fragment,c),f=!0)},o(c){p(t.$$.fragment,c),p(u),p(l.$$.fragment,c),p(o.$$.fragment,c),f=!1},d(c){c&&k(e),D(t),u&&u.d(),D(l),D(o)}}}function ji(s,e,t){let{token:n}=e,{publicLink:i}=e,{paymentStatus:r}=e,l=!1,a=!1,o=!1;const f=()=>{t(1,l=!0),Pe(`download/invoice?token=${n}`).then($=>{Me(atob($.data.content),`${$.data.filename}`,"application/pdf"),t(1,l=!1)})},u=()=>{t(2,a=!0),Pe(`download/receipt?token=${n}`).then($=>{Me(atob($.data.content),`${$.data.filename}`,"application/pdf"),t(2,a=!1)})},c=()=>{window.print()},g=()=>{navigator.clipboard.writeText(i),ce.success("Link copied to clipboard"),t(3,o=!0),setTimeout(()=>{t(3,o=!1)},2e3)};return s.$$set=$=>{"token"in $&&t(8,n=$.token),"publicLink"in $&&t(9,i=$.publicLink),"paymentStatus"in $&&t(0,r=$.paymentStatus)},[r,l,a,o,f,u,c,g,n,i]}class Vi extends J{constructor(e){super(),K(this,e,ji,zi,Q,{token:8,publicLink:9,paymentStatus:0})}}function Wi(s){let e,t,n,i,r;return{c(){e=L("div"),t=L("div"),t.textContent="Due:",n=N(),i=L("div"),r=T(s[0]),A(t,"class","font-medium"),A(i,"class","text-destructive font-bold"),A(e,"class","flex flex-col justify-center items-center")},m(l,a){b(l,e,a),C(e,t),C(e,n),C(e,i),C(i,r)},p(l,[a]){a&1&&X(r,l[0])},i:U,o:U,d(l){l&&k(e)}}}function Bi(s,e,t){let n,{dueDate:i}=e;return s.$$set=r=>{"dueDate"in r&&t(1,i=r.dueDate)},s.$$.update=()=>{s.$$.dirty&2&&t(0,n=Ie(i).from(Ie().subtract(1,"days")))},[n,i]}class Fi extends J{constructor(e){super(),K(this,e,Bi,Wi,Q,{dueDate:1})}}function Gi(s){let e,t,n;return{c(){e=L("div"),t=T(s[3]),A(e,"class",n="text-white font-bold px-2 rounded-md "+(s[2]===M.ACTIVE?"bg-green-600":s[2]===M.ARCHIVED?"bg-amber-400":"bg-destructive"))},m(i,r){b(i,e,r),C(e,t)},p(i,r){r&8&&X(t,i[3]),r&4&&n!==(n="text-white font-bold px-2 rounded-md "+(i[2]===M.ACTIVE?"bg-green-600":i[2]===M.ARCHIVED?"bg-amber-400":"bg-destructive"))&&A(e,"class",n)},d(i){i&&k(e)}}}function Xi(s){let e,t,n;return{c(){e=L("div"),t=T(s[4]),A(e,"class",n="text-white font-bold px-2 rounded-md "+(s[1]===W.PAID?"bg-green-600":"bg-destructive"))},m(i,r){b(i,e,r),C(e,t)},p(i,r){r&16&&X(t,i[4]),r&2&&n!==(n="text-white font-bold px-2 rounded-md "+(i[1]===W.PAID?"bg-green-600":"bg-destructive"))&&A(e,"class",n)},d(i){i&&k(e)}}}function Zi(s){let e,t,n;function i(a,o){return a[0]?Xi:Gi}let r=i(s),l=r(s);return{c(){e=L("div"),t=L("div"),t.textContent="Status:",n=N(),l.c(),A(t,"class","font-medium"),A(e,"class","flex flex-col justify-center items-center")},m(a,o){b(a,e,o),C(e,t),C(e,n),l.m(e,null)},p(a,[o]){r===(r=i(a))&&l?l.p(a,o):(l.d(1),l=r(a),l&&(l.c(),l.m(e,null)))},i:U,o:U,d(a){a&&k(e),l.d()}}}function qi(s,e,t){let n,i,{isPublic:r}=e,{paymentStatus:l}=e,{invoiceStatus:a}=e;return s.$$set=o=>{"isPublic"in o&&t(0,r=o.isPublic),"paymentStatus"in o&&t(1,l=o.paymentStatus),"invoiceStatus"in o&&t(2,a=o.invoiceStatus)},s.$$.update=()=>{s.$$.dirty&2&&t(4,n=Ue(l)),s.$$.dirty&4&&t(3,i=Ue(a))},[r,l,a,i,n]}class Yi extends J{constructor(e){super(),K(this,e,qi,Zi,Q,{isPublic:0,paymentStatus:1,invoiceStatus:2})}}function Ji(s){let e,t,n,i;return e=new at({props:{$$slots:{default:[sr]},$$scope:{ctx:s}}}),n=new ft({props:{$$slots:{default:[mr]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(r,l){h(e,r,l),b(r,t,l),h(n,r,l),i=!0},p(r,l){const a={};l&1049532&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const o={};l&1049186&&(o.$$scope={dirty:l,ctx:r}),n.$set(o)},i(r){i||(_(e.$$.fragment,r),_(n.$$.fragment,r),i=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),i=!1},d(r){r&&k(t),D(e,r),D(n,r)}}}function Ki(s){let e,t,n,i,r,l,a,o,f,u,c;e=new at({props:{$$slots:{default:[pr]},$$scope:{ctx:s}}});function g(d){s[13](d)}function $(d){s[14](d)}let y={};return s[10]!==void 0&&(y.payload=s[10]),s[11]!==void 0&&(y.dueDateInterval=s[11]),i=new bn({props:y}),ee.push(()=>te(i,"payload",g)),ee.push(()=>te(i,"dueDateInterval",$)),o=new ft({props:{class:"mt-5",$$slots:{default:[wr]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),n=L("form"),v(i.$$.fragment),a=N(),v(o.$$.fragment)},m(d,m){h(e,d,m),b(d,t,m),b(d,n,m),h(i,n,null),C(n,a),h(o,n,null),f=!0,u||(c=Et(n,"submit",Tt(s[15])),u=!0)},p(d,m){const S={};m&1048576&&(S.$$scope={dirty:m,ctx:d}),e.$set(S);const I={};!r&&m&1024&&(r=!0,I.payload=d[10],ne(()=>r=!1)),!l&&m&2048&&(l=!0,I.dueDateInterval=d[11],ne(()=>l=!1)),i.$set(I);const w={};m&1048578&&(w.$$scope={dirty:m,ctx:d}),o.$set(w)},i(d){f||(_(e.$$.fragment,d),_(i.$$.fragment,d),_(o.$$.fragment,d),f=!0)},o(d){p(e.$$.fragment,d),p(i.$$.fragment,d),p(o.$$.fragment,d),f=!1},d(d){d&&(k(t),k(n)),D(e,d),D(i),D(o),u=!1,c()}}}function Qi(s){let e;return{c(){e=T("Are you sure?")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function xi(s){let e;return{c(){e=T(`It will create new payment link if the previous one is unavailable or expired. The rest of invoice will be
              the same.`)},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function er(s){let e;return{c(){e=T("This action will also affect the corresponding receipt.")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function tr(s){let e;return{c(){e=T("This action will delete the receipt.")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function nr(s){let e;return{c(){e=T(`This will also create Receipt, set the order status in Woocommerce to COMPLETE and send receipt to
              customer's email`)},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ir(s){let e;return{c(){e=T("This action will create the receipt.")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function rr(s){var S;let e,t,n,i,r,l,a,o,f=((S=s[3])==null?void 0:S.name)+"",u,c,g,$;function y(I,w){if(I[5]===W.PAID&&!I[8])return ir;if(I[5]===W.PAID&&I[8])return nr;if(I[5]===W.UNPAID)return tr;if(I[4]===W.PAID&&(I[5]===M.ARCHIVED||I[5]===M.CANCELLED||I[5]===M.TRASHED||I[5]===M.ACTIVE))return er;if(I[5]===M.REGENERATE)return xi}let d=y(s),m=d&&d(s);return{c(){e=L("div"),t=T("Are you sure you want to "),n=L("span"),i=T(s[7]),r=T(`
            invoice `),l=L("span"),a=T(s[2]),o=N(),u=T(f),c=T("?"),g=N(),$=L("div"),m&&m.c(),A(n,"class","text-primary"),A(l,"class","text-primary"),A($,"class","text-xs")},m(I,w){b(I,e,w),C(e,t),C(e,n),C(n,i),C(e,r),C(e,l),C(l,a),C(l,o),C(l,u),C(l,c),b(I,g,w),b(I,$,w),m&&m.m($,null)},p(I,w){var R;w&128&&X(i,I[7]),w&4&&X(a,I[2]),w&8&&f!==(f=((R=I[3])==null?void 0:R.name)+"")&&X(u,f),d!==(d=y(I))&&(m&&m.d(1),m=d&&d(I),m&&(m.c(),m.m($,null)))},d(I){I&&(k(e),k(g),k($)),m&&m.d()}}}function Ge(s){let e,t,n,i,r,l;function a(f){s[16](f)}let o={id:"send-email"};return s[9]!==void 0&&(o.checked=s[9]),t=new Dn({props:o}),ee.push(()=>te(t,"checked",a)),r=new Cn({props:{for:"send-email",$$slots:{default:[lr]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),i=N(),v(r.$$.fragment),A(e,"class","flex flex-row flex-nowrap items-center gap-x-2 py-2")},m(f,u){b(f,e,u),h(t,e,null),C(e,i),h(r,e,null),l=!0},p(f,u){const c={};!n&&u&512&&(n=!0,c.checked=f[9],ne(()=>n=!1)),t.$set(c);const g={};u&1048576&&(g.$$scope={dirty:u,ctx:f}),r.$set(g)},i(f){l||(_(t.$$.fragment,f),_(r.$$.fragment,f),l=!0)},o(f){p(t.$$.fragment,f),p(r.$$.fragment,f),l=!1},d(f){f&&k(e),D(t),D(r)}}}function lr(s){let e;return{c(){e=T("Also send email to customer")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function sr(s){let e,t,n,i,r,l;e=new ct({props:{$$slots:{default:[Qi]},$$scope:{ctx:s}}}),n=new ut({props:{$$slots:{default:[rr]},$$scope:{ctx:s}}});let a=s[5]===W.PAID&&!s[8]&&Ge(s);return{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment),i=N(),a&&a.c(),r=re()},m(o,f){h(e,o,f),b(o,t,f),h(n,o,f),b(o,i,f),a&&a.m(o,f),b(o,r,f),l=!0},p(o,f){const u={};f&1048576&&(u.$$scope={dirty:f,ctx:o}),e.$set(u);const c={};f&1049020&&(c.$$scope={dirty:f,ctx:o}),n.$set(c),o[5]===W.PAID&&!o[8]?a?(a.p(o,f),f&288&&_(a,1)):(a=Ge(o),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(z(),p(a,1,1,()=>{a=null}),j())},i(o){l||(_(e.$$.fragment,o),_(n.$$.fragment,o),_(a),l=!0)},o(o){p(e.$$.fragment,o),p(n.$$.fragment,o),p(a),l=!1},d(o){o&&(k(t),k(i),k(r)),D(e,o),D(n,o),a&&a.d(o)}}}function or(s){let e;return{c(){e=T("Cancel")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ar(s){let e;return{c(){e=T(s[6])},m(t,n){b(t,e,n)},p(t,n){n&64&&X(e,t[6])},i:U,o:U,d(t){t&&k(e)}}}function fr(s){let e;return{c(){e=T("Yes")},m(t,n){b(t,e,n)},p:U,i:U,o:U,d(t){t&&k(e)}}}function cr(s){let e,t,n;return e=new $e({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){v(e.$$.fragment),t=T(`
            Saving`)},m(i,r){h(e,i,r),b(i,t,r),n=!0},p:U,i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){i&&k(t),D(e,i)}}}function ur(s){let e,t,n,i;const r=[cr,fr,ar],l=[];function a(o,f){return o[1]?0:o[5]===M.CANCELLED?1:2}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=re()},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?l[e].p(o,f):(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t?t.p(o,f):(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function mr(s){let e,t,n,i;return e=new mt({props:{$$slots:{default:[or]},$$scope:{ctx:s}}}),n=new se({props:{disabled:s[1],variant:s[5]===W.UNPAID||s[5]===M.CANCELLED||s[5]===M.TRASHED?"destructive":"default",$$slots:{default:[ur]},$$scope:{ctx:s}}}),n.$on("click",s[17]),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(r,l){h(e,r,l),b(r,t,l),h(n,r,l),i=!0},p(r,l){const a={};l&1048576&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const o={};l&2&&(o.disabled=r[1]),l&32&&(o.variant=r[5]===W.UNPAID||r[5]===M.CANCELLED||r[5]===M.TRASHED?"destructive":"default"),l&1048674&&(o.$$scope={dirty:l,ctx:r}),n.$set(o)},i(r){i||(_(e.$$.fragment,r),_(n.$$.fragment,r),i=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),i=!1},d(r){r&&k(t),D(e,r),D(n,r)}}}function _r(s){let e;return{c(){e=T("Recurring Details")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function dr(s){let e;return{c(){e=T("Input the recurring details")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function pr(s){let e,t,n,i;return e=new ct({props:{class:"my-0",$$slots:{default:[_r]},$$scope:{ctx:s}}}),n=new ut({props:{$$slots:{default:[dr]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(r,l){h(e,r,l),b(r,t,l),h(n,r,l),i=!0},p(r,l){const a={};l&1048576&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const o={};l&1048576&&(o.$$scope={dirty:l,ctx:r}),n.$set(o)},i(r){i||(_(e.$$.fragment,r),_(n.$$.fragment,r),i=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),i=!1},d(r){r&&k(t),D(e,r),D(n,r)}}}function gr(s){let e;return{c(){e=T("Cancel")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function $r(s){let e;return{c(){e=T("Save")},m(t,n){b(t,e,n)},i:U,o:U,d(t){t&&k(e)}}}function br(s){let e,t,n;return e=new $e({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){v(e.$$.fragment),t=T(`
              Saving`)},m(i,r){h(e,i,r),b(i,t,r),n=!0},i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){i&&k(t),D(e,i)}}}function kr(s){let e,t,n,i;const r=[br,$r],l=[];function a(o,f){return o[1]?0:1}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=re()},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e!==u&&(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t||(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function wr(s){let e,t,n,i;return e=new mt({props:{disabled:s[1],$$slots:{default:[gr]},$$scope:{ctx:s}}}),n=new se({props:{type:"submit",disabled:s[1],$$slots:{default:[kr]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(r,l){h(e,r,l),b(r,t,l),h(n,r,l),i=!0},p(r,l){const a={};l&2&&(a.disabled=r[1]),l&1048576&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const o={};l&2&&(o.disabled=r[1]),l&1048578&&(o.$$scope={dirty:l,ctx:r}),n.$set(o)},i(r){i||(_(e.$$.fragment,r),_(n.$$.fragment,r),i=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),i=!1},d(r){r&&k(t),D(e,r),D(n,r)}}}function vr(s){let e,t,n,i;const r=[Ki,Ji],l=[];function a(o,f){return o[5]===M.TO_RECURRING?0:1}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=re()},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?l[e].p(o,f):(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t?t.p(o,f):(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function hr(s){let e,t;return e=new hn({props:{$$slots:{default:[vr]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&1052670&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Dr(s){let e,t,n;function i(l){s[19](l)}let r={onOpenChange:s[18],$$slots:{default:[hr]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.open=s[0]),e=new vn({props:r}),ee.push(()=>te(e,"open",i)),{c(){v(e.$$.fragment)},m(l,a){h(e,l,a),n=!0},p(l,[a]){const o={};a&512&&(o.onOpenChange=l[18]),a&1052670&&(o.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,o.open=l[0],ne(()=>t=!1)),e.$set(o)},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){p(e.$$.fragment,l),n=!1},d(l){D(e,l)}}}function Cr(s,e,t){const n=Nt();let{isDialogOpen:i=!1}=e,{isLoading:r=!1}=e,{invoiceNumber:l}=e,{client:a}=e,{paymentStatus:o}=e,{actionStatus:f}=e,{actionMessage:u}=e,{actionMessageLowerCase:c}=e,{isWoocommerce:g}=e,$=!1,y,d;function m(P){y=P,t(10,y)}function S(P){d=P,t(11,d)}const I=()=>n("updateStatus",{recurring:y,dueDateInterval:d});function w(P){$=P,t(9,$)}const R=()=>n("updateStatus",{isSendEmail:$}),V=()=>t(9,$=!1);function O(P){i=P,t(0,i)}return s.$$set=P=>{"isDialogOpen"in P&&t(0,i=P.isDialogOpen),"isLoading"in P&&t(1,r=P.isLoading),"invoiceNumber"in P&&t(2,l=P.invoiceNumber),"client"in P&&t(3,a=P.client),"paymentStatus"in P&&t(4,o=P.paymentStatus),"actionStatus"in P&&t(5,f=P.actionStatus),"actionMessage"in P&&t(6,u=P.actionMessage),"actionMessageLowerCase"in P&&t(7,c=P.actionMessageLowerCase),"isWoocommerce"in P&&t(8,g=P.isWoocommerce)},[i,r,l,a,o,f,u,c,g,$,y,d,n,m,S,I,w,R,V,O]}class Sr extends J{constructor(e){super(),K(this,e,Cr,Dr,Q,{isDialogOpen:0,isLoading:1,invoiceNumber:2,client:3,paymentStatus:4,actionStatus:5,actionMessage:6,actionMessageLowerCase:7,isWoocommerce:8})}}function Pr(s){let e,t,n,i;return e=new xt({props:{class:"bg-accent flex flex-row items-center justify-around py-3",$$slots:{default:[Ir]},$$scope:{ctx:s}}}),n=new zt({props:{class:"space-y-4",$$slots:{default:[Lr]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(r,l){h(e,r,l),b(r,t,l),h(n,r,l),i=!0},p(r,l){const a={};l&1048600&&(a.$$scope={dirty:l,ctx:r}),e.$set(a);const o={};l&1049020&&(o.$$scope={dirty:l,ctx:r}),n.$set(o)},i(r){i||(_(e.$$.fragment,r),_(n.$$.fragment,r),i=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),i=!1},d(r){r&&k(t),D(e,r),D(n,r)}}}function yr(s){let e,t;return e=new Vt({props:{isPublic:s[3]}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&8&&(r.isPublic=n[3]),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Xe(s){let e,t;return e=new Fi({props:{dueDate:s[4].dueDate}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&16&&(r.dueDate=n[4].dueDate),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ir(s){let e,t,n,i;e=new Yi({props:{paymentStatus:s[4].paymentStatus,invoiceStatus:s[4].invoiceStatus,isPublic:s[3]}});let r=s[4].paymentStatus===W.UNPAID&&Xe(s);return{c(){v(e.$$.fragment),t=N(),r&&r.c(),n=re()},m(l,a){h(e,l,a),b(l,t,a),r&&r.m(l,a),b(l,n,a),i=!0},p(l,a){const o={};a&16&&(o.paymentStatus=l[4].paymentStatus),a&16&&(o.invoiceStatus=l[4].invoiceStatus),a&8&&(o.isPublic=l[3]),e.$set(o),l[4].paymentStatus===W.UNPAID?r?(r.p(l,a),a&16&&_(r,1)):(r=Xe(l),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(z(),p(r,1,1,()=>{r=null}),j())},i(l){i||(_(e.$$.fragment,l),_(r),i=!0)},o(l){p(e.$$.fragment,l),p(r),i=!1},d(l){l&&(k(t),k(n)),D(e,l),r&&r.d(l)}}}function Ze(s){let e,t;return e=new ln({}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function qe(s){let e,t;return e=new Ii({props:{invoiceActions:s[8],actionHandler:s[9],isRecurring:s[4].recurring,isSent:s[4].isSent}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&256&&(r.invoiceActions=n[8]),i&16&&(r.isRecurring=n[4].recurring),i&16&&(r.isSent=n[4].isSent),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ye(s){var n;let e,t;return e=new Wt({props:{internalNote:(n=s[4].invoiceNote)==null?void 0:n.internalNote}}),{c(){v(e.$$.fragment)},m(i,r){h(e,i,r),t=!0},p(i,r){var a;const l={};r&16&&(l.internalNote=(a=i[4].invoiceNote)==null?void 0:a.internalNote),e.$set(l)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function Je(s){let e,t;return e=new Bt({props:{email:s[4].user.email,name:s[4].user.name}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&16&&(r.email=n[4].user.email),i&16&&(r.name=n[4].user.name),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ke(s){let e,t;return e=new Ft({props:{reminder:s[4].reminders}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&16&&(r.reminder=n[4].reminders),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Qe(s){let e,t;return e=new Gt({props:{actionHistory:s[7]}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i&128&&(r.actionHistory=n[7]),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Lr(s){var I;let e,t,n,i,r,l,a,o,f;const u=[s[5]];let c={};for(let w=0;w<u.length;w+=1)c=ie(c,u[w]);e=new Vi({props:c});let g=!s[3]&&Ze(),$=!s[3]&&s[2]==="invoice"&&qe(s),y=!s[3]&&Ye(s),d=((I=s[4])==null?void 0:I.user)&&!s[3]&&Je(s),m=!s[3]&&s[2]==="invoice"&&Ke(s),S=!s[3]&&s[2]==="invoice"&&Qe(s);return{c(){v(e.$$.fragment),t=N(),g&&g.c(),n=N(),$&&$.c(),i=N(),y&&y.c(),r=N(),d&&d.c(),l=N(),m&&m.c(),a=N(),S&&S.c(),o=re()},m(w,R){h(e,w,R),b(w,t,R),g&&g.m(w,R),b(w,n,R),$&&$.m(w,R),b(w,i,R),y&&y.m(w,R),b(w,r,R),d&&d.m(w,R),b(w,l,R),m&&m.m(w,R),b(w,a,R),S&&S.m(w,R),b(w,o,R),f=!0},p(w,R){var O;const V=R&32?ue(u,[ke(w[5])]):{};e.$set(V),w[3]?g&&(z(),p(g,1,1,()=>{g=null}),j()):g?R&8&&_(g,1):(g=Ze(),g.c(),_(g,1),g.m(n.parentNode,n)),!w[3]&&w[2]==="invoice"?$?($.p(w,R),R&12&&_($,1)):($=qe(w),$.c(),_($,1),$.m(i.parentNode,i)):$&&(z(),p($,1,1,()=>{$=null}),j()),w[3]?y&&(z(),p(y,1,1,()=>{y=null}),j()):y?(y.p(w,R),R&8&&_(y,1)):(y=Ye(w),y.c(),_(y,1),y.m(r.parentNode,r)),(O=w[4])!=null&&O.user&&!w[3]?d?(d.p(w,R),R&24&&_(d,1)):(d=Je(w),d.c(),_(d,1),d.m(l.parentNode,l)):d&&(z(),p(d,1,1,()=>{d=null}),j()),!w[3]&&w[2]==="invoice"?m?(m.p(w,R),R&12&&_(m,1)):(m=Ke(w),m.c(),_(m,1),m.m(a.parentNode,a)):m&&(z(),p(m,1,1,()=>{m=null}),j()),!w[3]&&w[2]==="invoice"?S?(S.p(w,R),R&12&&_(S,1)):(S=Qe(w),S.c(),_(S,1),S.m(o.parentNode,o)):S&&(z(),p(S,1,1,()=>{S=null}),j())},i(w){f||(_(e.$$.fragment,w),_(g),_($),_(y),_(d),_(m),_(S),f=!0)},o(w){p(e.$$.fragment,w),p(g),p($),p(y),p(d),p(m),p(S),f=!1},d(w){w&&(k(t),k(n),k(i),k(r),k(l),k(a),k(o)),D(e,w),g&&g.d(w),$&&$.d(w),y&&y.d(w),d&&d.d(w),m&&m.d(w),S&&S.d(w)}}}function Ar(s){let e,t,n,i;const r=[yr,Pr],l=[];function a(o,f){return o[4]?1:0}return e=a(s),t=l[e]=r[e](s),{c(){t.c(),n=re()},m(o,f){l[e].m(o,f),b(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?l[e].p(o,f):(z(),p(l[u],1,1,()=>{l[u]=null}),j(),t=l[e],t?t.p(o,f):(t=l[e]=r[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),l[e].d(o)}}}function Nr(s){let e,t,n,i,r,l;const a=[s[6]];function o(c){s[17](c)}function f(c){s[18](c)}let u={};for(let c=0;c<a.length;c+=1)u=ie(u,a[c]);return s[1]!==void 0&&(u.isDialogOpen=s[1]),s[0]!==void 0&&(u.isLoading=s[0]),e=new Sr({props:u}),ee.push(()=>te(e,"isDialogOpen",o)),ee.push(()=>te(e,"isLoading",f)),e.$on("updateStatus",s[19]),r=new Ht({props:{class:"sticky top-16 h-fit rounded-md w-[800px] xl:w-80 space-y-4 print:hidden",$$slots:{default:[Ar]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),i=N(),v(r.$$.fragment)},m(c,g){h(e,c,g),b(c,i,g),h(r,c,g),l=!0},p(c,[g]){const $=g&64?ue(a,[ke(c[6])]):{};!t&&g&2&&(t=!0,$.isDialogOpen=c[1],ne(()=>t=!1)),!n&&g&1&&(n=!0,$.isLoading=c[0],ne(()=>n=!1)),e.$set($);const y={};g&1049020&&(y.$$scope={dirty:g,ctx:c}),r.$set(y)},i(c){l||(_(e.$$.fragment,c),_(r.$$.fragment,c),l=!0)},o(c){p(e.$$.fragment,c),p(r.$$.fragment,c),l=!1},d(c){c&&k(i),D(e,c),D(r,c)}}}function Er(s,e,t){let n,i,r,l,{token:a}=e,{page:o}=e,{publicLink:f}=e,{isPublic:u}=e,{invoice:c}=e,{isLoading:g}=e,{isDialogOpen:$}=e,{actionMessage:y}=e,{actionMessageLowerCase:d}=e,{actionStatus:m}=e,{selectedStatusType:S}=e,{isWoocommerce:I}=e;const w=({label:P,status:F})=>{if(F===M.EDIT){window.location.href=`#/invoice/edit/${a}`;return}t(1,$=!0),t(10,y=P),t(11,d=P.toLowerCase()),t(12,m=F);const Z=F===W.PAID||F===W.UNPAID;t(13,S=Z?"paymentStatus":"invoiceStatus")};function R(P){$=P,t(1,$)}function V(P){g=P,t(0,g)}function O(P){Rt.call(this,s,P)}return s.$$set=P=>{"token"in P&&t(14,a=P.token),"page"in P&&t(2,o=P.page),"publicLink"in P&&t(15,f=P.publicLink),"isPublic"in P&&t(3,u=P.isPublic),"invoice"in P&&t(4,c=P.invoice),"isLoading"in P&&t(0,g=P.isLoading),"isDialogOpen"in P&&t(1,$=P.isDialogOpen),"actionMessage"in P&&t(10,y=P.actionMessage),"actionMessageLowerCase"in P&&t(11,d=P.actionMessageLowerCase),"actionStatus"in P&&t(12,m=P.actionStatus),"selectedStatusType"in P&&t(13,S=P.selectedStatusType),"isWoocommerce"in P&&t(16,I=P.isWoocommerce)},s.$$.update=()=>{s.$$.dirty&16&&t(8,n=sn(c==null?void 0:c.tab)),s.$$.dirty&16&&t(7,i=(c==null?void 0:c.actionHistory)??[]),s.$$.dirty&72720&&t(6,r={actionMessageLowerCase:d,actionMessage:y,actionStatus:m,paymentStatus:c==null?void 0:c.paymentStatus,invoiceNumber:c==null?void 0:c.invoiceNumber,client:c==null?void 0:c.client,isWoocommerce:I}),s.$$.dirty&32784&&t(5,l={id:c==null?void 0:c.id,token:c==null?void 0:c.token,publicLink:f,paymentStatus:c==null?void 0:c.paymentStatus})},[g,$,o,u,c,l,r,i,n,w,y,d,m,S,a,f,I,R,V,O]}class Tr extends J{constructor(e){super(),K(this,e,Er,Nr,Q,{token:14,page:2,publicLink:15,isPublic:3,invoice:4,isLoading:0,isDialogOpen:1,actionMessage:10,actionMessageLowerCase:11,actionStatus:12,selectedStatusType:13,isWoocommerce:16})}}function Rr(s){let e;return{c(){e=T("RECEIPT")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function Or(s){let e;return{c(){e=T("INVOICE")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function Mr(s){let e;function t(r,l){if(r[1]==="invoice"||r[2])return Or;if(r[1]==="receipt")return Rr}let n=t(s),i=n&&n(s);return{c(){i&&i.c(),e=re()},m(r,l){i&&i.m(r,l),b(r,e,l)},p(r,l){n!==(n=t(r))&&(i&&i.d(1),i=n&&n(r),i&&(i.c(),i.m(e.parentNode,e)))},d(r){r&&k(e),i&&i.d(r)}}}function Ur(s){var o,f;let e,t=((o=s[0])==null?void 0:o.receiptNumber)+"",n,i,r,l=((f=s[0])==null?void 0:f.invoiceNumber)+"",a;return{c(){e=L("div"),n=T(t),i=N(),r=L("div"),a=T(l),A(e,"class","text-lg font-semibold"),A(r,"class","text-sm font-medium")},m(u,c){b(u,e,c),C(e,n),b(u,i,c),b(u,r,c),C(r,a)},p(u,c){var g,$;c&1&&t!==(t=((g=u[0])==null?void 0:g.receiptNumber)+"")&&X(n,t),c&1&&l!==(l=(($=u[0])==null?void 0:$.invoiceNumber)+"")&&X(a,l)},d(u){u&&(k(e),k(i),k(r))}}}function Hr(s){var i;let e,t=((i=s[0])==null?void 0:i.invoiceNumber)+"",n;return{c(){e=L("div"),n=T(t),A(e,"class","text-xl font-semibold")},m(r,l){b(r,e,l),C(e,n)},p(r,l){var a;l&1&&t!==(t=((a=r[0])==null?void 0:a.invoiceNumber)+"")&&X(n,t)},d(r){r&&k(e)}}}function xe(s){let e,t,n=s[0].isWoocommerce+"",i;return{c(){e=L("div"),t=T("From Woocommerce #"),i=T(n),A(e,"class","text-xs text-muted-foreground italic")},m(r,l){b(r,e,l),C(e,t),C(e,i)},p(r,l){l&1&&n!==(n=r[0].isWoocommerce+"")&&X(i,n)},d(r){r&&k(e)}}}function zr(s){let e,t,n,i,r,l;n=new en({props:{slot:"title",class:"sm:text-[32px] text-[24px] font-bold mb-2",$$slots:{default:[Mr]},$$scope:{ctx:s}}});function a(c,g){if(c[1]==="invoice"||c[2])return Hr;if(c[1]==="receipt")return Ur}let o=a(s),f=o&&o(s),u=s[0].isWoocommerce&&xe(s);return{c(){e=L("div"),t=L("div"),v(n.$$.fragment),i=N(),f&&f.c(),r=N(),u&&u.c(),A(t,"class","flex flex-col items-end"),A(e,"class","flex items-center gap-12")},m(c,g){b(c,e,g),C(e,t),h(n,t,null),C(t,i),f&&f.m(t,null),C(t,r),u&&u.m(t,null),l=!0},p(c,[g]){const $={};g&14&&($.$$scope={dirty:g,ctx:c}),n.$set($),o===(o=a(c))&&f?f.p(c,g):(f&&f.d(1),f=o&&o(c),f&&(f.c(),f.m(t,r))),c[0].isWoocommerce?u?u.p(c,g):(u=xe(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i(c){l||(_(n.$$.fragment,c),l=!0)},o(c){p(n.$$.fragment,c),l=!1},d(c){c&&k(e),D(n),f&&f.d(),u&&u.d()}}}function jr(s,e,t){let{invoice:n}=e,{page:i}=e,{isPublic:r}=e;return s.$$set=l=>{"invoice"in l&&t(0,n=l.invoice),"page"in l&&t(1,i=l.page),"isPublic"in l&&t(2,r=l.isPublic)},[n,i,r]}class Vr extends J{constructor(e){super(),K(this,e,jr,zr,Q,{invoice:0,page:1,isPublic:2})}}function et(s){let e;return{c(){e=L("div"),e.textContent="Paid on"},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function tt(s){let e;return{c(){e=L("div"),e.textContent=":"},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function nt(s){let e,t=(s[4]?s[5](s[4]):"-")+"",n;return{c(){e=L("div"),n=T(t)},m(i,r){b(i,e,r),C(e,n)},p(i,r){r&16&&t!==(t=(i[4]?i[5](i[4]):"-")+"")&&X(n,t)},d(i){i&&k(e)}}}function Wr(s){let e,t,n,i,r,l,a,o,f,u,c,g,$,y,d,m,S,I,w,R=(s[1]?s[5](s[1]):"-")+"",V,O,P,F=(s[2]?s[5](s[2]):"-")+"",Z,me,_e,de=(s[3]?s[5](s[3]):"-")+"",be,we,q=s[0]&&et(),Y=s[0]&&tt(),B=s[0]&&nt(s);return{c(){e=L("div"),t=L("div"),n=L("div"),n.textContent="Order date",i=N(),r=L("div"),r.textContent="Invoice date",l=N(),a=L("div"),a.textContent="Due date",o=N(),q&&q.c(),f=N(),u=L("div"),c=L("div"),c.textContent=":",g=N(),$=L("div"),$.textContent=":",y=N(),d=L("div"),d.textContent=":",m=N(),Y&&Y.c(),S=N(),I=L("div"),w=L("div"),V=T(R),O=N(),P=L("div"),Z=T(F),me=N(),_e=L("div"),be=T(de),we=N(),B&&B.c(),A(t,"class","w-32 font-medium space-y-1"),A(u,"class","w-10 flex flex-col flex-nowrap items-center space-y-1"),A(I,"class","flex flex-col flex-nowrap items-end w-32 space-y-1"),A(e,"class","flex flex-row flex-nowrap")},m(G,oe){b(G,e,oe),C(e,t),C(t,n),C(t,i),C(t,r),C(t,l),C(t,a),C(t,o),q&&q.m(t,null),C(e,f),C(e,u),C(u,c),C(u,g),C(u,$),C(u,y),C(u,d),C(u,m),Y&&Y.m(u,null),C(e,S),C(e,I),C(I,w),C(w,V),C(I,O),C(I,P),C(P,Z),C(I,me),C(I,_e),C(_e,be),C(I,we),B&&B.m(I,null)},p(G,[oe]){G[0]?q||(q=et(),q.c(),q.m(t,null)):q&&(q.d(1),q=null),G[0]?Y||(Y=tt(),Y.c(),Y.m(u,null)):Y&&(Y.d(1),Y=null),oe&2&&R!==(R=(G[1]?G[5](G[1]):"-")+"")&&X(V,R),oe&4&&F!==(F=(G[2]?G[5](G[2]):"-")+"")&&X(Z,F),oe&8&&de!==(de=(G[3]?G[5](G[3]):"-")+"")&&X(be,de),G[0]?B?B.p(G,oe):(B=nt(G),B.c(),B.m(I,null)):B&&(B.d(1),B=null)},i:U,o:U,d(G){G&&k(e),q&&q.d(),Y&&Y.d(),B&&B.d()}}}function Br(s,e,t){let{isPaid:n}=e,{orderDate:i}=e,{invoiceDate:r}=e,{dueDate:l}=e,{paidDate:a}=e;const o=f=>Ie(f).format(invoize.date_format);return s.$$set=f=>{"isPaid"in f&&t(0,n=f.isPaid),"orderDate"in f&&t(1,i=f.orderDate),"invoiceDate"in f&&t(2,r=f.invoiceDate),"dueDate"in f&&t(3,l=f.dueDate),"paidDate"in f&&t(4,a=f.paidDate)},[n,i,r,l,a,o]}class Fr extends J{constructor(e){super(),K(this,e,Br,Wr,Q,{isPaid:0,orderDate:1,invoiceDate:2,dueDate:3,paidDate:4})}}function it(s){let e,t,n;return t=new qt({props:{to:s[18]}}),{c(){e=L("div"),v(t.$$.fragment),A(e,"class","print:hidden")},m(i,r){b(i,e,r),h(t,e,null),n=!0},p(i,r){const l={};r[0]&262144&&(l.to=i[18]),t.$set(l)},i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&k(e),D(t)}}}function Gr(s){let e,t,n,i,r,l,a,o,f,u,c;const g=[Yr,qr],$=[];function y(O,P){return O[1]?1:0}t=y(s),n=$[t]=g[t](s);const d=[s[16]];function m(O){s[24](O)}function S(O){s[25](O)}function I(O){s[26](O)}function w(O){s[27](O)}function R(O){s[28](O)}let V={};for(let O=0;O<d.length;O+=1)V=ie(V,d[O]);return s[6]!==void 0&&(V.isDialogOpen=s[6]),s[7]!==void 0&&(V.actionMessage=s[7]),s[8]!==void 0&&(V.actionMessageLowerCase=s[8]),s[9]!==void 0&&(V.actionStatus=s[9]),s[10]!==void 0&&(V.selectedStatusType=s[10]),r=new Tr({props:V}),ee.push(()=>te(r,"isDialogOpen",m)),ee.push(()=>te(r,"actionMessage",S)),ee.push(()=>te(r,"actionMessageLowerCase",I)),ee.push(()=>te(r,"actionStatus",w)),ee.push(()=>te(r,"selectedStatusType",R)),r.$on("updateStatus",s[19]),{c(){e=L("div"),n.c(),i=N(),v(r.$$.fragment),A(e,"class","flex flex-wrap xl:flex-nowrap justify-center xl:justify-center gap-8 mt-8 print:gap-0"),A(e,"id","invoice-content-wrap")},m(O,P){b(O,e,P),$[t].m(e,null),C(e,i),h(r,e,null),c=!0},p(O,P){let F=t;t=y(O),t===F?$[t].p(O,P):(z(),p($[F],1,1,()=>{$[F]=null}),j(),n=$[t],n?n.p(O,P):(n=$[t]=g[t](O),n.c()),_(n,1),n.m(e,i));const Z=P[0]&65536?ue(d,[ke(O[16])]):{};!l&&P[0]&64&&(l=!0,Z.isDialogOpen=O[6],ne(()=>l=!1)),!a&&P[0]&128&&(a=!0,Z.actionMessage=O[7],ne(()=>a=!1)),!o&&P[0]&256&&(o=!0,Z.actionMessageLowerCase=O[8],ne(()=>o=!1)),!f&&P[0]&512&&(f=!0,Z.actionStatus=O[9],ne(()=>f=!1)),!u&&P[0]&1024&&(u=!0,Z.selectedStatusType=O[10],ne(()=>u=!1)),r.$set(Z)},i(O){c||(_(n),_(r.$$.fragment,O),c=!0)},o(O){p(n),p(r.$$.fragment,O),c=!1},d(O){O&&k(e),$[t].d(),D(r)}}}function Xr(s){var n;let e,t;return e=new Wn({props:{tab:(n=s[1])==null?void 0:n.tab}}),{c(){v(e.$$.fragment)},m(i,r){h(e,i,r),t=!0},p(i,r){var a;const l={};r[0]&2&&(l.tab=(a=i[1])==null?void 0:a.tab),e.$set(l)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function Zr(s){let e,t;return e=new Xn({}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function qr(s){let e,t;const n=[s[17]];let i={$$slots:{date:[Kr],"header-title":[Jr]},$$scope:{ctx:s}};for(let r=0;r<n.length;r+=1)i=ie(i,n[r]);return e=new Xt({props:i}),{c(){v(e.$$.fragment)},m(r,l){h(e,r,l),t=!0},p(r,l){const a=l[0]&131072?ue(n,[ke(r[17])]):{};l[0]&23|l[1]&16384&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){p(e.$$.fragment,r),t=!1},d(r){D(e,r)}}}function Yr(s){let e,t;return e=new Zt({}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Jr(s){let e,t;return e=new Vr({props:{invoice:s[1],page:s[0],isPublic:s[2]}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i[0]&2&&(r.invoice=n[1]),i[0]&1&&(r.page=n[0]),i[0]&4&&(r.isPublic=n[2]),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Kr(s){let e,t;return e=new Fr({props:{isPaid:s[4],paidDate:s[1].paidDate,orderDate:s[1].orderDate,invoiceDate:s[1].invoiceDate,dueDate:s[1].dueDate}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const r={};i[0]&16&&(r.isPaid=n[4]),i[0]&2&&(r.paidDate=n[1].paidDate),i[0]&2&&(r.orderDate=n[1].orderDate),i[0]&2&&(r.invoiceDate=n[1].invoiceDate),i[0]&2&&(r.dueDate=n[1].dueDate),e.$set(r)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Qr(s){var d;let e,t,n,i,r,l,a,o;function f(m){s[23](m)}let u={invoiceId:(d=s[1])==null?void 0:d.invoiceNumber,isPaymentSuccess:s[11],isCapturingPayment:s[14],isUpdatingPaymentStatus:s[15],publicLink:s[3],isInvoicePaymentStatusUpdated:s[12]};s[13]!==void 0&&(u.isOpen=s[13]),e=new ai({props:u}),ee.push(()=>te(e,"isOpen",f));let c=!s[2]&&it(s);const g=[Zr,Xr,Gr],$=[];function y(m,S){var I,w,R;return m[2]&&(!m[5]||((I=m[1])==null?void 0:I.tab)===M.TRASHED)?0:m[2]&&(((w=m[1])==null?void 0:w.tab)===M.EXPIRED||((R=m[1])==null?void 0:R.tab)===M.CANCELLED)?1:2}return r=y(s),l=$[r]=g[r](s),{c(){v(e.$$.fragment),n=N(),c&&c.c(),i=N(),l.c(),a=re()},m(m,S){h(e,m,S),b(m,n,S),c&&c.m(m,S),b(m,i,S),$[r].m(m,S),b(m,a,S),o=!0},p(m,S){var R;const I={};S[0]&2&&(I.invoiceId=(R=m[1])==null?void 0:R.invoiceNumber),S[0]&2048&&(I.isPaymentSuccess=m[11]),S[0]&16384&&(I.isCapturingPayment=m[14]),S[0]&32768&&(I.isUpdatingPaymentStatus=m[15]),S[0]&8&&(I.publicLink=m[3]),S[0]&4096&&(I.isInvoicePaymentStatusUpdated=m[12]),!t&&S[0]&8192&&(t=!0,I.isOpen=m[13],ne(()=>t=!1)),e.$set(I),m[2]?c&&(z(),p(c,1,1,()=>{c=null}),j()):c?(c.p(m,S),S[0]&4&&_(c,1)):(c=it(m),c.c(),_(c,1),c.m(i.parentNode,i));let w=r;r=y(m),r===w?$[r].p(m,S):(z(),p($[w],1,1,()=>{$[w]=null}),j(),l=$[r],l?l.p(m,S):(l=$[r]=g[r](m),l.c()),_(l,1),l.m(a.parentNode,a))},i(m){o||(_(e.$$.fragment,m),_(c),_(l),o=!0)},o(m){p(e.$$.fragment,m),p(c),p(l),o=!1},d(m){m&&(k(n),k(i),k(a)),D(e,m),c&&c.d(m),$[r].d(m)}}}function xr(s,e,t){let n,i,r,l,a,o;Ee(s,Re,E=>t(29,a=E)),Ee(s,jt,E=>t(30,o=E));let{params:f={}}=e,u,c,g,$=!1,y=!0,d=!1,m=!1,S,I,w,R,V="",O=!1,P=!1,F=!1,Z=!1,me=!1;const _e=()=>{var x;(x=c==null?void 0:c.recurring)!=null&&x.value;let E,H;R==="paymentStatus"?(E=W.PAID,H=W.UNPAID):(E=c==null?void 0:c.tab,H=w===M.ACTIVE?c==null?void 0:c.paymentStatus:w===M.DUPLICATE?Ut.UNPAID.LOWER_CASE:w),o&&console.log({tab1:E,tab2:H}),he(E,H)},de=E=>{var x;if(d)return;if(w===M.REGENERATE){be();return}if(w===M.DUPLICATE){we();return}if(w===M.SEND){q();return}if(w===M.TO_RECURRING){Y(E.detail);return}t(22,d=!0);const H={id:c==null?void 0:c.id,[R]:w,email:(x=E==null?void 0:E.detail)==null?void 0:x.isSendEmail};ce.promise(fe("invoice/update",H),{loading:"Updating...",success:()=>(_e(),t(22,d=!1),t(6,m=!1),t(1,c=null),B(),"Status updated successfully"),error:ve=>(t(22,d=!1),t(6,m=!1),ae(ve,"Failed to update",!1))})},be=()=>{t(22,d=!0),ce.promise(fe("invoice/regenerate",{id:c.id}),{loading:"Regenerating invoice...",success:()=>(t(22,d=!1),t(6,m=!1),he(c.tab),B(),"Invoice regenerated successfully"),error:E=>(t(22,d=!1),t(6,m=!1),ae(E,"Failed to regenerate invoice",!1))})},we=()=>{t(22,d=!0),ce.promise(fe("invoice/duplicate",{id:c.id}),{loading:"Duplicating...",success:()=>(t(22,d=!1),t(6,m=!1),_e(),"Invoice duplicated successfully"),error:E=>(t(22,d=!1),t(6,m=!1),ae(E,"Failed to duplicate invoice",!1))})},q=()=>{t(22,d=!0);const E={id:c.id,status:c==null?void 0:c.paymentStatus};ce.promise(fe("invoice/send-mail",E),{loading:"Sending invoice...",success:()=>(t(22,d=!1),t(6,m=!1),he(c.tab),B(),"Invoice sent successfully"),error:H=>{var x,ve;return t(22,d=!1),t(6,m=!1),ae(H,(ve=(x=H.message.response)==null?void 0:x.data)==null?void 0:ve.message,!1)}})},Y=E=>{t(22,d=!0);const H={token:g,dueDateInterval:E.dueDateInterval,recurring:E.recurring};ce.promise(fe("invoice/to-recurring",H),{loading:"Updating invoice to recurring...",success:()=>(t(22,d=!1),t(6,m=!1),he(c.tab),B(),"Invoice successfully updated into recurring"),error:x=>(t(22,d=!1),t(6,m=!1),ae(x,"Failed to update invoice to recurring",!1,!0))})},B=async E=>{let H;if($?H=`invoice/detail?invoizeToken=${g}`:u==="invoice"?H=`invoice/detail?invoizeToken=${g}`:u==="receipt"&&(H=`receipt/detail?invoizeToken=${g}`),!H){ce.error("API not found");return}try{const x=await Pe(H);t(1,c=x.data),E&&E(),o&&!$&&console.log(c)}catch(x){t(5,y=!1),ae(x,"Failed to get invoice detail")}},G=async()=>{try{t(15,me=!0),await fe("invoice/update",{id:c.id,paymentStatus:W.PAID}),t(12,P=!0)}catch(E){t(12,P=!1),ae(E,"Failed to update invoice payment status")}finally{t(13,F=!0),t(15,me=!1)}},oe=()=>{t(3,V=`${invoize.base_url}/invoize-preview/${g}`)},dt=()=>{window.location.href.includes(invoize.base_url+"/invoize-preview")&&t(2,$=!0)},pt=()=>{const E=location.href.split("/"),H=E[E.length-2];t(0,u=H==="invoice"?"invoice":H==="receipt"?"receipt":null),B()},gt=()=>{const H=new URLSearchParams(window.location.search).get("token");H&&c.paymentStatus===W.UNPAID&&$t(H)},$t=async E=>{try{t(13,F=!0),t(14,Z=!0),await fe("paypal/capture",{token:E,invoiceId:c.id}),t(11,O=!0),G()}catch(H){t(11,O=!1),ae(H)}finally{t(13,F=!0),t(14,Z=!1)}},bt=()=>{if($){const H=window.location.pathname.split("/");t(21,g=H.pop()||H.pop())}else t(21,g=f==null?void 0:f.invoizeToken)};Ot(()=>{dt(),bt(),oe(),$?B(gt):pt(),Pe("settings/get?key=payment.enablePaymentPage").then(E=>{Mt(Re,a=E.data.value,a)})});function kt(E){F=E,t(13,F)}function wt(E){m=E,t(6,m)}function vt(E){S=E,t(7,S)}function ht(E){I=E,t(8,I)}function Dt(E){w=E,t(9,w)}function Ct(E){R=E,t(10,R)}return s.$$set=E=>{"params"in E&&t(20,f=E.params)},s.$$.update=()=>{var E;s.$$.dirty[0]&1&&t(18,n=u==="invoice"?[{name:"Invoice",link:"invoices"},{name:"Detail",link:"invoice/1"}]:u==="receipt"?[{name:"Receipt",link:"receipts"},{name:"Detail",link:"receipt/1"}]:[]),s.$$.dirty[0]&2&&t(4,i=(c==null?void 0:c.paymentStatus)==="paid"),s.$$.dirty[0]&31&&t(17,r={isPaid:i,invoice:c,publicLink:V,isRecurring:c==null?void 0:c.recurring,note:u==="invoice"||$?c==null?void 0:c.invoiceNote:u==="receipt"?{terms:c==null?void 0:c.receiptTerms,note:(E=c==null?void 0:c.invoiceNote)==null?void 0:E.note}:null}),s.$$.dirty[0]&6291471&&t(16,l={token:g,page:u,publicLink:V,isPublic:$,invoice:c,isLoading:d,isWoocommerce:(c==null?void 0:c.isWoocommerce)??!1})},[u,c,$,V,i,y,m,S,I,w,R,O,P,F,Z,me,l,r,n,de,f,g,d,kt,wt,vt,ht,Dt,Ct]}class Yl extends J{constructor(e){super(),K(this,e,xr,Qr,Q,{params:20},null,[-1,-1])}}export{Yl as default};
