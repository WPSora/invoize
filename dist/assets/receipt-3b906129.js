import{S as ce,i as de,s as $e,c as $,m as _,j as c,t as d,l as b,X as O,O as _e,a as k,f as x,k as w,q as be,p as ge,Z as T,P as ve,a4 as Y,a5 as Z,B as xe,e as q,d as I,g as v,C as we,aa as he,a6 as z,x as L,n as Ce,o as Fe,h as Se,u as oe,L as Ne}from"./Toaster.svelte_svelte_type_style_lang-89e761ff.js";import{C as ke,T as le,U as D,V as J,H as K,a as Ae,h as ie}from"./errorHelper-39e9d1d7.js";import{C as Te}from"./card-description-236c99a6.js";import{a as qe,C as Ie}from"./index-99d0c2fd.js";import{r as Le}from"./styles-e7e55f44.js";import{T as Pe}from"./MiniStar-8026f138.js";import{L as Q}from"./label-e50396f8.js";import{I as ue}from"./input-ab223ce3.js";import"./options-1651b5d0.js";import"./updater-00e9e1bb.js";import"./x-416feb5b.js";import"./create-9e47477b.js";function Re(n){let e;return{c(){e=L("General")},m(t,s){x(t,e,s)},d(t){t&&w(e)}}}function je(n){let e;return{c(){e=L("Manage receipt general settings.")},m(t,s){x(t,e,s)},d(t){t&&w(e)}}}function Be(n){let e,t,s,a;return e=new Ie({props:{class:"md:text-lg text-base border-l-2 border-primary pl-2",$$slots:{default:[Re]},$$scope:{ctx:n}}}),s=new Te({props:{class:"ml-3 md:text-sm text-xs",$$slots:{default:[je]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),t=k(),$(s.$$.fragment)},m(r,u){_(e,r,u),x(r,t,u),_(s,r,u),a=!0},p(r,u){const f={};u&32768&&(f.$$scope={dirty:u,ctx:r}),e.$set(f);const o={};u&32768&&(o.$$scope={dirty:u,ctx:r}),s.$set(o)},i(r){a||(c(e.$$.fragment,r),c(s.$$.fragment,r),a=!0)},o(r){d(e.$$.fragment,r),d(s.$$.fragment,r),a=!1},d(r){r&&w(t),b(e,r),b(s,r)}}}function Ge(n){let e;return{c(){e=L("Prefix")},m(t,s){x(t,e,s)},d(t){t&&w(e)}}}function Me(n){let e;return{c(){e=L("Start From Number")},m(t,s){x(t,e,s)},d(t){t&&w(e)}}}function Oe(n){let e;return{c(){e=L("Terms & Conditions")},m(t,s){x(t,e,s)},d(t){t&&w(e)}}}function Ee(n){let e;return{c(){e=L("Save Changes")},m(t,s){x(t,e,s)},i:oe,o:oe,d(t){t&&w(e)}}}function He(n){let e,t,s;return e=new Ne({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){$(e.$$.fragment),t=L(`
            Saving`)},m(a,r){_(e,a,r),x(a,t,r),s=!0},i(a){s||(c(e.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),s=!1},d(a){a&&w(t),b(e,a)}}}function Ue(n){let e,t,s,a;const r=[He,Ee],u=[];function f(o,h){return o[0]?0:1}return e=f(n),t=u[e]=r[e](n),{c(){t.c(),s=Ce()},m(o,h){u[e].m(o,h),x(o,s,h),a=!0},p(o,h){let g=e;e=f(o),e!==g&&(Fe(),d(u[g],1,1,()=>{u[g]=null}),Se(),t=u[e],t||(t=u[e]=r[e](o),t.c()),c(t,1),t.m(s.parentNode,s))},i(o){a||(c(t),a=!0)},o(o){d(t),a=!1},d(o){o&&w(s),u[e].d(o)}}}function Ve(n){let e,t,s,a,r,u,f,o,h,g,F,R,C,j,B,S,N,l,m,P,W,G,A,M,E,y;r=new Q({props:{for:"prefix",class:"md:text-sm text-xs",$$slots:{default:[Ge]},$$scope:{ctx:n}}});function fe(i){n[3](i)}let ee={type:"text",id:"prefix",class:"md:text-sm text-xs",disabled:n[0]};n[1].prefix!==void 0&&(ee.value=n[1].prefix),f=new ue({props:ee}),Y.push(()=>Z(f,"value",fe)),F=new Q({props:{for:"startFromNumber",class:"md:text-sm text-xs",$$slots:{default:[Me]},$$scope:{ctx:n}}});function me(i){n[4](i)}let te={type:"number",id:"startFromNumber",class:Le+" md:text-sm text-xs",disabled:n[0]};n[1].startFromNumber!==void 0&&(te.value=n[1].startFromNumber),C=new ue({props:te}),Y.push(()=>Z(C,"value",me)),N=new Q({props:{class:"cursor-default md:text-sm text-xs",$$slots:{default:[Oe]},$$scope:{ctx:n}}});function pe(i){n[5](i)}let se={id:"note",disabled:n[0],placeholder:"Your terms & conditions here",class:"w-full md:h-32 h-60 p-4 md:text-sm text-xs"};return n[1].termsAndConditions!==void 0&&(se.value=n[1].termsAndConditions),m=new Pe({props:se}),Y.push(()=>Z(m,"value",pe)),A=new xe({props:{disabled:n[0],class:"sm:w-fit w-full",$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){e=q("form"),t=q("div"),s=q("div"),a=q("div"),$(r.$$.fragment),u=k(),$(f.$$.fragment),h=k(),g=q("div"),$(F.$$.fragment),R=k(),$(C.$$.fragment),B=k(),S=q("div"),$(N.$$.fragment),l=k(),$(m.$$.fragment),W=k(),G=q("div"),$(A.$$.fragment),I(a,"class","w-full"),I(g,"class","w-full"),I(s,"class","w-full md:w-1/2 space-y-8"),I(S,"class","w-full md:w-1/2"),I(t,"class","flex md:flex-row flex-col justify-between gap-10"),I(G,"class","mt-5"),I(e,"class","space-y-10")},m(i,p){x(i,e,p),v(e,t),v(t,s),v(s,a),_(r,a,null),v(a,u),_(f,a,null),v(s,h),v(s,g),_(F,g,null),v(g,R),_(C,g,null),v(t,B),v(t,S),_(N,S,null),v(S,l),_(m,S,null),v(e,W),v(e,G),_(A,G,null),M=!0,E||(y=we(e,"submit",he(n[6])),E=!0)},p(i,p){const re={};p&32768&&(re.$$scope={dirty:p,ctx:i}),r.$set(re);const H={};p&1&&(H.disabled=i[0]),!o&&p&2&&(o=!0,H.value=i[1].prefix,z(()=>o=!1)),f.$set(H);const ne={};p&32768&&(ne.$$scope={dirty:p,ctx:i}),F.$set(ne);const U={};p&1&&(U.disabled=i[0]),!j&&p&2&&(j=!0,U.value=i[1].startFromNumber,z(()=>j=!1)),C.$set(U);const ae={};p&32768&&(ae.$$scope={dirty:p,ctx:i}),N.$set(ae);const V={};p&1&&(V.disabled=i[0]),!P&&p&2&&(P=!0,V.value=i[1].termsAndConditions,z(()=>P=!1)),m.$set(V);const X={};p&1&&(X.disabled=i[0]),p&32769&&(X.$$scope={dirty:p,ctx:i}),A.$set(X)},i(i){M||(c(r.$$.fragment,i),c(f.$$.fragment,i),c(F.$$.fragment,i),c(C.$$.fragment,i),c(N.$$.fragment,i),c(m.$$.fragment,i),c(A.$$.fragment,i),M=!0)},o(i){d(r.$$.fragment,i),d(f.$$.fragment,i),d(F.$$.fragment,i),d(C.$$.fragment,i),d(N.$$.fragment,i),d(m.$$.fragment,i),d(A.$$.fragment,i),M=!1},d(i){i&&w(e),b(r),b(f),b(F),b(C),b(N),b(m),b(A),E=!1,y()}}}function Xe(n){let e,t,s,a;return e=new qe({props:{class:"space-y-0.5 md:p-6 px-0",$$slots:{default:[Be]},$$scope:{ctx:n}}}),s=new Ae({props:{class:"md:px-6 md:pb-6 p-0",$$slots:{default:[Ve]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment),t=k(),$(s.$$.fragment)},m(r,u){_(e,r,u),x(r,t,u),_(s,r,u),a=!0},p(r,u){const f={};u&32768&&(f.$$scope={dirty:u,ctx:r}),e.$set(f);const o={};u&32771&&(o.$$scope={dirty:u,ctx:r}),s.$set(o)},i(r){a||(c(e.$$.fragment,r),c(s.$$.fragment,r),a=!0)},o(r){d(e.$$.fragment,r),d(s.$$.fragment,r),a=!1},d(r){r&&w(t),b(e,r),b(s,r)}}}function Ye(n){let e,t;return e=new ke({props:{class:"p-4",$$slots:{default:[Xe]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(s,a){_(e,s,a),t=!0},p(s,[a]){const r={};a&32771&&(r.$$scope={dirty:a,ctx:s}),e.$set(r)},i(s){t||(c(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function Ze(n,e,t){let s,a,r,u;O(n,le,l=>t(7,s=l)),O(n,D,l=>t(8,a=l)),O(n,J,l=>t(9,r=l)),O(n,K,l=>t(10,u=l));let f=!1,o={prefix:"#",termsAndConditions:"",startFromNumber:1};const h=()=>{f||(t(0,f=!0),be.promise(ge("settings/update?tab=receipt",o),{loading:"Saving...",success:()=>(g(o),t(0,f=!1),"Setting Saved"),error:l=>(t(0,f=!1),ie(l,"Failed to save settings"))}))},g=l=>{T(J,r=(l==null?void 0:l.prefix)??"",r),T(K,u=(l==null?void 0:l.startFromNumber)??1,u),T(D,a=(l==null?void 0:l.termsAndConditions)??"",a)},F=l=>{const m={};l.map(P=>{m[P.name]=P.value}),T(J,r=(m==null?void 0:m.prefix)??"",r),T(K,u=(m==null?void 0:m.startFromNumber)??1,u),T(D,a=(m==null?void 0:m.termsAndConditions)??"",a),R()},R=()=>{t(1,o.startFromNumber=u,o),t(1,o.prefix=r,o),t(1,o.termsAndConditions=a,o)},C=async()=>{try{const l=await ve("settings/retrieve?tab=receipt");F(l.data.data),T(le,s=!0,s)}catch(l){ie(l,"Failed to retrieve settings data.")}};_e(()=>{!s&&C(),R()});function j(l){n.$$.not_equal(o.prefix,l)&&(o.prefix=l,t(1,o))}function B(l){n.$$.not_equal(o.startFromNumber,l)&&(o.startFromNumber=l,t(1,o))}function S(l){n.$$.not_equal(o.termsAndConditions,l)&&(o.termsAndConditions=l,t(1,o))}return[f,o,h,j,B,S,()=>h()]}class at extends ce{constructor(e){super(),de(this,e,Ze,Ye,$e,{})}}export{at as default};
