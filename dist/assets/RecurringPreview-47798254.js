import{S as ie,i as re,s as se,a4 as ee,a5 as te,c as E,m as M,a6 as ne,j as _,t as p,l as A,Y as Pe,a as R,f as D,k as S,B as de,x as j,e as C,n as me,d as y,g as d,Q as H,o as J,h as K,u as T,L as Re,v as we,w as Te,P as ge,E as ye,F as je,G as Ne,X as he,O as ze,q as Ie,p as Ce,Z as Oe}from"./Toaster.svelte_svelte_type_style_lang-89e761ff.js";import{h as ue,C as He,e as Le,i as Be,a as Fe}from"./errorHelper-39e9d1d7.js";import{a as qe}from"./index-99d0c2fd.js";import{f as X}from"./enum-9d62bdc6.js";import{a as Ve}from"./actionHelper-40ee3d39.js";import{R as Ge,A as Qe,a as Ue,b as Xe,c as Ye,d as Ze,e as Je}from"./index-181f90bd.js";import{C as Ke}from"./checkbox-ac399b75.js";import{L as We}from"./label-e50396f8.js";import{B as xe}from"./Breadcrumb-87f5fc70.js";import{H as et}from"./header-title-695fb230.js";import{B as tt,L as nt,a as it,I as rt,C as st,R as ot,A as at}from"./action-history-0128e979.js";import{p as De}from"./pluralHelper-a32d0151.js";import{c as oe}from"./capitalHelper-77c0a756.js";import{h as Z}from"./moment-a9aaa855.js";import"./updater-00e9e1bb.js";import"./options-1651b5d0.js";import"./x-416feb5b.js";import"./Check-a4797a61.js";import"./create-9e47477b.js";import"./ProBadge-06425ff7.js";import"./card-footer-08d9ee18.js";import"./table-row-f15328e9.js";import"./separator-95c0d010.js";import"./MultilineText-89cdd008.js";import"./decimalFormatter-88348579.js";import"./woocommerce-516f13b0.js";import"./_commonjsHelpers-725317a4.js";import"./index-88943f30.js";import"./arrays-9d05857f.js";function lt(s){let e;return{c(){e=j("Are you sure?")},m(t,n){D(t,e,n)},d(t){t&&S(e)}}}function Se(s){let e,t,n,r,i,o;function l(u){s[8](u)}let a={id:"send-email"};return s[1]!==void 0&&(a.checked=s[1]),t=new Ke({props:a}),ee.push(()=>te(t,"checked",l)),i=new We({props:{for:"send-email",$$slots:{default:[ct]},$$scope:{ctx:s}}}),{c(){e=C("div"),E(t.$$.fragment),r=R(),E(i.$$.fragment),y(e,"class","flex flex-row flex-nowrap items-center gap-x-2 py-2")},m(u,f){D(u,e,f),M(t,e,null),d(e,r),M(i,e,null),o=!0},p(u,f){const g={};!n&&f&2&&(n=!0,g.checked=u[1],ne(()=>n=!1)),t.$set(g);const v={};f&2048&&(v.$$scope={dirty:f,ctx:u}),i.$set(v)},i(u){o||(_(t.$$.fragment,u),_(i.$$.fragment,u),o=!0)},o(u){p(t.$$.fragment,u),p(i.$$.fragment,u),o=!1},d(u){u&&S(e),A(t),A(i)}}}function ct(s){let e;return{c(){e=j("Send invoice to customer's email")},m(t,n){D(t,e,n)},d(t){t&&S(e)}}}function ft(s){var w,b;let e,t,n,r,i,o,l=((b=(w=s[3])==null?void 0:w.client)==null?void 0:b.name)+"",a,u,f,g,v,m=s[4]===X.CREATE&&Se(s);return{c(){e=C("div"),t=j("Are you sure you want to "),n=C("span"),r=j(s[2]),i=j(`
          invoice `),o=C("span"),a=j(l),u=j("?"),f=R(),m&&m.c(),g=me(),y(n,"class","text-primary"),y(o,"class","text-primary")},m(k,I){D(k,e,I),d(e,t),d(e,n),d(n,r),d(e,i),d(e,o),d(o,a),d(o,u),D(k,f,I),m&&m.m(k,I),D(k,g,I),v=!0},p(k,I){var h,N;(!v||I&4)&&H(r,k[2]),(!v||I&8)&&l!==(l=((N=(h=k[3])==null?void 0:h.client)==null?void 0:N.name)+"")&&H(a,l),k[4]===X.CREATE?m?(m.p(k,I),I&16&&_(m,1)):(m=Se(k),m.c(),_(m,1),m.m(g.parentNode,g)):m&&(J(),p(m,1,1,()=>{m=null}),K())},i(k){v||(_(m),v=!0)},o(k){p(m),v=!1},d(k){k&&(S(e),S(f),S(g)),m&&m.d(k)}}}function ut(s){let e,t,n,r;return e=new Ye({props:{$$slots:{default:[lt]},$$scope:{ctx:s}}}),n=new Ze({props:{class:"space-y-2",$$slots:{default:[ft]},$$scope:{ctx:s}}}),{c(){E(e.$$.fragment),t=R(),E(n.$$.fragment)},m(i,o){M(e,i,o),D(i,t,o),M(n,i,o),r=!0},p(i,o){const l={};o&2048&&(l.$$scope={dirty:o,ctx:i}),e.$set(l);const a={};o&2078&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){p(e.$$.fragment,i),p(n.$$.fragment,i),r=!1},d(i){i&&S(t),A(e,i),A(n,i)}}}function dt(s){let e;return{c(){e=j("Cancel")},m(t,n){D(t,e,n)},d(t){t&&S(e)}}}function mt(s){let e;return{c(){e=j(s[5])},m(t,n){D(t,e,n)},p(t,n){n&32&&H(e,t[5])},i:T,o:T,d(t){t&&S(e)}}}function _t(s){let e,t,n;return e=new Re({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){E(e.$$.fragment),t=j(`
          Saving`)},m(r,i){M(e,r,i),D(r,t,i),n=!0},p:T,i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),n=!1},d(r){r&&S(t),A(e,r)}}}function pt(s){let e,t,n,r;const i=[_t,mt],o=[];function l(a,u){return a[6]?0:1}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),n=me()},m(a,u){o[e].m(a,u),D(a,n,u),r=!0},p(a,u){let f=e;e=l(a),e===f?o[e].p(a,u):(J(),p(o[f],1,1,()=>{o[f]=null}),K(),t=o[e],t?t.p(a,u):(t=o[e]=i[e](a),t.c()),_(t,1),t.m(n.parentNode,n))},i(a){r||(_(t),r=!0)},o(a){p(t),r=!1},d(a){a&&S(n),o[e].d(a)}}}function gt(s){let e,t,n,r;return e=new Je({props:{$$slots:{default:[dt]},$$scope:{ctx:s}}}),n=new de({props:{variant:s[4]===X.ACTIVE||s[4]===X.CREATE?"default":"destructive",disabled:s[6],$$slots:{default:[pt]},$$scope:{ctx:s}}}),n.$on("click",s[9]),{c(){E(e.$$.fragment),t=R(),E(n.$$.fragment)},m(i,o){M(e,i,o),D(i,t,o),M(n,i,o),r=!0},p(i,o){const l={};o&2048&&(l.$$scope={dirty:o,ctx:i}),e.$set(l);const a={};o&16&&(a.variant=i[4]===X.ACTIVE||i[4]===X.CREATE?"default":"destructive"),o&64&&(a.disabled=i[6]),o&2144&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){p(e.$$.fragment,i),p(n.$$.fragment,i),r=!1},d(i){i&&S(t),A(e,i),A(n,i)}}}function $t(s){let e,t,n,r;return e=new Ue({props:{$$slots:{default:[ut]},$$scope:{ctx:s}}}),n=new Xe({props:{$$slots:{default:[gt]},$$scope:{ctx:s}}}),{c(){E(e.$$.fragment),t=R(),E(n.$$.fragment)},m(i,o){M(e,i,o),D(i,t,o),M(n,i,o),r=!0},p(i,o){const l={};o&2078&&(l.$$scope={dirty:o,ctx:i}),e.$set(l);const a={};o&2160&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){p(e.$$.fragment,i),p(n.$$.fragment,i),r=!1},d(i){i&&S(t),A(e,i),A(n,i)}}}function vt(s){let e,t;return e=new Qe({props:{$$slots:{default:[$t]},$$scope:{ctx:s}}}),{c(){E(e.$$.fragment)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&2174&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function bt(s){let e,t,n;function r(o){s[10](o)}let i={$$slots:{default:[vt]},$$scope:{ctx:s}};return s[0]!==void 0&&(i.open=s[0]),e=new Ge({props:i}),ee.push(()=>te(e,"open",r)),{c(){E(e.$$.fragment)},m(o,l){M(e,o,l),n=!0},p(o,[l]){const a={};l&2174&&(a.$$scope={dirty:l,ctx:o}),!t&&l&1&&(t=!0,a.open=o[0],ne(()=>t=!1)),e.$set(a)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){p(e.$$.fragment,o),n=!1},d(o){A(e,o)}}}function kt(s,e,t){const n=Pe();let{isDialogOpen:r=!1}=e,{actionMessageLowerCase:i}=e,{recurring:o}=e,{actionStatus:l}=e,{actionMessage:a}=e,{isLoading:u}=e,{isSendEmail:f}=e;function g(w){f=w,t(1,f)}const v=()=>n("updateStatus");function m(w){r=w,t(0,r)}return s.$$set=w=>{"isDialogOpen"in w&&t(0,r=w.isDialogOpen),"actionMessageLowerCase"in w&&t(2,i=w.actionMessageLowerCase),"recurring"in w&&t(3,o=w.recurring),"actionStatus"in w&&t(4,l=w.actionStatus),"actionMessage"in w&&t(5,a=w.actionMessage),"isLoading"in w&&t(6,u=w.isLoading),"isSendEmail"in w&&t(1,f=w.isSendEmail)},[r,f,i,o,l,a,u,n,g,v,m]}class wt extends ie{constructor(e){super(),re(this,e,kt,bt,se,{isDialogOpen:0,actionMessageLowerCase:2,recurring:3,actionStatus:4,actionMessage:5,isLoading:6,isSendEmail:1})}}function ht(s){let e,t,n,r,i,o,l,a=De(`${s[0]} day`)+"",u;return{c(){e=C("div"),t=C("div"),t.innerHTML="<div>Due date</div>",n=R(),r=C("div"),r.innerHTML="<div>:</div>",i=R(),o=C("div"),l=C("div"),u=j(a),y(t,"class","w-32 font-medium space-y-1"),y(r,"class","w-10 flex flex-col flex-nowrap items-center space-y-1"),y(o,"class","flex flex-col flex-nowrap items-end w-32 space-y-1"),y(e,"class","flex flex-row flex-nowrap")},m(f,g){D(f,e,g),d(e,t),d(e,n),d(e,r),d(e,i),d(e,o),d(o,l),d(l,u)},p(f,[g]){g&1&&a!==(a=De(`${f[0]} day`)+"")&&H(u,a)},i:T,o:T,d(f){f&&S(e)}}}function It(s,e,t){let{dueDateInterval:n}=e;return s.$$set=r=>{"dueDateInterval"in r&&t(0,n=r.dueDateInterval)},[n]}class Ct extends ie{constructor(e){super(),re(this,e,It,ht,se,{dueDateInterval:0})}}function Lt(s){let e,t,n,r,i=oe(s[0])+"",o,l;return{c(){e=C("div"),t=C("div"),t.textContent="Status:",n=R(),r=C("div"),o=j(i),y(t,"class","font-medium"),y(r,"class",l="text-white font-bold px-2 rounded-md "+(s[0]===X.ACTIVE?"bg-green-600":"bg-destructive")),y(e,"class","flex flex-col justify-center items-center")},m(a,u){D(a,e,u),d(e,t),d(e,n),d(e,r),d(r,o)},p(a,[u]){u&1&&i!==(i=oe(a[0])+"")&&H(o,i),u&1&&l!==(l="text-white font-bold px-2 rounded-md "+(a[0]===X.ACTIVE?"bg-green-600":"bg-destructive"))&&y(r,"class",l)},i:T,o:T,d(a){a&&S(e)}}}function Dt(s,e,t){let{status:n}=e;return s.$$set=r=>{"status"in r&&t(0,n=r.status)},[n]}class St extends ie{constructor(e){super(),re(this,e,Dt,Lt,se,{status:0})}}function Et(s){let e,t,n,r,i=Z(s[0]).format(invoize.date_format)+"",o;return{c(){e=C("div"),t=C("div"),t.textContent="Next Invoice:",n=R(),r=C("div"),o=j(i),y(t,"class","font-medium"),y(r,"class","text-primary font-bold"),y(e,"class","flex flex-col justify-center items-center")},m(l,a){D(l,e,a),d(e,t),d(e,n),d(e,r),d(r,o)},p(l,[a]){a&1&&i!==(i=Z(l[0]).format(invoize.date_format)+"")&&H(o,i)},i:T,o:T,d(l){l&&S(e)}}}function Mt(s,e,t){let{nextInvoiceDate:n}=e;return s.$$set=r=>{"nextInvoiceDate"in r&&t(0,n=r.nextInvoiceDate)},[n]}class At extends ie{constructor(e){super(),re(this,e,Mt,Et,se,{nextInvoiceDate:0})}}function Rt(s){let e;return{c(){e=C("div"),e.textContent="-"},m(t,n){D(t,e,n)},p:T,i:T,o:T,d(t){t&&S(e)}}}function yt(s){let e,t;return e=new de({props:{variant:"link",class:"p-0 h-fit",$$slots:{default:[jt]},$$scope:{ctx:s}}}),e.$on("click",s[1]),{c(){E(e.$$.fragment)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&5&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function jt(s){let e=s[0].lastInvoice.name+"",t;return{c(){t=j(e)},m(n,r){D(n,t,r)},p(n,r){r&1&&e!==(e=n[0].lastInvoice.name+"")&&H(t,e)},d(n){n&&S(t)}}}function Nt(s){let e,t,n=s[0].name+"",r,i,o,l,a,u,f=Z(s[0].start).format(invoize.date_format)+"",g,v,m,w,b,k,I=(s[0].end==="never"?oe(s[0].end):s[0].end)+"",h,N,c,$,z,O,F=oe(s[0].interval)+"",B,W,V,ae,fe,le,L=Z(s[0].nextInvoiceDate).format(invoize.date_format)+"",ce,$e,x,_e,ve,q,G,U;const be=[yt,Rt],Y=[];function ke(P,Q){return P[0].lastInvoice?0:1}return q=ke(s),G=Y[q]=be[q](s),{c(){e=C("div"),t=C("div"),r=j(n),i=R(),o=C("div"),l=C("div"),l.textContent="Start",a=R(),u=C("div"),g=j(f),v=R(),m=C("div"),w=C("div"),w.textContent="End",b=R(),k=C("div"),h=j(I),N=R(),c=C("div"),$=C("div"),$.textContent="Schedule",z=R(),O=C("div"),B=j(F),W=R(),V=C("div"),ae=C("div"),ae.textContent="Next Invoice",fe=R(),le=C("div"),ce=j(L),$e=R(),x=C("div"),_e=C("div"),_e.textContent="Last Invoice",ve=R(),G.c(),y(t,"class","font-semibold text-sm"),y(o,"class","flex items-center justify-between"),y(m,"class","flex items-center justify-between"),y(O,"class","text-wrap w-8/12 text-right"),y(c,"class","flex items-center justify-between"),y(V,"class","flex items-center justify-between"),y(x,"class","flex items-center justify-between"),y(e,"class","text-xs border bg-muted rounded-md p-3 space-y-2")},m(P,Q){D(P,e,Q),d(e,t),d(t,r),d(e,i),d(e,o),d(o,l),d(o,a),d(o,u),d(u,g),d(e,v),d(e,m),d(m,w),d(m,b),d(m,k),d(k,h),d(e,N),d(e,c),d(c,$),d(c,z),d(c,O),d(O,B),d(e,W),d(e,V),d(V,ae),d(V,fe),d(V,le),d(le,ce),d(e,$e),d(e,x),d(x,_e),d(x,ve),Y[q].m(x,null),U=!0},p(P,[Q]){(!U||Q&1)&&n!==(n=P[0].name+"")&&H(r,n),(!U||Q&1)&&f!==(f=Z(P[0].start).format(invoize.date_format)+"")&&H(g,f),(!U||Q&1)&&I!==(I=(P[0].end==="never"?oe(P[0].end):P[0].end)+"")&&H(h,I),(!U||Q&1)&&F!==(F=oe(P[0].interval)+"")&&H(B,F),(!U||Q&1)&&L!==(L=Z(P[0].nextInvoiceDate).format(invoize.date_format)+"")&&H(ce,L);let pe=q;q=ke(P),q===pe?Y[q].p(P,Q):(J(),p(Y[pe],1,1,()=>{Y[pe]=null}),K(),G=Y[q],G?G.p(P,Q):(G=Y[q]=be[q](P),G.c()),_(G,1),G.m(x,null))},i(P){U||(_(G),U=!0)},o(P){p(G),U=!1},d(P){P&&S(e),Y[q].d()}}}function Pt(s,e,t){let{recurring:n}=e;const r=()=>location.href=`#/invoice/${n.lastInvoice.token}`;return s.$$set=i=>{"recurring"in i&&t(0,n=i.recurring)},[n,r]}class Tt extends ie{constructor(e){super(),re(this,e,Pt,Nt,se,{recurring:0})}}function Ee(s,e,t){const n=s.slice();return n[7]=e[t],n}function Me(s){let e,t,n,r,i,o,l,a,u=we(s[0]),f=[];for(let b=0;b<u.length;b+=1)f[b]=Ae(Ee(s,u,b));const g=b=>p(f[b],1,1,()=>{f[b]=null}),v=[Ht,Ot],m=[];function w(b,k){return b[1]&&b[2]?0:b[1]&&!b[2]?1:-1}return~(o=w(s))&&(l=m[o]=v[o](s)),{c(){e=C("div"),t=C("div"),t.textContent="Invoice Created",n=R(),r=C("div");for(let b=0;b<f.length;b+=1)f[b].c();i=R(),l&&l.c(),y(t,"class","font-medium"),y(r,"class","max-h-28 overflow-y-auto"),y(e,"class","space-y-2")},m(b,k){D(b,e,k),d(e,t),d(e,n),d(e,r);for(let I=0;I<f.length;I+=1)f[I]&&f[I].m(r,null);d(r,i),~o&&m[o].m(r,null),a=!0},p(b,k){if(k&1){u=we(b[0]);let h;for(h=0;h<u.length;h+=1){const N=Ee(b,u,h);f[h]?(f[h].p(N,k),_(f[h],1)):(f[h]=Ae(N),f[h].c(),_(f[h],1),f[h].m(r,i))}for(J(),h=u.length;h<f.length;h+=1)g(h);K()}let I=o;o=w(b),o===I?~o&&m[o].p(b,k):(l&&(J(),p(m[I],1,1,()=>{m[I]=null}),K()),~o?(l=m[o],l?l.p(b,k):(l=m[o]=v[o](b),l.c()),_(l,1),l.m(r,null)):l=null)},i(b){if(!a){for(let k=0;k<u.length;k+=1)_(f[k]);_(l),a=!0}},o(b){f=f.filter(Boolean);for(let k=0;k<f.length;k+=1)p(f[k]);p(l),a=!1},d(b){b&&S(e),Te(f,b),~o&&m[o].d()}}}function zt(s){let e=s[7].name+"",t;return{c(){t=j(e)},m(n,r){D(n,t,r)},p(n,r){r&1&&e!==(e=n[7].name+"")&&H(t,e)},d(n){n&&S(t)}}}function Ae(s){let e,t,n,r,i=Z(s[7].invoiceDate).format(invoize.date_format)+"",o,l;function a(){return s[6](s[7])}return t=new de({props:{variant:"link",class:"text-xs h-fit py-1 pl-2",$$slots:{default:[zt]},$$scope:{ctx:s}}}),t.$on("click",a),{c(){e=C("div"),E(t.$$.fragment),n=R(),r=C("div"),o=j(i),y(e,"class","flex justify-between items-center text-xs")},m(u,f){D(u,e,f),M(t,e,null),d(e,n),d(e,r),d(r,o),l=!0},p(u,f){s=u;const g={};f&1025&&(g.$$scope={dirty:f,ctx:s}),t.$set(g),(!l||f&1)&&i!==(i=Z(s[7].invoiceDate).format(invoize.date_format)+"")&&H(o,i)},i(u){l||(_(t.$$.fragment,u),l=!0)},o(u){p(t.$$.fragment,u),l=!1},d(u){u&&S(e),A(t)}}}function Ot(s){let e,t;return e=new de({props:{variant:"link",class:"w-full py-0 text-xs",$$slots:{default:[Bt]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){E(e.$$.fragment)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r&1024&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ht(s){let e,t,n,r;return t=new Re({props:{class:"w-4 h-4 animate-spin text-primary mr-1"}}),{c(){e=C("div"),E(t.$$.fragment),n=j(`
          Loading`),y(e,"class","w-full flex justify-center items-center text-xs text-muted-foreground")},m(i,o){D(i,e,o),M(t,e,null),d(e,n),r=!0},p:T,i(i){r||(_(t.$$.fragment,i),r=!0)},o(i){p(t.$$.fragment,i),r=!1},d(i){i&&S(e),A(t)}}}function Bt(s){let e;return{c(){e=j("Load more")},m(t,n){D(t,e,n)},d(t){t&&S(e)}}}function Ft(s){let e,t,n=s[0].length>0&&Me(s);return{c(){n&&n.c(),e=me()},m(r,i){n&&n.m(r,i),D(r,e,i),t=!0},p(r,[i]){r[0].length>0?n?(n.p(r,i),i&1&&_(n,1)):(n=Me(r),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(J(),p(n,1,1,()=>{n=null}),K())},i(r){t||(_(n),t=!0)},o(r){p(n),t=!1},d(r){r&&S(e),n&&n.d(r)}}}function qt(s,e,t){let{createdInvoices:n}=e,{invoiceList:r}=e,{hasMoreInvoice:i}=e,{token:o}=e,l=!1;const a=async()=>{try{t(2,l=!0);const f=await ge(`recurring/invoice-list?token=${o}&page=${n.page+1}`),{items:g,page:v,total_pages:m}=f.data;t(4,n=g),t(0,r=[...r,...g]),t(1,i=v<m),t(2,l=!1)}catch(f){t(2,l=!1),ue(f,"Failed to load more invoices")}},u=f=>location.href=`#/invoice/${f.token}`;return s.$$set=f=>{"createdInvoices"in f&&t(4,n=f.createdInvoices),"invoiceList"in f&&t(0,r=f.invoiceList),"hasMoreInvoice"in f&&t(1,i=f.hasMoreInvoice),"token"in f&&t(5,o=f.token)},[r,i,l,a,n,o,u]}class Vt extends ie{constructor(e){super(),re(this,e,qt,Ft,se,{createdInvoices:4,invoiceList:0,hasMoreInvoice:1,token:5})}}function Gt(s){let e,t;const n=[s[9]];let r={$$slots:{date:[Xt],"header-title":[Ut]},$$scope:{ctx:s}};for(let i=0;i<n.length;i+=1)r=ye(r,n[i]);return e=new tt({props:r}),{c(){E(e.$$.fragment)},m(i,o){M(e,i,o),t=!0},p(i,o){const l=o[0]&512?je(n,[Ne(i[9])]):{};o[0]&2|o[1]&1&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){A(e,i)}}}function Qt(s){let e,t;return e=new nt({}),{c(){E(e.$$.fragment)},m(n,r){M(e,n,r),t=!0},p:T,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Ut(s){let e,t;return e=new et({}),{c(){E(e.$$.fragment)},m(n,r){M(e,n,r),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Xt(s){let e,t;return e=new Ct({props:{dueDateInterval:s[1].dueDateInterval}}),{c(){E(e.$$.fragment)},m(n,r){M(e,n,r),t=!0},p(n,r){const i={};r[0]&2&&(i.dueDateInterval=n[1].dueDateInterval),e.$set(i)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Yt(s){let e,t,n,r;return e=new qe({props:{class:"bg-accent flex flex-row items-center justify-around",$$slots:{default:[Jt]},$$scope:{ctx:s}}}),n=new Fe({props:{class:"space-y-4",$$slots:{default:[Kt]},$$scope:{ctx:s}}}),{c(){E(e.$$.fragment),t=R(),E(n.$$.fragment)},m(i,o){M(e,i,o),D(i,t,o),M(n,i,o),r=!0},p(i,o){const l={};o[0]&4|o[1]&1&&(l.$$scope={dirty:o,ctx:i}),e.$set(l);const a={};o[0]&127|o[1]&1&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){p(e.$$.fragment,i),p(n.$$.fragment,i),r=!1},d(i){i&&S(t),A(e,i),A(n,i)}}}function Zt(s){let e,t;return e=new it({}),{c(){E(e.$$.fragment)},m(n,r){M(e,n,r),t=!0},p:T,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){A(e,n)}}}function Jt(s){let e,t,n,r;return e=new St({props:{status:s[2].status}}),n=new At({props:{nextInvoiceDate:s[2].nextInvoiceDate}}),{c(){E(e.$$.fragment),t=R(),E(n.$$.fragment)},m(i,o){M(e,i,o),D(i,t,o),M(n,i,o),r=!0},p(i,o){const l={};o[0]&4&&(l.status=i[2].status),e.$set(l);const a={};o[0]&4&&(a.nextInvoiceDate=i[2].nextInvoiceDate),n.$set(a)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){p(e.$$.fragment,i),p(n.$$.fragment,i),r=!1},d(i){i&&S(t),A(e,i),A(n,i)}}}function Kt(s){let e,t,n,r,i,o,l,a,u,f,g,v,m,w,b;e=new rt({props:{internalNote:s[1].invoiceNote.internalNote}}),n=new st({props:{name:s[5].name,email:s[5].email}}),i=new Tt({props:{recurring:s[2]}});function k(c){s[19](c)}function I(c){s[20](c)}function h(c){s[21](c)}let N={token:s[0].invoizeToken};return s[2].createdInvoices!==void 0&&(N.createdInvoices=s[2].createdInvoices),s[3]!==void 0&&(N.invoiceList=s[3]),s[4]!==void 0&&(N.hasMoreInvoice=s[4]),l=new Vt({props:N}),ee.push(()=>te(l,"createdInvoices",k)),ee.push(()=>te(l,"invoiceList",I)),ee.push(()=>te(l,"hasMoreInvoice",h)),v=new ot({props:{reminder:s[1].reminders}}),w=new at({props:{actionHistory:s[6]}}),{c(){E(e.$$.fragment),t=R(),E(n.$$.fragment),r=R(),E(i.$$.fragment),o=R(),E(l.$$.fragment),g=R(),E(v.$$.fragment),m=R(),E(w.$$.fragment)},m(c,$){M(e,c,$),D(c,t,$),M(n,c,$),D(c,r,$),M(i,c,$),D(c,o,$),M(l,c,$),D(c,g,$),M(v,c,$),D(c,m,$),M(w,c,$),b=!0},p(c,$){const z={};$[0]&2&&(z.internalNote=c[1].invoiceNote.internalNote),e.$set(z);const O={};$[0]&32&&(O.name=c[5].name),$[0]&32&&(O.email=c[5].email),n.$set(O);const F={};$[0]&4&&(F.recurring=c[2]),i.$set(F);const B={};$[0]&1&&(B.token=c[0].invoizeToken),!a&&$[0]&4&&(a=!0,B.createdInvoices=c[2].createdInvoices,ne(()=>a=!1)),!u&&$[0]&8&&(u=!0,B.invoiceList=c[3],ne(()=>u=!1)),!f&&$[0]&16&&(f=!0,B.hasMoreInvoice=c[4],ne(()=>f=!1)),l.$set(B);const W={};$[0]&2&&(W.reminder=c[1].reminders),v.$set(W);const V={};$[0]&64&&(V.actionHistory=c[6]),w.$set(V)},i(c){b||(_(e.$$.fragment,c),_(n.$$.fragment,c),_(i.$$.fragment,c),_(l.$$.fragment,c),_(v.$$.fragment,c),_(w.$$.fragment,c),b=!0)},o(c){p(e.$$.fragment,c),p(n.$$.fragment,c),p(i.$$.fragment,c),p(l.$$.fragment,c),p(v.$$.fragment,c),p(w.$$.fragment,c),b=!1},d(c){c&&(S(t),S(r),S(o),S(g),S(m)),A(e,c),A(n,c),A(i,c),A(l,c),A(v,c),A(w,c)}}}function Wt(s){let e,t,n,r;const i=[Zt,Yt],o=[];function l(a,u){return a[1]?1:0}return e=l(s),t=o[e]=i[e](s),{c(){t.c(),n=me()},m(a,u){o[e].m(a,u),D(a,n,u),r=!0},p(a,u){let f=e;e=l(a),e===f?o[e].p(a,u):(J(),p(o[f],1,1,()=>{o[f]=null}),K(),t=o[e],t?t.p(a,u):(t=o[e]=i[e](a),t.c()),_(t,1),t.m(n.parentNode,n))},i(a){r||(_(t),r=!0)},o(a){p(t),r=!1},d(a){a&&S(n),o[e].d(a)}}}function xt(s){let e,t,n,r,i,o,l,a,u,f,g,v;const m=[s[10]];function w(c){s[17](c)}function b(c){s[18](c)}let k={};for(let c=0;c<m.length;c+=1)k=ye(k,m[c]);s[7]!==void 0&&(k.isDialogOpen=s[7]),s[8]!==void 0&&(k.isSendEmail=s[8]),e=new wt({props:k}),ee.push(()=>te(e,"isDialogOpen",w)),ee.push(()=>te(e,"isSendEmail",b)),e.$on("updateStatus",s[12]),i=new xe({props:{to:s[11]}});const I=[Qt,Gt],h=[];function N(c,$){return!c[1]&&!c[2]?0:1}return a=N(s),u=h[a]=I[a](s),g=new He({props:{class:"sticky top-16 h-fit rounded-md w-[800px] xl:w-80 space-y-4 print:hidden",$$slots:{default:[Wt]},$$scope:{ctx:s}}}),{c(){E(e.$$.fragment),r=R(),E(i.$$.fragment),o=R(),l=C("div"),u.c(),f=R(),E(g.$$.fragment),y(l,"class","flex flex-wrap xl:flex-nowrap justify-center xl:justify-center gap-8 mt-8")},m(c,$){M(e,c,$),D(c,r,$),M(i,c,$),D(c,o,$),D(c,l,$),h[a].m(l,null),d(l,f),M(g,l,null),v=!0},p(c,$){const z=$[0]&1024?je(m,[Ne(c[10])]):{};!t&&$[0]&128&&(t=!0,z.isDialogOpen=c[7],ne(()=>t=!1)),!n&&$[0]&256&&(n=!0,z.isSendEmail=c[8],ne(()=>n=!1)),e.$set(z);let O=a;a=N(c),a===O?h[a].p(c,$):(J(),p(h[O],1,1,()=>{h[O]=null}),K(),u=h[a],u?u.p(c,$):(u=h[a]=I[a](c),u.c()),_(u,1),u.m(l,f));const F={};$[0]&127|$[1]&1&&(F.$$scope={dirty:$,ctx:c}),g.$set(F)},i(c){v||(_(e.$$.fragment,c),_(i.$$.fragment,c),_(u),_(g.$$.fragment,c),v=!0)},o(c){p(e.$$.fragment,c),p(i.$$.fragment,c),p(u),p(g.$$.fragment,c),v=!1},d(c){c&&(S(r),S(o),S(l)),A(e,c),A(i,c),h[a].d(),A(g)}}}let en=!1;function tn(s,e,t){let n,r,i,o;he(s,Le,L=>t(24,i=L)),he(s,Be,L=>t(25,o=L));let{params:l={}}=e;const a=location.hash.split("/"),u=[{name:"Recurring",link:"recurrings"},{name:"List",link:`${a[1]}/${a[2]}`},{name:"Detail",link:`${a[1]}/${a[2]}/${a[3]}`}];let f,g,v,m=[],w=!1,b,k,I=!1,h=!1,N,c,$,z=!1;const O=()=>{if(I)return;if($===X.CREATE){F();return}t(13,I=!0);const L={id:f,recurringStatus:$};Ie.promise(Ce("recurring/update",L),{loading:"Updating...",success:()=>(t(13,I=!1),t(7,h=!1),t(1,g=null),t(2,v=null),B(),"Status updated successfully"),error:ce=>(t(13,I=!1),t(7,h=!1),ue(ce,"Failed to update status"))})},F=()=>{I||(t(13,I=!0),Ie.promise(Ce("recurring/create-invoice",{id:f,email:z}),{loading:"Creating...",success:()=>(t(13,I=!1),t(7,h=!1),t(1,g=null),t(2,v=null),B(),"Invoice created successfully"),error:L=>(t(13,I=!1),t(7,h=!1),ue(L,"Failed to create invoice"))}))},B=async()=>{try{const L=await ge(`recurring/detail?token=${l.invoizeToken}`);o&&console.log(L.data),f=L.data.id,t(1,g=L.data.invoice),t(2,v=L.data.recurring),t(5,b=L.data.user),t(6,k=L.data.actionHistory),t(3,m=v.createdInvoices.items??[]),m.length>0&&t(4,w=v.createdInvoices.page<v.createdInvoices.total_pages)}catch(L){ue(L,"Failed to fetch recurring invoice detail")}};ze(()=>{B(),ge("settings/get?key=payment.enablePaymentPage").then(L=>{Oe(Le,i=L.data.value,i)})});function W(L){h=L,t(7,h)}function V(L){z=L,t(8,z)}function ae(L){s.$$.not_equal(v.createdInvoices,L)&&(v.createdInvoices=L,t(2,v))}function fe(L){m=L,t(3,m)}function le(L){w=L,t(4,w)}return s.$$set=L=>{"params"in L&&t(0,l=L.params)},s.$$.update=()=>{s.$$.dirty[0]&4&&Ve(v==null?void 0:v.status),s.$$.dirty[0]&122882&&t(10,n={isLoading:I,actionMessage:c,actionMessageLowerCase:N,recurring:g,actionStatus:$}),s.$$.dirty[0]&2&&t(9,r={invoice:g,isPaid:en,note:g==null?void 0:g.invoiceNote,isRecurring:!0})},[l,g,v,m,w,b,k,h,z,r,n,u,O,I,N,c,$,W,V,ae,fe,le]}class yn extends ie{constructor(e){super(),re(this,e,tn,xt,se,{params:0},null,[-1,-1])}}export{yn as default};
