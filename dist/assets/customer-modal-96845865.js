import{S as Oe,i as Le,s as Ae,a4 as Q,a5 as U,c as _,m as $,a6 as z,j as d,t as p,l as g,X as K,Z as V,q as T,p as he,B as Be,a as I,e as F,d as A,f as b,g as m,C as je,aa as ye,k as h,x as B,Q as De,n as Re,o as Te,h as Ge,v as we,L as Me}from"./Toaster.svelte_svelte_type_style_lang-3086cbd0.js";import{R as Ne,D as Qe}from"./options-89ca2928.js";import{P as G,Q as se,j as Ce,Y as Ue}from"./invoice-store-89da11de.js";import{S as ze}from"./switch-b7e944c0.js";import{a as Xe,T as Ye,M as Ie}from"./MiniStar-4e4614b7.js";import{h as ke}from"./errorHelper-eef9e97b.js";import{I as qe}from"./input-342b31a9.js";import{L as W}from"./label-7d3a217f.js";function Ze(a){let t=a[1]?"Edit":"Add",e,s;return{c(){e=B(t),s=B(" Client Information")},m(n,l){b(n,e,l),b(n,s,l)},p(n,l){l&2&&t!==(t=n[1]?"Edit":"Add")&&De(e,t)},d(n){n&&(h(e),h(s))}}}function He(a){let t,e,s;return e=new Ie({}),{c(){t=B("Name "),_(e.$$.fragment)},m(n,l){b(n,t,l),$(e,n,l),s=!0},i(n){s||(d(e.$$.fragment,n),s=!0)},o(n){p(e.$$.fragment,n),s=!1},d(n){n&&h(t),g(e,n)}}}function Je(a){let t,e,s;return e=new Ie({}),{c(){t=B("Email "),_(e.$$.fragment)},m(n,l){b(n,t,l),$(e,n,l),s=!0},i(n){s||(d(e.$$.fragment,n),s=!0)},o(n){p(e.$$.fragment,n),s=!1},d(n){n&&h(t),g(e,n)}}}function Ke(a){let t;return{c(){t=B("Other Information")},m(e,s){b(e,t,s)},d(e){e&&h(t)}}}function Ve(a){let t;return{c(){t=B("Grant Preview Access")},m(e,s){b(e,t,s)},d(e){e&&h(t)}}}function We(a){let t;return{c(){t=B("Save Changes")},m(e,s){b(e,t,s)},i:we,o:we,d(e){e&&h(t)}}}function xe(a){let t,e,s;return t=new Me({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){_(t.$$.fragment),e=B(`
              Saving`)},m(n,l){$(t,n,l),b(n,e,l),s=!0},i(n){s||(d(t.$$.fragment,n),s=!0)},o(n){p(t.$$.fragment,n),s=!1},d(n){n&&h(e),g(t,n)}}}function et(a){let t,e,s,n;const l=[xe,We],u=[];function c(o,v){return o[2]?0:1}return t=c(a),e=u[t]=l[t](a),{c(){e.c(),s=Re()},m(o,v){u[t].m(o,v),b(o,s,v),n=!0},p(o,v){let w=t;t=c(o),t!==w&&(Te(),p(u[w],1,1,()=>{u[w]=null}),Ge(),e=u[t],e||(e=u[t]=l[t](o),e.c()),d(e,1),e.m(s.parentNode,s))},i(o){n||(d(e),n=!0)},o(o){p(e),n=!1},d(o){o&&h(s),u[t].d(o)}}}function tt(a){let t,e,s,n,l,u,c,o,v,w,E,C,M,k,N,X,P,S,Y,q,r,O,D,R,j,ne,L,x,ae,Z,ie,H,y,J,ee,re;t=new Xe({props:{$$slots:{default:[Ze]},$$scope:{ctx:a}}}),u=new W({props:{for:"name",$$slots:{default:[He]},$$scope:{ctx:a}}});function Ee(i){a[8](i)}let le={type:"text",id:"name",required:!0,placeholder:"Customer name"};a[3].name!==void 0&&(le.value=a[3].name),o=new qe({props:le}),Q.push(()=>U(o,"value",Ee)),C=new W({props:{for:"email",$$slots:{default:[Je]},$$scope:{ctx:a}}});function Se(i){a[9](i)}let oe={type:"email",id:"email",required:!0,placeholder:"Customer email"};a[3].email!==void 0&&(oe.value=a[3].email),k=new qe({props:oe}),Q.push(()=>U(k,"value",Se)),S=new W({props:{for:"address",$$slots:{default:[Ke]},$$scope:{ctx:a}}});function Fe(i){a[10](i)}let ue={id:"address",placeholder:"Add additional customer information such as address, company origin, etc...",class:"h-44"};a[3].address!==void 0&&(ue.value=a[3].address),q=new Ye({props:ue}),Q.push(()=>U(q,"value",Fe)),j=new W({props:{for:"preview-access",$$slots:{default:[Ve]},$$scope:{ctx:a}}});function Pe(i){a[11](i)}let fe={id:"preview-access"};return a[3].preview_access!==void 0&&(fe.checked=a[3].preview_access),L=new ze({props:fe}),Q.push(()=>U(L,"checked",Pe)),y=new Be({props:{disabled:a[2],type:"submit",$$slots:{default:[et]},$$scope:{ctx:a}}}),{c(){_(t.$$.fragment),e=I(),s=F("form"),n=F("div"),l=F("div"),_(u.$$.fragment),c=I(),_(o.$$.fragment),w=I(),E=F("div"),_(C.$$.fragment),M=I(),_(k.$$.fragment),X=I(),P=F("div"),_(S.$$.fragment),Y=I(),_(q.$$.fragment),O=I(),D=F("div"),R=F("div"),_(j.$$.fragment),ne=I(),_(L.$$.fragment),ae=I(),Z=F("div"),Z.textContent=`Granting preview access means it will create User with "Invoize Customer" role and send user credentials to
            their email now. They will be able to access invoice preview after you send them the invoice.`,ie=I(),H=F("div"),_(y.$$.fragment),A(l,"class","space-y-2"),A(E,"class","space-y-2"),A(P,"class","space-y-2"),A(R,"class","flex flex-nowrap items-center gap-2"),A(Z,"class","text-xs text-muted-foreground"),A(D,"class","space-y-1"),A(H,"class","space-y-2 pt-4 w-full flex justify-end"),A(n,"class","space-y-6 p-4")},m(i,f){$(t,i,f),b(i,e,f),b(i,s,f),m(s,n),m(n,l),$(u,l,null),m(l,c),$(o,l,null),m(n,w),m(n,E),$(C,E,null),m(E,M),$(k,E,null),m(n,X),m(n,P),$(S,P,null),m(P,Y),$(q,P,null),m(n,O),m(n,D),m(D,R),$(j,R,null),m(R,ne),$(L,R,null),m(D,ae),m(D,Z),m(n,ie),m(n,H),$(y,H,null),J=!0,ee||(re=je(s,"submit",ye(a[12])),ee=!0)},p(i,f){const ce={};f&262146&&(ce.$$scope={dirty:f,ctx:i}),t.$set(ce);const me={};f&262144&&(me.$$scope={dirty:f,ctx:i}),u.$set(me);const de={};!v&&f&8&&(v=!0,de.value=i[3].name,z(()=>v=!1)),o.$set(de);const pe={};f&262144&&(pe.$$scope={dirty:f,ctx:i}),C.$set(pe);const _e={};!N&&f&8&&(N=!0,_e.value=i[3].email,z(()=>N=!1)),k.$set(_e);const $e={};f&262144&&($e.$$scope={dirty:f,ctx:i}),S.$set($e);const ge={};!r&&f&8&&(r=!0,ge.value=i[3].address,z(()=>r=!1)),q.$set(ge);const ve={};f&262144&&(ve.$$scope={dirty:f,ctx:i}),j.$set(ve);const be={};!x&&f&8&&(x=!0,be.checked=i[3].preview_access,z(()=>x=!1)),L.$set(be);const te={};f&4&&(te.disabled=i[2]),f&262148&&(te.$$scope={dirty:f,ctx:i}),y.$set(te)},i(i){J||(d(t.$$.fragment,i),d(u.$$.fragment,i),d(o.$$.fragment,i),d(C.$$.fragment,i),d(k.$$.fragment,i),d(S.$$.fragment,i),d(q.$$.fragment,i),d(j.$$.fragment,i),d(L.$$.fragment,i),d(y.$$.fragment,i),J=!0)},o(i){p(t.$$.fragment,i),p(u.$$.fragment,i),p(o.$$.fragment,i),p(C.$$.fragment,i),p(k.$$.fragment,i),p(S.$$.fragment,i),p(q.$$.fragment,i),p(j.$$.fragment,i),p(L.$$.fragment,i),p(y.$$.fragment,i),J=!1},d(i){i&&(h(e),h(s)),g(t,i),g(u),g(o),g(C),g(k),g(S),g(q),g(j),g(L),g(y),ee=!1,re()}}}function st(a){let t,e;return t=new Qe({props:{$$slots:{default:[tt]},$$scope:{ctx:a}}}),{c(){_(t.$$.fragment)},m(s,n){$(t,s,n),e=!0},p(s,n){const l={};n&262158&&(l.$$scope={dirty:n,ctx:s}),t.$set(l)},i(s){e||(d(t.$$.fragment,s),e=!0)},o(s){p(t.$$.fragment,s),e=!1},d(s){g(t,s)}}}function nt(a){let t,e,s;function n(u){a[14](u)}let l={onOpenChange:a[13],$$slots:{default:[st]},$$scope:{ctx:a}};return a[0]!==void 0&&(l.open=a[0]),t=new Ne({props:l}),Q.push(()=>U(t,"open",n)),{c(){_(t.$$.fragment)},m(u,c){$(t,u,c),s=!0},p(u,[c]){const o={};c&262158&&(o.$$scope={dirty:c,ctx:u}),!e&&c&1&&(e=!0,o.open=u[0],z(()=>e=!1)),t.$set(o)},i(u){s||(d(t.$$.fragment,u),s=!0)},o(u){p(t.$$.fragment,u),s=!1},d(u){g(t,u)}}}function at(a,t,e){let s,n,l,u;K(a,G,r=>e(3,s=r)),K(a,se,r=>e(15,n=r)),K(a,Ce,r=>e(16,l=r)),K(a,Ue,r=>e(17,u=r));let c=!1,{isOpen:o=!1}=t,{isEditing:v=!1}=t,{isCreateFromInvoicePage:w=!1}=t;const E=()=>{V(G,s={...u},s)},C=async()=>{e(2,c=!0),T.loading("Saving..."),he("client/create",s,r=>{T.dismiss(),T.success("Customer added successfully");const{data:O}=r.data;V(se,n=[O,...n],n),w&&V(Ce,l={label:s.name,value:{...O}},l),e(0,o=!1),e(2,c=!1)}).catch(r=>{e(2,c=!1),ke(r,"Failed to add customer",!0,!0)})},M=async()=>{e(2,c=!0),T.loading("Updating..."),he("client/update",s,r=>{T.dismiss(),T.success("Customer data updated"),V(se,n=n.map(O=>O.id===s.id?s:O),n),e(0,o=!1),e(2,c=!1)}).catch(r=>{e(2,c=!1),ke(r,"Failed to update customer",!0,!0)})};function k(r){a.$$.not_equal(s.name,r)&&(s.name=r,G.set(s))}function N(r){a.$$.not_equal(s.email,r)&&(s.email=r,G.set(s))}function X(r){a.$$.not_equal(s.address,r)&&(s.address=r,G.set(s))}function P(r){a.$$.not_equal(s.preview_access,r)&&(s.preview_access=r,G.set(s))}const S=()=>v?M():C(),Y=()=>E();function q(r){o=r,e(0,o)}return a.$$set=r=>{"isOpen"in r&&e(0,o=r.isOpen),"isEditing"in r&&e(1,v=r.isEditing),"isCreateFromInvoicePage"in r&&e(7,w=r.isCreateFromInvoicePage)},[o,v,c,s,E,C,M,w,k,N,X,P,S,Y,q]}class dt extends Oe{constructor(t){super(),Le(this,t,at,nt,Ae,{isOpen:0,isEditing:1,isCreateFromInvoicePage:7})}}export{dt as C};
