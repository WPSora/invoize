import{S as J,i as K,s as Q,E as ie,I as Pt,c as v,m as h,F as ue,G as ke,j as _,t as p,l as D,H as De,J as St,K as yt,M as It,N as Lt,y as pe,d as A,a8 as Ce,f as $,g as C,n as U,k,a9 as Pe,e as L,a as N,x as E,Q as X,a4 as ee,a5 as te,a6 as ne,o as le,p as z,h as j,L as be,B as oe,z as Ae,a7 as ge,v as Ee,w as At,P as Se,r as se,Y as Nt,C as Et,aa as Tt,ab as Rt,X as Te,O as Mt,q as ce,Z as Ot}from"./Toaster.svelte_svelte_type_style_lang-7f7e6c6a.js";import{I as O,a as Re,b as W,S as Ut,c as Ht}from"./separator-8c150833.js";import{t as he}from"./triggerTabUpdateHelper-11d76906.js";import{C as zt,a as jt,e as Me,i as Vt,h as fe}from"./errorHelper-c5761fa6.js";import{a as Wt,I as Bt,C as Ft,R as Gt,A as Xt,B as Zt,L as qt}from"./action-history-1a30dec5.js";import{B as Yt}from"./Breadcrumb-694ccbf9.js";import{A as lt,a as rt,b as Jt}from"./index-27b43081.js";import{A as Kt}from"./alert-circle-1735eb8f.js";import{R as Qt,D as xt}from"./options-d5ba9c63.js";import{f as ye,s as Oe,a as en,C as tn}from"./index-8135346f.js";import{D as Ne}from"./dialog-header-655042da.js";import{X as nn}from"./x-circle-ea184c31.js";import{B as ln}from"./badge-check-72914ad5.js";import{X as rn}from"./x-b214d010.js";import{C as st}from"./check-e363f464.js";import{g as sn}from"./actionHelper-7c2d8a92.js";import{R as on,T as an,a as fn}from"./index-adb69836.js";import{H as cn}from"./history-dc23b0b9.js";import{R as un}from"./refresh-ccw-339b4929.js";import{P as mn}from"./pencil-19ab94f7.js";import{T as _n,P as dn,B as pn,F as gn,C as bn,a as $n}from"./CreateRecurringModal-eda7e109.js";import{S as kn}from"./send-40189e9a.js";import{C as ot}from"./circle-dollar-sign-225c0884.js";import{P as wn,d as Ue}from"./download-792a1be3.js";import{h as Le}from"./moment-a9aaa855.js";import{c as Ie}from"./capitalHelper-77c0a756.js";import{R as vn,A as hn,a as at,b as ft,c as ct,d as ut,e as mt}from"./index-4cbef84b.js";import{C as Dn}from"./checkbox-f6f93199.js";import{L as Cn}from"./label-a6e03658.js";import"./updater-76d8237b.js";import"./invoice-list-store-3c52e6c0.js";import"./card-footer-319409b2.js";import"./table-row-c2593e52.js";import"./MultilineText-1b659c34.js";import"./decimalFormatter-88348579.js";import"./woocommerce-ffbc825a.js";import"./_commonjsHelpers-725317a4.js";import"./pluralHelper-a32d0151.js";import"./index-f8fb6e4a.js";import"./arrays-9d05857f.js";import"./ProBadge-053dd74a.js";import"./helpers-5c749aec.js";import"./input-64299b06.js";import"./index-dc1d53ab.js";import"./Check-ec98a9d8.js";import"./action-d784a92a.js";import"./create-eb81c484.js";import"./setDefaultRecurring-f1d67430.js";function Pn(s){let e;const t=s[2].default,n=St(t,s,s[3],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l&8)&&yt(n,t,i,i[3],e?Lt(t,i[3],l,null):It(i[3]),null)},i(i){e||(_(n,i),e=!0)},o(i){p(n,i),e=!1},d(i){n&&n.d(i)}}}function Sn(s){let e,t;const n=[{name:"help-circle"},s[1],{iconNode:s[0]}];let i={$$slots:{default:[Pn]},$$scope:{ctx:s}};for(let l=0;l<n.length;l+=1)i=ie(i,n[l]);return e=new Pt({props:i}),{c(){v(e.$$.fragment)},m(l,r){h(e,l,r),t=!0},p(l,[r]){const a=r&3?ue(n,[n[0],r&2&&ke(l[1]),r&1&&{iconNode:l[0]}]):{};r&8&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){p(e.$$.fragment,l),t=!1},d(l){D(e,l)}}}function yn(s,e,t){let{$$slots:n={},$$scope:i}=e;const l=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];return s.$$set=r=>{t(1,e=ie(ie({},e),De(r))),"$$scope"in r&&t(3,i=r.$$scope)},e=De(e),[l,e,n,i]}class In extends J{constructor(e){super(),K(this,e,yn,Sn,Q,{})}}const Ln=In;function An(s){let e,t,n=[{width:s[1]},{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[2]],i={};for(let l=0;l<n.length;l+=1)i=ie(i,n[l]);return{c(){e=pe("svg"),t=pe("path"),A(t,"fill-rule","evenodd"),A(t,"clip-rule","evenodd"),A(t,"d","M1 9.50006C1 10.3285 1.67157 11.0001 2.5 11.0001H4L4 10.0001H2.5C2.22386 10.0001 2 9.7762 2 9.50006L2 2.50006C2 2.22392 2.22386 2.00006 2.5 2.00006L9.5 2.00006C9.77614 2.00006 10 2.22392 10 2.50006V4.00002H5.5C4.67158 4.00002 4 4.67159 4 5.50002V12.5C4 13.3284 4.67158 14 5.5 14H12.5C13.3284 14 14 13.3284 14 12.5V5.50002C14 4.67159 13.3284 4.00002 12.5 4.00002H11V2.50006C11 1.67163 10.3284 1.00006 9.5 1.00006H2.5C1.67157 1.00006 1 1.67163 1 2.50006V9.50006ZM5 5.50002C5 5.22388 5.22386 5.00002 5.5 5.00002H12.5C12.7761 5.00002 13 5.22388 13 5.50002V12.5C13 12.7762 12.7761 13 12.5 13H5.5C5.22386 13 5 12.7762 5 12.5V5.50002Z"),A(t,"fill",s[0]),Ce(e,i)},m(l,r){$(l,e,r),C(e,t)},p(l,[r]){r&1&&A(t,"fill",l[0]),Ce(e,i=ue(n,[r&2&&{width:l[1]},r&2&&{height:l[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},r&4&&l[2]]))},i:U,o:U,d(l){l&&k(e)}}}function Nn(s,e,t){const n=["color","size"];let i=Pe(e,n),{color:l="currentColor"}=e,{size:r=15}=e;return s.$$set=a=>{e=ie(ie({},e),De(a)),t(2,i=Pe(e,n)),"color"in a&&t(0,l=a.color),"size"in a&&t(1,r=a.size)},[l,r,i]}class En extends J{constructor(e){super(),K(this,e,Nn,An,Q,{color:0,size:1})}}const Tn=En;function Rn(s){let e,t,n=[{width:s[1]},{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s[2]],i={};for(let l=0;l<n.length;l+=1)i=ie(i,n[l]);return{c(){e=pe("svg"),t=pe("path"),A(t,"fill-rule","evenodd"),A(t,"clip-rule","evenodd"),A(t,"d","M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5539 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1041 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z"),A(t,"fill",s[0]),Ce(e,i)},m(l,r){$(l,e,r),C(e,t)},p(l,[r]){r&1&&A(t,"fill",l[0]),Ce(e,i=ue(n,[r&2&&{width:l[1]},r&2&&{height:l[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},r&4&&l[2]]))},i:U,o:U,d(l){l&&k(e)}}}function Mn(s,e,t){const n=["color","size"];let i=Pe(e,n),{color:l="currentColor"}=e,{size:r=15}=e;return s.$$set=a=>{e=ie(ie({},e),De(a)),t(2,i=Pe(e,n)),"color"in a&&t(0,l=a.color),"size"in a&&t(1,r=a.size)},[l,r,i]}class On extends J{constructor(e){super(),K(this,e,Mn,Rn,Q,{color:0,size:1})}}const _t=On;function Un(s){let e,t;return{c(){e=E("This invoice has "),t=E(s[0])},m(n,i){$(n,e,i),$(n,t,i)},p(n,i){i&1&&X(t,n[0])},d(n){n&&(k(e),k(t))}}}function Hn(s){let e;return{c(){e=E("Please contact your merchant for more information.")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function zn(s){let e,t,n,i,l,r,a,o;return t=new Kt({props:{class:"h-8 w-8 text-destructive mr-2"}}),l=new rt({props:{$$slots:{default:[Un]},$$scope:{ctx:s}}}),a=new Jt({props:{$$slots:{default:[Hn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),i=L("div"),v(l.$$.fragment),r=N(),v(a.$$.fragment)},m(f,u){$(f,e,u),h(t,e,null),$(f,n,u),$(f,i,u),h(l,i,null),C(i,r),h(a,i,null),o=!0},p(f,u){const c={};u&3&&(c.$$scope={dirty:u,ctx:f}),l.$set(c);const g={};u&2&&(g.$$scope={dirty:u,ctx:f}),a.$set(g)},i(f){o||(_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),o=!0)},o(f){p(t.$$.fragment,f),p(l.$$.fragment,f),p(a.$$.fragment,f),o=!1},d(f){f&&(k(e),k(n),k(i)),D(t),D(l),D(a)}}}function jn(s){let e,t,n;return t=new lt({props:{class:"md:w-1/2 w-full md:mx-0 mx-5 flex",$$slots:{default:[zn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),A(e,"class","w-full h-60 flex justify-center items-center")},m(i,l){$(i,e,l),h(t,e,null),n=!0},p(i,[l]){const r={};l&3&&(r.$$scope={dirty:l,ctx:i}),t.$set(r)},i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&k(e),D(t)}}}function Vn(s,e,t){let{tab:n}=e;return s.$$set=i=>{"tab"in i&&t(0,n=i.tab)},[n]}class Wn extends J{constructor(e){super(),K(this,e,Vn,jn,Q,{tab:0})}}function Bn(s){let e;return{c(){e=E("Invoice not found")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Fn(s){let e,t,n,i,l;return t=new Ln({props:{class:"h-8 w-8 text-amber-500 mr-3"}}),i=new rt({props:{class:"text-muted-foreground",$$slots:{default:[Bn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment)},m(r,a){$(r,e,a),h(t,e,null),$(r,n,a),h(i,r,a),l=!0},p(r,a){const o={};a&1&&(o.$$scope={dirty:a,ctx:r}),i.$set(o)},i(r){l||(_(t.$$.fragment,r),_(i.$$.fragment,r),l=!0)},o(r){p(t.$$.fragment,r),p(i.$$.fragment,r),l=!1},d(r){r&&(k(e),k(n)),D(t),D(i,r)}}}function Gn(s){let e,t,n;return t=new lt({props:{class:"md:w-1/2 w-full md:mx-0 mx-5 flex items-center text-lg",$$slots:{default:[Fn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),A(e,"class","w-full h-60 flex justify-center items-center")},m(i,l){$(i,e,l),h(t,e,null),n=!0},p(i,[l]){const r={};l&1&&(r.$$scope={dirty:l,ctx:i}),t.$set(r)},i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&k(e),D(t)}}}class Xn extends J{constructor(e){super(),K(this,e,null,Gn,Q,{})}}function Zn(s){let e,t,n,i,l,r,a,o;const f=[Jn,Yn],u=[];function c(m,P){return m[3]?0:m[3]?-1:1}~(e=c(s))&&(t=u[e]=f[e](s));const g=[ti,ei,xn],b=[];function y(m,P){return m[4]?0:!m[4]&&m[5]?1:!m[4]&&!m[5]?2:-1}~(i=y(s))&&(l=b[i]=g[i](s));let d=!s[4]&&ze(s);return{c(){t&&t.c(),n=N(),l&&l.c(),r=N(),d&&d.c(),a=le()},m(m,P){~e&&u[e].m(m,P),$(m,n,P),~i&&b[i].m(m,P),$(m,r,P),d&&d.m(m,P),$(m,a,P),o=!0},p(m,P){let I=e;e=c(m),e===I?~e&&u[e].p(m,P):(t&&(z(),p(u[I],1,1,()=>{u[I]=null}),j()),~e?(t=u[e],t?t.p(m,P):(t=u[e]=f[e](m),t.c()),_(t,1),t.m(n.parentNode,n)):t=null);let w=i;i=y(m),i===w?~i&&b[i].p(m,P):(l&&(z(),p(b[w],1,1,()=>{b[w]=null}),j()),~i?(l=b[i],l?l.p(m,P):(l=b[i]=g[i](m),l.c()),_(l,1),l.m(r.parentNode,r)):l=null),m[4]?d&&(z(),p(d,1,1,()=>{d=null}),j()):d?(d.p(m,P),P&16&&_(d,1)):(d=ze(m),d.c(),_(d,1),d.m(a.parentNode,a))},i(m){o||(_(t),_(l),_(d),o=!0)},o(m){p(t),p(l),p(d),o=!1},d(m){m&&(k(n),k(r),k(a)),~e&&u[e].d(m),~i&&b[i].d(m),d&&d.d(m)}}}function qn(s){let e,t,n,i,l;return t=new Ne({props:{$$slots:{default:[ii]},$$scope:{ctx:s}}}),i=new be({props:{class:"h-20 w-20 animate-spin text-primary",strokeWidth:1}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment),A(e,"class","h-60 flex flex-col items-center justify-center gap-3")},m(r,a){$(r,e,a),h(t,e,null),C(e,n),h(i,e,null),l=!0},p(r,a){const o={};a&512&&(o.$$scope={dirty:a,ctx:r}),t.$set(o)},i(r){l||(_(t.$$.fragment,r),_(i.$$.fragment,r),l=!0)},o(r){p(t.$$.fragment,r),p(i.$$.fragment,r),l=!1},d(r){r&&k(e),D(t),D(i)}}}function Yn(s){let e,t,n,i,l,r;return t=new Ne({props:{class:"font-semibold text-xl mb-4",$$slots:{default:[Kn]},$$scope:{ctx:s}}}),i=new nn({props:{class:"h-28 w-28 text-destructive"}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment),A(e,"class","flex flex-col items-center justify-center")},m(a,o){$(a,e,o),h(t,e,null),C(e,n),h(i,e,null),r=!0},p(a,o){const f={};o&512&&(f.$$scope={dirty:o,ctx:a}),t.$set(f)},i(a){r||(_(t.$$.fragment,a),_(i.$$.fragment,a),a&&Ae(()=>{r&&(l||(l=ge(e,ye,{},!0)),l.run(1))}),r=!0)},o(a){p(t.$$.fragment,a),p(i.$$.fragment,a),a&&(l||(l=ge(e,ye,{},!1)),l.run(0)),r=!1},d(a){a&&k(e),D(t),D(i),a&&l&&l.end()}}}function Jn(s){let e,t,n,i,l,r,a,o,f,u=(s[1]??"")+"",c,g,b,y;return t=new ln({props:{class:"h-44 w-44 text-green-600"}}),i=new Ne({props:{class:"text-2xl font-bold mb-1",$$slots:{default:[Qn]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),v(i.$$.fragment),l=N(),r=L("div"),a=E("Your payment for "),o=L("b"),f=E("Invoice "),c=E(u),g=E(" has been successfully accepted."),A(r,"class","text-center text-base"),A(e,"class","flex flex-col items-center justify-center mb-2")},m(d,m){$(d,e,m),h(t,e,null),C(e,n),h(i,e,null),C(e,l),C(e,r),C(r,a),C(r,o),C(o,f),C(o,c),C(r,g),y=!0},p(d,m){const P={};m&512&&(P.$$scope={dirty:m,ctx:d}),i.$set(P),(!y||m&2)&&u!==(u=(d[1]??"")+"")&&X(c,u)},i(d){y||(_(t.$$.fragment,d),_(i.$$.fragment,d),d&&Ae(()=>{y&&(b||(b=ge(e,ye,{},!0)),b.run(1))}),y=!0)},o(d){p(t.$$.fragment,d),p(i.$$.fragment,d),d&&(b||(b=ge(e,ye,{},!1)),b.run(0)),y=!1},d(d){d&&k(e),D(t),D(i),d&&b&&b.end()}}}function Kn(s){let e;return{c(){e=E("Payment Failed")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Qn(s){let e;return{c(){e=E("Payment Successful")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function xn(s){let e,t,n,i,l,r,a;n=new rn({props:{class:"h-4 w-4 text-destructive"}});let o=s[3]&&He();return{c(){e=L("div"),t=L("div"),v(n.$$.fragment),i=N(),l=L("div"),l.textContent="Failed to update Invoice payment status.",r=N(),o&&o.c(),A(l,"class","text-sm"),A(t,"class","flex gap-2 items-center justify-center")},m(f,u){$(f,e,u),C(e,t),h(n,t,null),C(t,i),C(t,l),C(e,r),o&&o.m(e,null),a=!0},p(f,u){f[3]?o||(o=He(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(f){a||(_(n.$$.fragment,f),a=!0)},o(f){p(n.$$.fragment,f),a=!1},d(f){f&&k(e),D(n),o&&o.d()}}}function ei(s){let e,t,n,i,l;return t=new st({props:{class:"h-4 w-4 text-green-600",strokeWidth:3}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),i=L("div"),i.textContent="Invoice payment status has been updated",A(i,"class","text-sm"),A(e,"class","flex gap-2 items-center justify-center")},m(r,a){$(r,e,a),h(t,e,null),C(e,n),C(e,i),l=!0},p:U,i(r){l||(_(t.$$.fragment,r),l=!0)},o(r){p(t.$$.fragment,r),l=!1},d(r){r&&k(e),D(t)}}}function ti(s){let e,t,n,i,l;return i=new be({props:{class:"h-4 w-4 text-primary-300 animate-spin"}}),{c(){e=L("div"),t=L("div"),t.textContent="Updating invoice payment status",n=N(),v(i.$$.fragment),A(t,"class","text-muted-foreground"),A(e,"class","flex gap-2 items-center justify-center")},m(r,a){$(r,e,a),C(e,t),C(e,n),h(i,e,null),l=!0},p:U,i(r){l||(_(i.$$.fragment,r),l=!0)},o(r){p(i.$$.fragment,r),l=!1},d(r){r&&k(e),D(i)}}}function He(s){let e;return{c(){e=L("div"),e.textContent="Please contact your merchant to manually update the invoice payment satus",A(e,"class","text-xs text-center")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ze(s){let e,t;return e=new oe({props:{class:"mt-2",$$slots:{default:[ni]},$$scope:{ctx:s}}}),e.$on("click",s[6]),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&512&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ni(s){let e;return{c(){e=E("Return to Invoice")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ii(s){let e;return{c(){e=E("Don't close this page while we process your payment...")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function li(s){let e,t,n,i;const l=[qn,Zn],r=[];function a(o,f){return o[2]?0:1}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=le()},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t?t.p(o,f):(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function ri(s){let e,t;return e=new xt({props:{class:"flex flex-col justify-center items-center bg-gradient-to-tr from-slate-100 to-white shadow-2xl p-12",$$slots:{default:[li]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&574&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function si(s){let e,t,n;function i(r){s[8](r)}let l={closeOnOutsideClick:!1,closeOnEscape:!1,onOpenChange:s[6],$$slots:{default:[ri]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.open=s[0]),e=new Qt({props:l}),ee.push(()=>te(e,"open",i)),{c(){v(e.$$.fragment)},m(r,a){h(e,r,a),n=!0},p(r,[a]){const o={};a&574&&(o.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,o.open=r[0],ne(()=>t=!1)),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function oi(s,e,t){let{invoiceId:n}=e,{isOpen:i=!1}=e,{isCapturingPayment:l}=e,{isPaymentSuccess:r}=e,{isUpdatingPaymentStatus:a}=e,{publicLink:o}=e,{isInvoicePaymentStatusUpdated:f}=e;const u=()=>{window.location.href=o};function c(g){i=g,t(0,i)}return s.$$set=g=>{"invoiceId"in g&&t(1,n=g.invoiceId),"isOpen"in g&&t(0,i=g.isOpen),"isCapturingPayment"in g&&t(2,l=g.isCapturingPayment),"isPaymentSuccess"in g&&t(3,r=g.isPaymentSuccess),"isUpdatingPaymentStatus"in g&&t(4,a=g.isUpdatingPaymentStatus),"publicLink"in g&&t(7,o=g.publicLink),"isInvoicePaymentStatusUpdated"in g&&t(5,f=g.isInvoicePaymentStatusUpdated)},[i,n,l,r,a,f,u,o,c]}class ai extends J{constructor(e){super(),K(this,e,oi,si,Q,{invoiceId:1,isOpen:0,isCapturingPayment:2,isPaymentSuccess:3,isUpdatingPaymentStatus:4,publicLink:7,isInvoicePaymentStatusUpdated:5})}}function je(s,e,t){const n=s.slice();return n[6]=e[t],n}function fi(s){let e,t;function n(){return s[5](s[6])}return e=new oe({props:{variant:"outline",class:"w-full flex flex-row h-10 p-4 flex-nowrap items-center justify-between text-xs gap-2 px-3",$$slots:{default:[vi]},$$scope:{ctx:s}}}),e.$on("click",n),{c(){v(e.$$.fragment)},m(i,l){h(e,i,l),t=!0},p(i,l){s=i;const r={};l&1029&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function ci(s){let e,t;return e=new on({props:{openDelay:200,$$slots:{default:[Pi]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&1035&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ui(s){let e,t;return e=new cn({props:{class:re+" text-teal-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function mi(s){let e,t;return e=new un({props:{class:re+" text-teal-400"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function _i(s){let e,t;return e=new mn({props:{class:re+" text-blue-400"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function di(s){let e,t;return e=new _n({props:{class:re+" text-red-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function pi(s){let e,t;return e=new dn({props:{class:re+" text-amber-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function gi(s){let e,t;return e=new pn({props:{class:re+" text-gray-400"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function bi(s){let e,t;return e=new gn({props:{class:re+" text-primary-300"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function $i(s){let e,t;return e=new kn({props:{class:re+" text-cyan-500"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ki(s){let e,t;return e=new ot({props:{class:re+" text-destructive"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function wi(s){let e,t;return e=new ot({props:{class:re+" text-green-600"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ve(s){let e,t;return{c(){e=pe("svg"),t=pe("path"),A(t,"fill","#22c55e"),A(t,"d","M63.94 39.721l-3.956-22.388c-.369-2.093-2.37-3.495-4.465-3.125l-31.726 5.605c-1.971.348-3.308 2.148-3.15 4.102-.022.162 3.983 22.751 3.983 22.751a3.82 3.82 0 0 0 1.586 2.487c.655.458 1.418.696 2.201.696a3.88 3.88 0 0 0 .678-.06l31.724-5.605c1.014-.179 1.896-.741 2.487-1.586a3.83 3.83 0 0 0 .638-2.879zm-2.673-3.636L50.6 27.879c3.003-3.233 6.138-6.785 7.702-8.572l2.965 16.778zM24.143 21.783l31.725-5.606c.109-.018.217-.028.323-.028.613 0 1.174.311 1.515.8-.932 1.072-9.375 10.757-13.433 14.56-1.062.993-2.603 1.243-3.918.632-4.79-2.213-15.22-7.446-17.727-8.707a1.84 1.84 0 0 1 .32-.887c.284-.406.709-.677 1.195-.764zm-1.164 4.064l10.512 5.219-7.523 11.702-2.99-16.921zm38.686 15.607a1.84 1.84 0 0 1-1.195.763l-31.725 5.606a1.85 1.85 0 0 1-1.386-.308 1.84 1.84 0 0 1-.763-1.195l-.115-.652 8.82-13.72h0l4.215 2.009a5.56 5.56 0 0 0 2.335.516 5.53 5.53 0 0 0 3.789-1.505c1.005-.941 2.255-2.215 3.586-3.622l12.558 9.66.188 1.063a1.84 1.84 0 0 1-.308 1.385zM19.008 29.867c-.096-.544-.616-.911-1.158-.811L.826 32.065a1 1 0 0 0 .172 1.984.95.95 0 0 0 .175-.016l17.024-3.008a1 1 0 0 0 .81-1.158zm1.021 5.785a1 1 0 0 0-1.158-.811L8.657 36.646a1 1 0 0 0 .173 1.984.95.95 0 0 0 .175-.016l10.214-1.805a1 1 0 0 0 .811-1.158zm-.141 4.945L13.079 41.8a1 1 0 0 0 .173 1.984.95.95 0 0 0 .175-.016l6.809-1.203a1 1 0 0 0 .811-1.158c-.095-.544-.617-.912-1.158-.811z"),A(e,"data-bs-toggle","tooltip"),A(e,"title","Email sent"),A(e,"class","w-5 h-5"),A(e,"xmlns","http://www.w3.org/2000/svg"),A(e,"viewBox","0 0 64 64"),A(e,"xmlns:v","https://vecta.io/nano")},m(n,i){$(n,e,i),C(e,t)},d(n){n&&k(e)}}}function vi(s){let e,t,n,i,l,r=(s[6].label===Re.DUPLICATE?"Duplicate":s[6].label)+"",a,o,f,u;const c=[wi,ki,$i,bi,gi,pi,di,_i,mi,ui],g=[];function b(d,m){return d[6].status===W.PAID?0:d[6].status===W.UNPAID?1:d[6].status===O.SEND?2:d[6].status===O.DUPLICATE?3:d[6].status===O.CANCELLED?4:d[6].status===O.ARCHIVED?5:d[6].status===O.TRASHED?6:d[6].status===O.EDIT?7:d[6].status===O.REGENERATE?8:9}t=b(s),n=g[t]=c[t](s);let y=s[2]&&s[6].status===O.SEND&&Ve();return{c(){e=L("div"),n.c(),i=N(),l=L("div"),a=E(r),o=N(),y&&y.c(),f=N(),A(l,"class","w-full text-start text-wrap"),A(e,"class","flex flex-row flex-nowrap h-10 items-center w-full gap-2")},m(d,m){$(d,e,m),g[t].m(e,null),C(e,i),C(e,l),C(l,a),$(d,o,m),y&&y.m(d,m),$(d,f,m),u=!0},p(d,m){let P=t;t=b(d),t===P?g[t].p(d,m):(z(),p(g[P],1,1,()=>{g[P]=null}),j(),n=g[t],n?n.p(d,m):(n=g[t]=c[t](d),n.c()),_(n,1),n.m(e,i)),(!u||m&1)&&r!==(r=(d[6].label===Re.DUPLICATE?"Duplicate":d[6].label)+"")&&X(a,r),d[2]&&d[6].status===O.SEND?y||(y=Ve(),y.c(),y.m(f.parentNode,f)):y&&(y.d(1),y=null)},i(d){u||(_(n),u=!0)},o(d){p(n),u=!1},d(d){d&&(k(e),k(o),k(f)),g[t].d(),y&&y.d(d)}}}function hi(s){let e,t,n,i,l=s[6].label+"",r,a;return t=new bn({props:{class:re+" text-teal-500"}}),{c(){e=L("div"),v(t.$$.fragment),n=N(),i=L("div"),r=E(l),A(i,"class","w-full text-start text-wrap"),A(e,"class","flex flex-row flex-nowrap h-10 items-center w-full gap-2")},m(o,f){$(o,e,f),h(t,e,null),C(e,n),C(e,i),C(i,r),a=!0},p(o,f){(!a||f&1)&&l!==(l=o[6].label+"")&&X(r,l)},i(o){a||(_(t.$$.fragment,o),a=!0)},o(o){p(t.$$.fragment,o),a=!1},d(o){o&&k(e),D(t)}}}function Di(s){let e,t;function n(){return s[4](s[6])}return e=new oe({props:{builders:[s[9]],variant:"outline",class:"w-full flex flex-row h-10 p-4 col-span-2 flex-nowrap items-center justify-between text-xs gap-2 px-3 "+(s[3]?"opacity-50 cursor-not-allowed":""),$$slots:{default:[hi]},$$scope:{ctx:s}}}),e.$on("click",n),{c(){v(e.$$.fragment)},m(i,l){h(e,i,l),t=!0},p(i,l){s=i;const r={};l&512&&(r.builders=[s[9]]),l&8&&(r.class="w-full flex flex-row h-10 p-4 col-span-2 flex-nowrap items-center justify-between text-xs gap-2 px-3 "+(s[3]?"opacity-50 cursor-not-allowed":"")),l&1025&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function We(s){let e,t;return e=new fn({props:{$$slots:{default:[Ci]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ci(s){let e;return{c(){e=L("div"),e.textContent="Invoice is already recurring"},m(t,n){$(t,e,n)},p:U,d(t){t&&k(e)}}}function Pi(s){let e,t,n,i;e=new an({props:{asChild:!0,$$slots:{default:[Di,({builder:r})=>({9:r}),({builder:r})=>r?512:0]},$$scope:{ctx:s}}});let l=s[3]&&We(s);return{c(){v(e.$$.fragment),t=N(),l&&l.c(),n=N()},m(r,a){h(e,r,a),$(r,t,a),l&&l.m(r,a),$(r,n,a),i=!0},p(r,a){const o={};a&1547&&(o.$$scope={dirty:a,ctx:r}),e.$set(o),r[3]?l?a&8&&_(l,1):(l=We(r),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(z(),p(l,1,1,()=>{l=null}),j())},i(r){i||(_(e.$$.fragment,r),_(l),i=!0)},o(r){p(e.$$.fragment,r),p(l),i=!1},d(r){r&&(k(t),k(n)),D(e,r),l&&l.d(r)}}}function Be(s){let e,t,n,i;const l=[ci,fi],r=[];function a(o,f){return o[6].status===O.TO_RECURRING?0:1}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=le()},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t?t.p(o,f):(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function Si(s){let e,t,n=Ee(s[0]),i=[];for(let r=0;r<n.length;r+=1)i[r]=Be(je(s,n,r));const l=r=>p(i[r],1,1,()=>{i[r]=null});return{c(){e=L("div");for(let r=0;r<i.length;r+=1)i[r].c();A(e,"class","grid grid-cols-3 xl:grid-cols-2 gap-y-2 gap-x-1")},m(r,a){$(r,e,a);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);t=!0},p(r,[a]){if(a&527){n=Ee(r[0]);let o;for(o=0;o<n.length;o+=1){const f=je(r,n,o);i[o]?(i[o].p(f,a),_(i[o],1)):(i[o]=Be(f),i[o].c(),_(i[o],1),i[o].m(e,null))}for(z(),o=n.length;o<i.length;o+=1)l(o);j()}},i(r){if(!t){for(let a=0;a<n.length;a+=1)_(i[a]);t=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)p(i[a]);t=!1},d(r){r&&k(e),At(i,r)}}}const re="h-4 w-4";function yi(s,e,t){let{invoiceActions:n}=e,{actionHandler:i}=e,{isSent:l}=e,{isRecurring:r=!1}=e;const a=f=>{r||i(f)},o=f=>i(f);return s.$$set=f=>{"invoiceActions"in f&&t(0,n=f.invoiceActions),"actionHandler"in f&&t(1,i=f.actionHandler),"isSent"in f&&t(2,l=f.isSent),"isRecurring"in f&&t(3,r=f.isRecurring)},[n,i,l,r,a,o]}class Ii extends J{constructor(e){super(),K(this,e,yi,Si,Q,{invoiceActions:0,actionHandler:1,isSent:2,isRecurring:3})}}function Li(s){let e,t;return e=new _t({props:{class:"h-4 w-4 mr-3 text-green-600"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ai(s){let e,t;return e=new be({props:{class:"h-4 w-4 mr-3 text-primary animate-spin"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ni(s){let e,t,n,i;const l=[Ai,Li],r=[];function a(o,f){return o[1]?0:1}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=E(`
    Download Invoice as PDF`)},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e!==u&&(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t||(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function Fe(s){let e,t;return e=new oe({props:{disabled:s[2],variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start items-center text-xs",$$slots:{default:[Ri]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&4&&(l.disabled=n[2]),i&1028&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ei(s){let e,t;return e=new _t({props:{class:"h-4 w-4 mr-3 text-cyan-600"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ti(s){let e,t;return e=new be({props:{class:"h-4 w-4 mr-3 text-primary animate-spin"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ri(s){let e,t,n,i;const l=[Ti,Ei],r=[];function a(o,f){return o[2]?0:1}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=E(`
      Download Receipt as PDF`)},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e!==u&&(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t||(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function Mi(s){let e,t,n;return e=new wn({props:{class:"h-4 w-4 mr-3 text-primary"}}),{c(){v(e.$$.fragment),t=E(`
      Print`)},m(i,l){h(e,i,l),$(i,t,l),n=!0},p:U,i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){i&&k(t),D(e,i)}}}function Oi(s){let e,t;return e=new Tn({props:{class:"h-4 w-4 mr-3 text-primary col-span-1"}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ui(s){let e,t,n,i;return t=new st({props:{class:"h-4 w-4 mr-3 text-green-600 col-span-1"}}),{c(){e=L("div"),v(t.$$.fragment)},m(l,r){$(l,e,r),h(t,e,null),i=!0},i(l){i||(_(t.$$.fragment,l),l&&Ae(()=>{i&&(n||(n=ge(e,Oe,{},!0)),n.run(1))}),i=!0)},o(l){p(t.$$.fragment,l),l&&(n||(n=ge(e,Oe,{},!1)),n.run(0)),i=!1},d(l){l&&k(e),D(t),l&&n&&n.end()}}}function Hi(s){let e,t,n,i,l;const r=[Ui,Oi],a=[];function o(f,u){return f[3]?0:1}return t=o(s),n=a[t]=r[t](s),{c(){e=L("div"),n.c(),i=E(`
      Copy link`),A(e,"class","grid grid-cols-1")},m(f,u){$(f,e,u),a[t].m(e,null),$(f,i,u),l=!0},p(f,u){let c=t;t=o(f),t!==c&&(z(),p(a[c],1,1,()=>{a[c]=null}),j(),n=a[t],n||(n=a[t]=r[t](f),n.c()),_(n,1),n.m(e,null))},i(f){l||(_(n),l=!0)},o(f){p(n),l=!1},d(f){f&&(k(e),k(i)),a[t].d()}}}function zi(s){let e,t,n,i,l,r,a,o,f;t=new oe({props:{disabled:s[1],variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start items-center text-xs",$$slots:{default:[Ni]},$$scope:{ctx:s}}}),t.$on("click",s[4]);let u=s[0]===W.PAID&&Fe(s);return r=new oe({props:{variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start text-xs",$$slots:{default:[Mi]},$$scope:{ctx:s}}}),r.$on("click",s[6]),o=new oe({props:{variant:"outline",class:"w-full flex flex-row flex-nowrap justify-start text-xs",$$slots:{default:[Hi]},$$scope:{ctx:s}}}),o.$on("click",s[7]),{c(){e=L("div"),v(t.$$.fragment),n=N(),u&&u.c(),i=N(),l=L("div"),v(r.$$.fragment),a=N(),v(o.$$.fragment),A(l,"class","flex gap-x-2"),A(e,"class","space-y-2")},m(c,g){$(c,e,g),h(t,e,null),C(e,n),u&&u.m(e,null),C(e,i),C(e,l),h(r,l,null),C(l,a),h(o,l,null),f=!0},p(c,[g]){const b={};g&2&&(b.disabled=c[1]),g&1026&&(b.$$scope={dirty:g,ctx:c}),t.$set(b),c[0]===W.PAID?u?(u.p(c,g),g&1&&_(u,1)):(u=Fe(c),u.c(),_(u,1),u.m(e,i)):u&&(z(),p(u,1,1,()=>{u=null}),j());const y={};g&1024&&(y.$$scope={dirty:g,ctx:c}),r.$set(y);const d={};g&1032&&(d.$$scope={dirty:g,ctx:c}),o.$set(d)},i(c){f||(_(t.$$.fragment,c),_(u),_(r.$$.fragment,c),_(o.$$.fragment,c),f=!0)},o(c){p(t.$$.fragment,c),p(u),p(r.$$.fragment,c),p(o.$$.fragment,c),f=!1},d(c){c&&k(e),D(t),u&&u.d(),D(r),D(o)}}}function ji(s,e,t){let{token:n}=e,{publicLink:i}=e,{paymentStatus:l}=e,r=!1,a=!1,o=!1;const f=()=>{t(1,r=!0),Se(`download/invoice?token=${n}`).then(b=>{Ue(atob(b.data.content),`${b.data.filename}`,"application/pdf")}).catch(b=>{se.error(b.message.response.data.message)}).finally(()=>{t(1,r=!1)})},u=()=>{t(2,a=!0),Se(`download/receipt?token=${n}`).then(b=>{Ue(atob(b.data.content),`${b.data.filename}`,"application/pdf")}).catch(b=>{se.error(b.message.response.data.message)}).finally(()=>{t(2,a=!1)})},c=()=>{window.print()},g=()=>{navigator.clipboard.writeText(i),se.success("Link copied to clipboard"),t(3,o=!0),setTimeout(()=>{t(3,o=!1)},2e3)};return s.$$set=b=>{"token"in b&&t(8,n=b.token),"publicLink"in b&&t(9,i=b.publicLink),"paymentStatus"in b&&t(0,l=b.paymentStatus)},[l,r,a,o,f,u,c,g,n,i]}class Vi extends J{constructor(e){super(),K(this,e,ji,zi,Q,{token:8,publicLink:9,paymentStatus:0})}}function Wi(s){let e,t,n,i,l;return{c(){e=L("div"),t=L("div"),t.textContent="Due:",n=N(),i=L("div"),l=E(s[0]),A(t,"class","font-medium"),A(i,"class","text-destructive font-bold"),A(e,"class","flex flex-col justify-center items-center")},m(r,a){$(r,e,a),C(e,t),C(e,n),C(e,i),C(i,l)},p(r,[a]){a&1&&X(l,r[0])},i:U,o:U,d(r){r&&k(e)}}}function Bi(s,e,t){let n,{dueDate:i}=e;return s.$$set=l=>{"dueDate"in l&&t(1,i=l.dueDate)},s.$$.update=()=>{s.$$.dirty&2&&t(0,n=Le(i).from(Le().subtract(1,"days")))},[n,i]}class Fi extends J{constructor(e){super(),K(this,e,Bi,Wi,Q,{dueDate:1})}}function Gi(s){let e,t,n;return{c(){e=L("div"),t=E(s[3]),A(e,"class",n="text-white font-bold px-2 rounded-md "+(s[2]===O.ACTIVE?"bg-green-600":s[2]===O.ARCHIVED?"bg-amber-400":"bg-destructive"))},m(i,l){$(i,e,l),C(e,t)},p(i,l){l&8&&X(t,i[3]),l&4&&n!==(n="text-white font-bold px-2 rounded-md "+(i[2]===O.ACTIVE?"bg-green-600":i[2]===O.ARCHIVED?"bg-amber-400":"bg-destructive"))&&A(e,"class",n)},d(i){i&&k(e)}}}function Xi(s){let e,t,n;return{c(){e=L("div"),t=E(s[4]),A(e,"class",n="text-white font-bold px-2 rounded-md "+(s[1]===W.PAID?"bg-green-600":"bg-destructive"))},m(i,l){$(i,e,l),C(e,t)},p(i,l){l&16&&X(t,i[4]),l&2&&n!==(n="text-white font-bold px-2 rounded-md "+(i[1]===W.PAID?"bg-green-600":"bg-destructive"))&&A(e,"class",n)},d(i){i&&k(e)}}}function Zi(s){let e,t,n;function i(a,o){return a[0]?Xi:Gi}let l=i(s),r=l(s);return{c(){e=L("div"),t=L("div"),t.textContent="Status:",n=N(),r.c(),A(t,"class","font-medium"),A(e,"class","flex flex-col justify-center items-center")},m(a,o){$(a,e,o),C(e,t),C(e,n),r.m(e,null)},p(a,[o]){l===(l=i(a))&&r?r.p(a,o):(r.d(1),r=l(a),r&&(r.c(),r.m(e,null)))},i:U,o:U,d(a){a&&k(e),r.d()}}}function qi(s,e,t){let n,i,{isPublic:l}=e,{paymentStatus:r}=e,{invoiceStatus:a}=e;return s.$$set=o=>{"isPublic"in o&&t(0,l=o.isPublic),"paymentStatus"in o&&t(1,r=o.paymentStatus),"invoiceStatus"in o&&t(2,a=o.invoiceStatus)},s.$$.update=()=>{s.$$.dirty&2&&t(4,n=Ie(r)),s.$$.dirty&4&&t(3,i=Ie(a))},[l,r,a,i,n]}class Yi extends J{constructor(e){super(),K(this,e,qi,Zi,Q,{isPublic:0,paymentStatus:1,invoiceStatus:2})}}function Ji(s){let e,t,n,i;return e=new at({props:{$$slots:{default:[sl]},$$scope:{ctx:s}}}),n=new ft({props:{$$slots:{default:[ml]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(l,r){h(e,l,r),$(l,t,r),h(n,l,r),i=!0},p(l,r){const a={};r&1049532&&(a.$$scope={dirty:r,ctx:l}),e.$set(a);const o={};r&1049186&&(o.$$scope={dirty:r,ctx:l}),n.$set(o)},i(l){i||(_(e.$$.fragment,l),_(n.$$.fragment,l),i=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),i=!1},d(l){l&&k(t),D(e,l),D(n,l)}}}function Ki(s){let e,t,n,i,l,r,a,o,f,u,c;e=new at({props:{$$slots:{default:[pl]},$$scope:{ctx:s}}});function g(d){s[13](d)}function b(d){s[14](d)}let y={};return s[10]!==void 0&&(y.payload=s[10]),s[11]!==void 0&&(y.dueDateInterval=s[11]),i=new $n({props:y}),ee.push(()=>te(i,"payload",g)),ee.push(()=>te(i,"dueDateInterval",b)),o=new ft({props:{class:"mt-5",$$slots:{default:[wl]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),n=L("form"),v(i.$$.fragment),a=N(),v(o.$$.fragment)},m(d,m){h(e,d,m),$(d,t,m),$(d,n,m),h(i,n,null),C(n,a),h(o,n,null),f=!0,u||(c=Et(n,"submit",Tt(s[15])),u=!0)},p(d,m){const P={};m&1048576&&(P.$$scope={dirty:m,ctx:d}),e.$set(P);const I={};!l&&m&1024&&(l=!0,I.payload=d[10],ne(()=>l=!1)),!r&&m&2048&&(r=!0,I.dueDateInterval=d[11],ne(()=>r=!1)),i.$set(I);const w={};m&1048578&&(w.$$scope={dirty:m,ctx:d}),o.$set(w)},i(d){f||(_(e.$$.fragment,d),_(i.$$.fragment,d),_(o.$$.fragment,d),f=!0)},o(d){p(e.$$.fragment,d),p(i.$$.fragment,d),p(o.$$.fragment,d),f=!1},d(d){d&&(k(t),k(n)),D(e,d),D(i),D(o),u=!1,c()}}}function Qi(s){let e;return{c(){e=E("Are you sure?")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function xi(s){let e;return{c(){e=E(`It will create new payment link if the previous one is unavailable or expired. The rest of invoice will be
              the same.`)},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function el(s){let e;return{c(){e=E("This action will also affect the corresponding receipt.")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function tl(s){let e;return{c(){e=E("This action will delete the receipt.")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function nl(s){let e;return{c(){e=E(`This will also create Receipt, set the order status in Woocommerce to COMPLETE and send receipt to
              customer's email`)},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function il(s){let e;return{c(){e=E("This action will create the receipt.")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ll(s){var P;let e,t,n,i,l,r,a,o,f=((P=s[3])==null?void 0:P.name)+"",u,c,g,b;function y(I,w){if(I[5]===W.PAID&&!I[8])return il;if(I[5]===W.PAID&&I[8])return nl;if(I[5]===W.UNPAID)return tl;if(I[4]===W.PAID&&(I[5]===O.ARCHIVED||I[5]===O.CANCELLED||I[5]===O.TRASHED||I[5]===O.ACTIVE))return el;if(I[5]===O.REGENERATE)return xi}let d=y(s),m=d&&d(s);return{c(){e=L("div"),t=E("Are you sure you want to "),n=L("span"),i=E(s[7]),l=E(`
            invoice `),r=L("span"),a=E(s[2]),o=N(),u=E(f),c=E("?"),g=N(),b=L("div"),m&&m.c(),A(n,"class","text-primary"),A(r,"class","text-primary"),A(b,"class","text-xs")},m(I,w){$(I,e,w),C(e,t),C(e,n),C(n,i),C(e,l),C(e,r),C(r,a),C(r,o),C(r,u),C(r,c),$(I,g,w),$(I,b,w),m&&m.m(b,null)},p(I,w){var R;w&128&&X(i,I[7]),w&4&&X(a,I[2]),w&8&&f!==(f=((R=I[3])==null?void 0:R.name)+"")&&X(u,f),d!==(d=y(I))&&(m&&m.d(1),m=d&&d(I),m&&(m.c(),m.m(b,null)))},d(I){I&&(k(e),k(g),k(b)),m&&m.d()}}}function Ge(s){let e,t,n,i,l,r;function a(f){s[16](f)}let o={id:"send-email"};return s[9]!==void 0&&(o.checked=s[9]),t=new Dn({props:o}),ee.push(()=>te(t,"checked",a)),l=new Cn({props:{for:"send-email",$$slots:{default:[rl]},$$scope:{ctx:s}}}),{c(){e=L("div"),v(t.$$.fragment),i=N(),v(l.$$.fragment),A(e,"class","flex flex-row flex-nowrap items-center gap-x-2 py-2")},m(f,u){$(f,e,u),h(t,e,null),C(e,i),h(l,e,null),r=!0},p(f,u){const c={};!n&&u&512&&(n=!0,c.checked=f[9],ne(()=>n=!1)),t.$set(c);const g={};u&1048576&&(g.$$scope={dirty:u,ctx:f}),l.$set(g)},i(f){r||(_(t.$$.fragment,f),_(l.$$.fragment,f),r=!0)},o(f){p(t.$$.fragment,f),p(l.$$.fragment,f),r=!1},d(f){f&&k(e),D(t),D(l)}}}function rl(s){let e;return{c(){e=E("Also send email to customer")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function sl(s){let e,t,n,i,l,r;e=new ct({props:{$$slots:{default:[Qi]},$$scope:{ctx:s}}}),n=new ut({props:{$$slots:{default:[ll]},$$scope:{ctx:s}}});let a=s[5]===W.PAID&&!s[8]&&Ge(s);return{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment),i=N(),a&&a.c(),l=le()},m(o,f){h(e,o,f),$(o,t,f),h(n,o,f),$(o,i,f),a&&a.m(o,f),$(o,l,f),r=!0},p(o,f){const u={};f&1048576&&(u.$$scope={dirty:f,ctx:o}),e.$set(u);const c={};f&1049020&&(c.$$scope={dirty:f,ctx:o}),n.$set(c),o[5]===W.PAID&&!o[8]?a?(a.p(o,f),f&288&&_(a,1)):(a=Ge(o),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(z(),p(a,1,1,()=>{a=null}),j())},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),_(a),r=!0)},o(o){p(e.$$.fragment,o),p(n.$$.fragment,o),p(a),r=!1},d(o){o&&(k(t),k(i),k(l)),D(e,o),D(n,o),a&&a.d(o)}}}function ol(s){let e;return{c(){e=E("Cancel")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function al(s){let e;return{c(){e=E(s[6])},m(t,n){$(t,e,n)},p(t,n){n&64&&X(e,t[6])},i:U,o:U,d(t){t&&k(e)}}}function fl(s){let e;return{c(){e=E("Yes")},m(t,n){$(t,e,n)},p:U,i:U,o:U,d(t){t&&k(e)}}}function cl(s){let e,t,n;return e=new be({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){v(e.$$.fragment),t=E(`
            Saving`)},m(i,l){h(e,i,l),$(i,t,l),n=!0},p:U,i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){i&&k(t),D(e,i)}}}function ul(s){let e,t,n,i;const l=[cl,fl,al],r=[];function a(o,f){return o[1]?0:o[5]===O.CANCELLED?1:2}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=le()},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t?t.p(o,f):(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function ml(s){let e,t,n,i;return e=new mt({props:{$$slots:{default:[ol]},$$scope:{ctx:s}}}),n=new oe({props:{disabled:s[1],variant:s[5]===W.UNPAID||s[5]===O.CANCELLED||s[5]===O.TRASHED?"destructive":"default",$$slots:{default:[ul]},$$scope:{ctx:s}}}),n.$on("click",s[17]),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(l,r){h(e,l,r),$(l,t,r),h(n,l,r),i=!0},p(l,r){const a={};r&1048576&&(a.$$scope={dirty:r,ctx:l}),e.$set(a);const o={};r&2&&(o.disabled=l[1]),r&32&&(o.variant=l[5]===W.UNPAID||l[5]===O.CANCELLED||l[5]===O.TRASHED?"destructive":"default"),r&1048674&&(o.$$scope={dirty:r,ctx:l}),n.$set(o)},i(l){i||(_(e.$$.fragment,l),_(n.$$.fragment,l),i=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),i=!1},d(l){l&&k(t),D(e,l),D(n,l)}}}function _l(s){let e;return{c(){e=E("Recurring Details")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function dl(s){let e;return{c(){e=E("Input the recurring details")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function pl(s){let e,t,n,i;return e=new ct({props:{class:"my-0",$$slots:{default:[_l]},$$scope:{ctx:s}}}),n=new ut({props:{$$slots:{default:[dl]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(l,r){h(e,l,r),$(l,t,r),h(n,l,r),i=!0},p(l,r){const a={};r&1048576&&(a.$$scope={dirty:r,ctx:l}),e.$set(a);const o={};r&1048576&&(o.$$scope={dirty:r,ctx:l}),n.$set(o)},i(l){i||(_(e.$$.fragment,l),_(n.$$.fragment,l),i=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),i=!1},d(l){l&&k(t),D(e,l),D(n,l)}}}function gl(s){let e;return{c(){e=E("Cancel")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function bl(s){let e;return{c(){e=E("Save")},m(t,n){$(t,e,n)},i:U,o:U,d(t){t&&k(e)}}}function $l(s){let e,t,n;return e=new be({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){v(e.$$.fragment),t=E(`
              Saving`)},m(i,l){h(e,i,l),$(i,t,l),n=!0},i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){p(e.$$.fragment,i),n=!1},d(i){i&&k(t),D(e,i)}}}function kl(s){let e,t,n,i;const l=[$l,bl],r=[];function a(o,f){return o[1]?0:1}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=le()},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e!==u&&(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t||(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function wl(s){let e,t,n,i;return e=new mt({props:{disabled:s[1],$$slots:{default:[gl]},$$scope:{ctx:s}}}),n=new oe({props:{type:"submit",disabled:s[1],$$slots:{default:[kl]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(l,r){h(e,l,r),$(l,t,r),h(n,l,r),i=!0},p(l,r){const a={};r&2&&(a.disabled=l[1]),r&1048576&&(a.$$scope={dirty:r,ctx:l}),e.$set(a);const o={};r&2&&(o.disabled=l[1]),r&1048578&&(o.$$scope={dirty:r,ctx:l}),n.$set(o)},i(l){i||(_(e.$$.fragment,l),_(n.$$.fragment,l),i=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),i=!1},d(l){l&&k(t),D(e,l),D(n,l)}}}function vl(s){let e,t,n,i;const l=[Ki,Ji],r=[];function a(o,f){return o[5]===O.TO_RECURRING?0:1}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=le()},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t?t.p(o,f):(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function hl(s){let e,t;return e=new hn({props:{$$slots:{default:[vl]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&1052670&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Dl(s){let e,t,n;function i(r){s[19](r)}let l={onOpenChange:s[18],$$slots:{default:[hl]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.open=s[0]),e=new vn({props:l}),ee.push(()=>te(e,"open",i)),{c(){v(e.$$.fragment)},m(r,a){h(e,r,a),n=!0},p(r,[a]){const o={};a&512&&(o.onOpenChange=r[18]),a&1052670&&(o.$$scope={dirty:a,ctx:r}),!t&&a&1&&(t=!0,o.open=r[0],ne(()=>t=!1)),e.$set(o)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function Cl(s,e,t){const n=Nt();let{isDialogOpen:i=!1}=e,{isLoading:l=!1}=e,{invoiceNumber:r}=e,{client:a}=e,{paymentStatus:o}=e,{actionStatus:f}=e,{actionMessage:u}=e,{actionMessageLowerCase:c}=e,{isWoocommerce:g}=e,b=!1,y,d;function m(S){y=S,t(10,y)}function P(S){d=S,t(11,d)}const I=()=>n("updateStatus",{recurring:y,dueDateInterval:d});function w(S){b=S,t(9,b)}const R=()=>n("updateStatus",{isSendEmail:b}),V=()=>t(9,b=!1);function M(S){i=S,t(0,i)}return s.$$set=S=>{"isDialogOpen"in S&&t(0,i=S.isDialogOpen),"isLoading"in S&&t(1,l=S.isLoading),"invoiceNumber"in S&&t(2,r=S.invoiceNumber),"client"in S&&t(3,a=S.client),"paymentStatus"in S&&t(4,o=S.paymentStatus),"actionStatus"in S&&t(5,f=S.actionStatus),"actionMessage"in S&&t(6,u=S.actionMessage),"actionMessageLowerCase"in S&&t(7,c=S.actionMessageLowerCase),"isWoocommerce"in S&&t(8,g=S.isWoocommerce)},[i,l,r,a,o,f,u,c,g,b,y,d,n,m,P,I,w,R,V,M]}class Pl extends J{constructor(e){super(),K(this,e,Cl,Dl,Q,{isDialogOpen:0,isLoading:1,invoiceNumber:2,client:3,paymentStatus:4,actionStatus:5,actionMessage:6,actionMessageLowerCase:7,isWoocommerce:8})}}function Sl(s){let e,t,n,i;return e=new en({props:{class:"bg-accent flex flex-row items-center justify-around py-3",$$slots:{default:[Il]},$$scope:{ctx:s}}}),n=new jt({props:{class:"space-y-4",$$slots:{default:[Ll]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),t=N(),v(n.$$.fragment)},m(l,r){h(e,l,r),$(l,t,r),h(n,l,r),i=!0},p(l,r){const a={};r&1048600&&(a.$$scope={dirty:r,ctx:l}),e.$set(a);const o={};r&1049020&&(o.$$scope={dirty:r,ctx:l}),n.$set(o)},i(l){i||(_(e.$$.fragment,l),_(n.$$.fragment,l),i=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),i=!1},d(l){l&&k(t),D(e,l),D(n,l)}}}function yl(s){let e,t;return e=new Wt({props:{isPublic:s[3]}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&8&&(l.isPublic=n[3]),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Xe(s){let e,t;return e=new Fi({props:{dueDate:s[4].dueDate}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&16&&(l.dueDate=n[4].dueDate),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Il(s){let e,t,n,i;e=new Yi({props:{paymentStatus:s[4].paymentStatus,invoiceStatus:s[4].invoiceStatus,isPublic:s[3]}});let l=s[4].paymentStatus===W.UNPAID&&Xe(s);return{c(){v(e.$$.fragment),t=N(),l&&l.c(),n=le()},m(r,a){h(e,r,a),$(r,t,a),l&&l.m(r,a),$(r,n,a),i=!0},p(r,a){const o={};a&16&&(o.paymentStatus=r[4].paymentStatus),a&16&&(o.invoiceStatus=r[4].invoiceStatus),a&8&&(o.isPublic=r[3]),e.$set(o),r[4].paymentStatus===W.UNPAID?l?(l.p(r,a),a&16&&_(l,1)):(l=Xe(r),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(z(),p(l,1,1,()=>{l=null}),j())},i(r){i||(_(e.$$.fragment,r),_(l),i=!0)},o(r){p(e.$$.fragment,r),p(l),i=!1},d(r){r&&(k(t),k(n)),D(e,r),l&&l.d(r)}}}function Ze(s){let e,t;return e=new Ut({}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function qe(s){let e,t;return e=new Ii({props:{invoiceActions:s[8],actionHandler:s[9],isRecurring:s[4].recurring,isSent:s[4].isSent}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&256&&(l.invoiceActions=n[8]),i&16&&(l.isRecurring=n[4].recurring),i&16&&(l.isSent=n[4].isSent),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ye(s){var n;let e,t;return e=new Bt({props:{internalNote:(n=s[4].invoiceNote)==null?void 0:n.internalNote}}),{c(){v(e.$$.fragment)},m(i,l){h(e,i,l),t=!0},p(i,l){var a;const r={};l&16&&(r.internalNote=(a=i[4].invoiceNote)==null?void 0:a.internalNote),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function Je(s){let e,t;return e=new Ft({props:{email:s[4].user.email,name:s[4].user.name}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&16&&(l.email=n[4].user.email),i&16&&(l.name=n[4].user.name),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ke(s){let e,t;return e=new Gt({props:{reminder:s[4].reminders}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&16&&(l.reminder=n[4].reminders),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Qe(s){let e,t;return e=new Xt({props:{actionHistory:s[7]}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i&128&&(l.actionHistory=n[7]),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ll(s){var I;let e,t,n,i,l,r,a,o,f;const u=[s[5]];let c={};for(let w=0;w<u.length;w+=1)c=ie(c,u[w]);e=new Vi({props:c});let g=!s[3]&&Ze(),b=!s[3]&&s[2]==="invoice"&&qe(s),y=!s[3]&&Ye(s),d=((I=s[4])==null?void 0:I.user)&&!s[3]&&Je(s),m=!s[3]&&s[2]==="invoice"&&Ke(s),P=!s[3]&&s[2]==="invoice"&&Qe(s);return{c(){v(e.$$.fragment),t=N(),g&&g.c(),n=N(),b&&b.c(),i=N(),y&&y.c(),l=N(),d&&d.c(),r=N(),m&&m.c(),a=N(),P&&P.c(),o=le()},m(w,R){h(e,w,R),$(w,t,R),g&&g.m(w,R),$(w,n,R),b&&b.m(w,R),$(w,i,R),y&&y.m(w,R),$(w,l,R),d&&d.m(w,R),$(w,r,R),m&&m.m(w,R),$(w,a,R),P&&P.m(w,R),$(w,o,R),f=!0},p(w,R){var M;const V=R&32?ue(u,[ke(w[5])]):{};e.$set(V),w[3]?g&&(z(),p(g,1,1,()=>{g=null}),j()):g?R&8&&_(g,1):(g=Ze(),g.c(),_(g,1),g.m(n.parentNode,n)),!w[3]&&w[2]==="invoice"?b?(b.p(w,R),R&12&&_(b,1)):(b=qe(w),b.c(),_(b,1),b.m(i.parentNode,i)):b&&(z(),p(b,1,1,()=>{b=null}),j()),w[3]?y&&(z(),p(y,1,1,()=>{y=null}),j()):y?(y.p(w,R),R&8&&_(y,1)):(y=Ye(w),y.c(),_(y,1),y.m(l.parentNode,l)),(M=w[4])!=null&&M.user&&!w[3]?d?(d.p(w,R),R&24&&_(d,1)):(d=Je(w),d.c(),_(d,1),d.m(r.parentNode,r)):d&&(z(),p(d,1,1,()=>{d=null}),j()),!w[3]&&w[2]==="invoice"?m?(m.p(w,R),R&12&&_(m,1)):(m=Ke(w),m.c(),_(m,1),m.m(a.parentNode,a)):m&&(z(),p(m,1,1,()=>{m=null}),j()),!w[3]&&w[2]==="invoice"?P?(P.p(w,R),R&12&&_(P,1)):(P=Qe(w),P.c(),_(P,1),P.m(o.parentNode,o)):P&&(z(),p(P,1,1,()=>{P=null}),j())},i(w){f||(_(e.$$.fragment,w),_(g),_(b),_(y),_(d),_(m),_(P),f=!0)},o(w){p(e.$$.fragment,w),p(g),p(b),p(y),p(d),p(m),p(P),f=!1},d(w){w&&(k(t),k(n),k(i),k(l),k(r),k(a),k(o)),D(e,w),g&&g.d(w),b&&b.d(w),y&&y.d(w),d&&d.d(w),m&&m.d(w),P&&P.d(w)}}}function Al(s){let e,t,n,i;const l=[yl,Sl],r=[];function a(o,f){return o[4]?1:0}return e=a(s),t=r[e]=l[e](s),{c(){t.c(),n=le()},m(o,f){r[e].m(o,f),$(o,n,f),i=!0},p(o,f){let u=e;e=a(o),e===u?r[e].p(o,f):(z(),p(r[u],1,1,()=>{r[u]=null}),j(),t=r[e],t?t.p(o,f):(t=r[e]=l[e](o),t.c()),_(t,1),t.m(n.parentNode,n))},i(o){i||(_(t),i=!0)},o(o){p(t),i=!1},d(o){o&&k(n),r[e].d(o)}}}function Nl(s){let e,t,n,i,l,r;const a=[s[6]];function o(c){s[17](c)}function f(c){s[18](c)}let u={};for(let c=0;c<a.length;c+=1)u=ie(u,a[c]);return s[1]!==void 0&&(u.isDialogOpen=s[1]),s[0]!==void 0&&(u.isLoading=s[0]),e=new Pl({props:u}),ee.push(()=>te(e,"isDialogOpen",o)),ee.push(()=>te(e,"isLoading",f)),e.$on("updateStatus",s[19]),l=new zt({props:{class:"sticky top-16 h-fit rounded-md w-[800px] xl:w-80 space-y-4 print:hidden",$$slots:{default:[Al]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),i=N(),v(l.$$.fragment)},m(c,g){h(e,c,g),$(c,i,g),h(l,c,g),r=!0},p(c,[g]){const b=g&64?ue(a,[ke(c[6])]):{};!t&&g&2&&(t=!0,b.isDialogOpen=c[1],ne(()=>t=!1)),!n&&g&1&&(n=!0,b.isLoading=c[0],ne(()=>n=!1)),e.$set(b);const y={};g&1049020&&(y.$$scope={dirty:g,ctx:c}),l.$set(y)},i(c){r||(_(e.$$.fragment,c),_(l.$$.fragment,c),r=!0)},o(c){p(e.$$.fragment,c),p(l.$$.fragment,c),r=!1},d(c){c&&k(i),D(e,c),D(l,c)}}}function El(s,e,t){let n,i,l,r,{token:a}=e,{page:o}=e,{publicLink:f}=e,{isPublic:u}=e,{invoice:c}=e,{isLoading:g}=e,{isDialogOpen:b}=e,{actionMessage:y}=e,{actionMessageLowerCase:d}=e,{actionStatus:m}=e,{selectedStatusType:P}=e,{isWoocommerce:I}=e;const w=({label:S,status:F})=>{if(F===O.EDIT){window.location.href=`#/invoice/edit/${a}`;return}t(1,b=!0),t(10,y=S),t(11,d=S.toLowerCase()),t(12,m=F);const Z=F===W.PAID||F===W.UNPAID;t(13,P=Z?"paymentStatus":"invoiceStatus")};function R(S){b=S,t(1,b)}function V(S){g=S,t(0,g)}function M(S){Rt.call(this,s,S)}return s.$$set=S=>{"token"in S&&t(14,a=S.token),"page"in S&&t(2,o=S.page),"publicLink"in S&&t(15,f=S.publicLink),"isPublic"in S&&t(3,u=S.isPublic),"invoice"in S&&t(4,c=S.invoice),"isLoading"in S&&t(0,g=S.isLoading),"isDialogOpen"in S&&t(1,b=S.isDialogOpen),"actionMessage"in S&&t(10,y=S.actionMessage),"actionMessageLowerCase"in S&&t(11,d=S.actionMessageLowerCase),"actionStatus"in S&&t(12,m=S.actionStatus),"selectedStatusType"in S&&t(13,P=S.selectedStatusType),"isWoocommerce"in S&&t(16,I=S.isWoocommerce)},s.$$.update=()=>{s.$$.dirty&16&&t(8,n=sn(c==null?void 0:c.tab)),s.$$.dirty&16&&t(7,i=(c==null?void 0:c.actionHistory)??[]),s.$$.dirty&72720&&t(6,l={actionMessageLowerCase:d,actionMessage:y,actionStatus:m,paymentStatus:c==null?void 0:c.paymentStatus,invoiceNumber:c==null?void 0:c.invoiceNumber,client:c==null?void 0:c.client,isWoocommerce:I}),s.$$.dirty&32784&&t(5,r={id:c==null?void 0:c.id,token:c==null?void 0:c.token,publicLink:f,paymentStatus:c==null?void 0:c.paymentStatus})},[g,b,o,u,c,r,l,i,n,w,y,d,m,P,a,f,I,R,V,M]}class Tl extends J{constructor(e){super(),K(this,e,El,Nl,Q,{token:14,page:2,publicLink:15,isPublic:3,invoice:4,isLoading:0,isDialogOpen:1,actionMessage:10,actionMessageLowerCase:11,actionStatus:12,selectedStatusType:13,isWoocommerce:16})}}function Rl(s){let e;return{c(){e=E("RECEIPT")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Ml(s){let e;return{c(){e=E("INVOICE")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Ol(s){let e;function t(l,r){if(l[1]==="invoice"||l[2])return Ml;if(l[1]==="receipt")return Rl}let n=t(s),i=n&&n(s);return{c(){i&&i.c(),e=le()},m(l,r){i&&i.m(l,r),$(l,e,r)},p(l,r){n!==(n=t(l))&&(i&&i.d(1),i=n&&n(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&k(e),i&&i.d(l)}}}function Ul(s){var o,f;let e,t=((o=s[0])==null?void 0:o.receiptNumber)+"",n,i,l,r=((f=s[0])==null?void 0:f.invoiceNumber)+"",a;return{c(){e=L("div"),n=E(t),i=N(),l=L("div"),a=E(r),A(e,"class","text-lg font-semibold"),A(l,"class","text-sm font-medium")},m(u,c){$(u,e,c),C(e,n),$(u,i,c),$(u,l,c),C(l,a)},p(u,c){var g,b;c&1&&t!==(t=((g=u[0])==null?void 0:g.receiptNumber)+"")&&X(n,t),c&1&&r!==(r=((b=u[0])==null?void 0:b.invoiceNumber)+"")&&X(a,r)},d(u){u&&(k(e),k(i),k(l))}}}function Hl(s){var i;let e,t=((i=s[0])==null?void 0:i.invoiceNumber)+"",n;return{c(){e=L("div"),n=E(t),A(e,"class","text-xl font-semibold")},m(l,r){$(l,e,r),C(e,n)},p(l,r){var a;r&1&&t!==(t=((a=l[0])==null?void 0:a.invoiceNumber)+"")&&X(n,t)},d(l){l&&k(e)}}}function xe(s){let e,t,n=s[0].isWoocommerce+"",i;return{c(){e=L("div"),t=E("From Woocommerce #"),i=E(n),A(e,"class","text-xs text-muted-foreground italic")},m(l,r){$(l,e,r),C(e,t),C(e,i)},p(l,r){r&1&&n!==(n=l[0].isWoocommerce+"")&&X(i,n)},d(l){l&&k(e)}}}function zl(s){let e,t,n,i,l,r;n=new tn({props:{slot:"title",class:"sm:text-[32px] text-[24px] font-bold mb-2",$$slots:{default:[Ol]},$$scope:{ctx:s}}});function a(c,g){if(c[1]==="invoice"||c[2])return Hl;if(c[1]==="receipt")return Ul}let o=a(s),f=o&&o(s),u=s[0].isWoocommerce&&xe(s);return{c(){e=L("div"),t=L("div"),v(n.$$.fragment),i=N(),f&&f.c(),l=N(),u&&u.c(),A(t,"class","flex flex-col items-end"),A(e,"class","flex items-center gap-12")},m(c,g){$(c,e,g),C(e,t),h(n,t,null),C(t,i),f&&f.m(t,null),C(t,l),u&&u.m(t,null),r=!0},p(c,[g]){const b={};g&14&&(b.$$scope={dirty:g,ctx:c}),n.$set(b),o===(o=a(c))&&f?f.p(c,g):(f&&f.d(1),f=o&&o(c),f&&(f.c(),f.m(t,l))),c[0].isWoocommerce?u?u.p(c,g):(u=xe(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i(c){r||(_(n.$$.fragment,c),r=!0)},o(c){p(n.$$.fragment,c),r=!1},d(c){c&&k(e),D(n),f&&f.d(),u&&u.d()}}}function jl(s,e,t){let{invoice:n}=e,{page:i}=e,{isPublic:l}=e;return s.$$set=r=>{"invoice"in r&&t(0,n=r.invoice),"page"in r&&t(1,i=r.page),"isPublic"in r&&t(2,l=r.isPublic)},[n,i,l]}class Vl extends J{constructor(e){super(),K(this,e,jl,zl,Q,{invoice:0,page:1,isPublic:2})}}function et(s){let e,t,n;return{c(){e=L("div"),e.textContent="Paid on",t=N(),n=L("div"),n.textContent="Paid using"},m(i,l){$(i,e,l),$(i,t,l),$(i,n,l)},d(i){i&&(k(e),k(t),k(n))}}}function tt(s){let e,t,n;return{c(){e=L("div"),e.textContent=":",t=N(),n=L("div"),n.textContent=":"},m(i,l){$(i,e,l),$(i,t,l),$(i,n,l)},d(i){i&&(k(e),k(t),k(n))}}}function nt(s){let e,t=(s[4]?s[6](s[4]):"-")+"",n,i,l,r=(s[5]?Ie(s[5]):"-")+"",a;return{c(){e=L("div"),n=E(t),i=N(),l=L("div"),a=E(r)},m(o,f){$(o,e,f),C(e,n),$(o,i,f),$(o,l,f),C(l,a)},p(o,f){f&16&&t!==(t=(o[4]?o[6](o[4]):"-")+"")&&X(n,t),f&32&&r!==(r=(o[5]?Ie(o[5]):"-")+"")&&X(a,r)},d(o){o&&(k(e),k(i),k(l))}}}function Wl(s){let e,t,n,i,l,r,a,o,f,u,c,g,b,y,d,m,P,I,w,R=(s[1]?s[6](s[1]):"-")+"",V,M,S,F=(s[2]?s[6](s[2]):"-")+"",Z,me,_e,de=(s[3]?s[6](s[3]):"-")+"",$e,we,q=s[0]&&et(),Y=s[0]&&tt(),B=s[0]&&nt(s);return{c(){e=L("div"),t=L("div"),n=L("div"),n.textContent="Order date",i=N(),l=L("div"),l.textContent="Invoice date",r=N(),a=L("div"),a.textContent="Due date",o=N(),q&&q.c(),f=N(),u=L("div"),c=L("div"),c.textContent=":",g=N(),b=L("div"),b.textContent=":",y=N(),d=L("div"),d.textContent=":",m=N(),Y&&Y.c(),P=N(),I=L("div"),w=L("div"),V=E(R),M=N(),S=L("div"),Z=E(F),me=N(),_e=L("div"),$e=E(de),we=N(),B&&B.c(),A(t,"class","w-32 font-medium space-y-1"),A(u,"class","w-10 flex flex-col flex-nowrap items-center space-y-1"),A(I,"class","flex flex-col flex-nowrap items-end w-32 space-y-1"),A(e,"class","flex flex-row flex-nowrap")},m(G,ae){$(G,e,ae),C(e,t),C(t,n),C(t,i),C(t,l),C(t,r),C(t,a),C(t,o),q&&q.m(t,null),C(e,f),C(e,u),C(u,c),C(u,g),C(u,b),C(u,y),C(u,d),C(u,m),Y&&Y.m(u,null),C(e,P),C(e,I),C(I,w),C(w,V),C(I,M),C(I,S),C(S,Z),C(I,me),C(I,_e),C(_e,$e),C(I,we),B&&B.m(I,null)},p(G,[ae]){G[0]?q||(q=et(),q.c(),q.m(t,null)):q&&(q.d(1),q=null),G[0]?Y||(Y=tt(),Y.c(),Y.m(u,null)):Y&&(Y.d(1),Y=null),ae&2&&R!==(R=(G[1]?G[6](G[1]):"-")+"")&&X(V,R),ae&4&&F!==(F=(G[2]?G[6](G[2]):"-")+"")&&X(Z,F),ae&8&&de!==(de=(G[3]?G[6](G[3]):"-")+"")&&X($e,de),G[0]?B?B.p(G,ae):(B=nt(G),B.c(),B.m(I,null)):B&&(B.d(1),B=null)},i:U,o:U,d(G){G&&k(e),q&&q.d(),Y&&Y.d(),B&&B.d()}}}function Bl(s,e,t){let{isPaid:n}=e,{orderDate:i}=e,{invoiceDate:l}=e,{dueDate:r}=e,{paidDate:a}=e,{paidMethod:o}=e;const f=u=>Le(u).format(invoize.date_format);return s.$$set=u=>{"isPaid"in u&&t(0,n=u.isPaid),"orderDate"in u&&t(1,i=u.orderDate),"invoiceDate"in u&&t(2,l=u.invoiceDate),"dueDate"in u&&t(3,r=u.dueDate),"paidDate"in u&&t(4,a=u.paidDate),"paidMethod"in u&&t(5,o=u.paidMethod)},[n,i,l,r,a,o,f]}class Fl extends J{constructor(e){super(),K(this,e,Bl,Wl,Q,{isPaid:0,orderDate:1,invoiceDate:2,dueDate:3,paidDate:4,paidMethod:5})}}function it(s){let e,t,n;return t=new Yt({props:{to:s[18]}}),{c(){e=L("div"),v(t.$$.fragment),A(e,"class","print:hidden")},m(i,l){$(i,e,l),h(t,e,null),n=!0},p(i,l){const r={};l[0]&262144&&(r.to=i[18]),t.$set(r)},i(i){n||(_(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&k(e),D(t)}}}function Gl(s){let e,t,n,i,l,r,a,o,f,u,c;const g=[Yl,ql],b=[];function y(M,S){return M[1]?1:0}t=y(s),n=b[t]=g[t](s);const d=[s[16]];function m(M){s[24](M)}function P(M){s[25](M)}function I(M){s[26](M)}function w(M){s[27](M)}function R(M){s[28](M)}let V={};for(let M=0;M<d.length;M+=1)V=ie(V,d[M]);return s[6]!==void 0&&(V.isDialogOpen=s[6]),s[7]!==void 0&&(V.actionMessage=s[7]),s[8]!==void 0&&(V.actionMessageLowerCase=s[8]),s[9]!==void 0&&(V.actionStatus=s[9]),s[10]!==void 0&&(V.selectedStatusType=s[10]),l=new Tl({props:V}),ee.push(()=>te(l,"isDialogOpen",m)),ee.push(()=>te(l,"actionMessage",P)),ee.push(()=>te(l,"actionMessageLowerCase",I)),ee.push(()=>te(l,"actionStatus",w)),ee.push(()=>te(l,"selectedStatusType",R)),l.$on("updateStatus",s[19]),{c(){e=L("div"),n.c(),i=N(),v(l.$$.fragment),A(e,"class","flex flex-wrap xl:flex-nowrap justify-center xl:justify-center gap-8 mt-8 print:gap-0"),A(e,"id","invoice-content-wrap")},m(M,S){$(M,e,S),b[t].m(e,null),C(e,i),h(l,e,null),c=!0},p(M,S){let F=t;t=y(M),t===F?b[t].p(M,S):(z(),p(b[F],1,1,()=>{b[F]=null}),j(),n=b[t],n?n.p(M,S):(n=b[t]=g[t](M),n.c()),_(n,1),n.m(e,i));const Z=S[0]&65536?ue(d,[ke(M[16])]):{};!r&&S[0]&64&&(r=!0,Z.isDialogOpen=M[6],ne(()=>r=!1)),!a&&S[0]&128&&(a=!0,Z.actionMessage=M[7],ne(()=>a=!1)),!o&&S[0]&256&&(o=!0,Z.actionMessageLowerCase=M[8],ne(()=>o=!1)),!f&&S[0]&512&&(f=!0,Z.actionStatus=M[9],ne(()=>f=!1)),!u&&S[0]&1024&&(u=!0,Z.selectedStatusType=M[10],ne(()=>u=!1)),l.$set(Z)},i(M){c||(_(n),_(l.$$.fragment,M),c=!0)},o(M){p(n),p(l.$$.fragment,M),c=!1},d(M){M&&k(e),b[t].d(),D(l)}}}function Xl(s){var n;let e,t;return e=new Wn({props:{tab:(n=s[1])==null?void 0:n.tab}}),{c(){v(e.$$.fragment)},m(i,l){h(e,i,l),t=!0},p(i,l){var a;const r={};l[0]&2&&(r.tab=(a=i[1])==null?void 0:a.tab),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){p(e.$$.fragment,i),t=!1},d(i){D(e,i)}}}function Zl(s){let e,t;return e=new Xn({}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ql(s){let e,t;const n=[s[17]];let i={$$slots:{date:[Kl],"header-title":[Jl]},$$scope:{ctx:s}};for(let l=0;l<n.length;l+=1)i=ie(i,n[l]);return e=new Zt({props:i}),{c(){v(e.$$.fragment)},m(l,r){h(e,l,r),t=!0},p(l,r){const a=r[0]&131072?ue(n,[ke(l[17])]):{};r[0]&23|r[1]&16384&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){p(e.$$.fragment,l),t=!1},d(l){D(e,l)}}}function Yl(s){let e,t;return e=new qt({}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p:U,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Jl(s){let e,t;return e=new Vl({props:{invoice:s[1],page:s[0],isPublic:s[2]}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i[0]&2&&(l.invoice=n[1]),i[0]&1&&(l.page=n[0]),i[0]&4&&(l.isPublic=n[2]),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Kl(s){let e,t;return e=new Fl({props:{isPaid:s[4],paidDate:s[1].paidDate,orderDate:s[1].orderDate,invoiceDate:s[1].invoiceDate,dueDate:s[1].dueDate,paidMethod:s[1].paidMethod}}),{c(){v(e.$$.fragment)},m(n,i){h(e,n,i),t=!0},p(n,i){const l={};i[0]&16&&(l.isPaid=n[4]),i[0]&2&&(l.paidDate=n[1].paidDate),i[0]&2&&(l.orderDate=n[1].orderDate),i[0]&2&&(l.invoiceDate=n[1].invoiceDate),i[0]&2&&(l.dueDate=n[1].dueDate),i[0]&2&&(l.paidMethod=n[1].paidMethod),e.$set(l)},i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){p(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ql(s){var d;let e,t,n,i,l,r,a,o;function f(m){s[23](m)}let u={invoiceId:(d=s[1])==null?void 0:d.invoiceNumber,isPaymentSuccess:s[11],isCapturingPayment:s[14],isUpdatingPaymentStatus:s[15],publicLink:s[3],isInvoicePaymentStatusUpdated:s[12]};s[13]!==void 0&&(u.isOpen=s[13]),e=new ai({props:u}),ee.push(()=>te(e,"isOpen",f));let c=!s[2]&&it(s);const g=[Zl,Xl,Gl],b=[];function y(m,P){var I,w,R;return m[2]&&(!m[5]||((I=m[1])==null?void 0:I.tab)===O.TRASHED)?0:m[2]&&(((w=m[1])==null?void 0:w.tab)===O.EXPIRED||((R=m[1])==null?void 0:R.tab)===O.CANCELLED)?1:2}return l=y(s),r=b[l]=g[l](s),{c(){v(e.$$.fragment),n=N(),c&&c.c(),i=N(),r.c(),a=le()},m(m,P){h(e,m,P),$(m,n,P),c&&c.m(m,P),$(m,i,P),b[l].m(m,P),$(m,a,P),o=!0},p(m,P){var R;const I={};P[0]&2&&(I.invoiceId=(R=m[1])==null?void 0:R.invoiceNumber),P[0]&2048&&(I.isPaymentSuccess=m[11]),P[0]&16384&&(I.isCapturingPayment=m[14]),P[0]&32768&&(I.isUpdatingPaymentStatus=m[15]),P[0]&8&&(I.publicLink=m[3]),P[0]&4096&&(I.isInvoicePaymentStatusUpdated=m[12]),!t&&P[0]&8192&&(t=!0,I.isOpen=m[13],ne(()=>t=!1)),e.$set(I),m[2]?c&&(z(),p(c,1,1,()=>{c=null}),j()):c?(c.p(m,P),P[0]&4&&_(c,1)):(c=it(m),c.c(),_(c,1),c.m(i.parentNode,i));let w=l;l=y(m),l===w?b[l].p(m,P):(z(),p(b[w],1,1,()=>{b[w]=null}),j(),r=b[l],r?r.p(m,P):(r=b[l]=g[l](m),r.c()),_(r,1),r.m(a.parentNode,a))},i(m){o||(_(e.$$.fragment,m),_(c),_(r),o=!0)},o(m){p(e.$$.fragment,m),p(c),p(r),o=!1},d(m){m&&(k(n),k(i),k(a)),D(e,m),c&&c.d(m),b[l].d(m)}}}function xl(s,e,t){let n,i,l,r,a,o;Te(s,Me,T=>t(29,a=T)),Te(s,Vt,T=>t(30,o=T));let{params:f={}}=e,u,c,g,b=!1,y=!0,d=!1,m=!1,P,I,w,R,V="",M=!1,S=!1,F=!1,Z=!1,me=!1;const _e=()=>{var x;(x=c==null?void 0:c.recurring)!=null&&x.value;let T,H;R==="paymentStatus"?(T=W.PAID,H=W.UNPAID):(T=c==null?void 0:c.tab,H=w===O.ACTIVE?c==null?void 0:c.paymentStatus:w===O.DUPLICATE?Ht.UNPAID.LOWER_CASE:w),o&&console.log({tab1:T,tab2:H}),he(T,H)},de=T=>{var x;if(d)return;if(w===O.REGENERATE){$e();return}if(w===O.DUPLICATE){we();return}if(w===O.SEND){q();return}if(w===O.TO_RECURRING){Y(T.detail);return}t(22,d=!0);const H={id:c==null?void 0:c.id,[R]:w,email:(x=T==null?void 0:T.detail)==null?void 0:x.isSendEmail};se.promise(ce("invoice/update",H),{loading:"Updating...",success:()=>(_e(),t(22,d=!1),t(6,m=!1),t(1,c=null),B(),"Status updated successfully"),error:ve=>(t(22,d=!1),t(6,m=!1),fe(ve,"Failed to update",!1))})},$e=()=>{t(22,d=!0),se.promise(ce("invoice/regenerate",{id:c.id}),{loading:"Regenerating invoice...",success:()=>(t(22,d=!1),t(6,m=!1),he(c.tab),B(),"Invoice regenerated successfully"),error:T=>(t(22,d=!1),t(6,m=!1),fe(T,"Failed to regenerate invoice",!1))})},we=()=>{t(22,d=!0),se.promise(ce("invoice/duplicate",{id:c.id}),{loading:"Duplicating...",success:()=>(t(22,d=!1),t(6,m=!1),_e(),"Invoice duplicated successfully"),error:T=>(t(22,d=!1),t(6,m=!1),fe(T,"Failed to duplicate invoice",!1))})},q=()=>{t(22,d=!0);const T={id:c.id,status:c==null?void 0:c.paymentStatus};se.promise(ce("invoice/send-mail",T),{loading:"Sending invoice...",success:()=>(t(22,d=!1),t(6,m=!1),he(c.tab),B(),"Invoice sent successfully"),error:H=>{var x,ve;return t(22,d=!1),t(6,m=!1),fe(H,(ve=(x=H.message.response)==null?void 0:x.data)==null?void 0:ve.message,!1)}})},Y=T=>{t(22,d=!0);const H={token:g,dueDateInterval:T.dueDateInterval,recurring:T.recurring};se.promise(ce("invoice/to-recurring",H),{loading:"Updating invoice to recurring...",success:()=>(t(22,d=!1),t(6,m=!1),he(c.tab),B(),"Invoice successfully updated into recurring"),error:x=>(t(22,d=!1),t(6,m=!1),fe(x,"Failed to update invoice to recurring",!1,!0))})},B=async T=>{let H;if(b?H=`invoice/detail?invoizeToken=${g}`:u==="invoice"?H=`invoice/detail?invoizeToken=${g}`:u==="receipt"&&(H=`receipt/detail?invoizeToken=${g}`),!H){se.error("API not found");return}try{const x=await Se(H);t(1,c=x.data),T&&T(),o&&!b&&console.log(c)}catch(x){t(5,y=!1),fe(x,"Failed to get invoice detail")}},G=async()=>{try{t(15,me=!0),await ce("invoice/update",{id:c.id,paymentStatus:W.PAID}),t(12,S=!0)}catch(T){t(12,S=!1),fe(T,"Failed to update invoice payment status")}finally{t(13,F=!0),t(15,me=!1)}},ae=()=>{t(3,V=`${invoize.base_url}/invoize-preview/${g}`)},dt=()=>{window.location.href.includes(invoize.base_url+"/invoize-preview")&&t(2,b=!0)},pt=()=>{const T=location.href.split("/"),H=T[T.length-2];t(0,u=H==="invoice"?"invoice":H==="receipt"?"receipt":null),B()},gt=()=>{const H=new URLSearchParams(window.location.search).get("token");H&&c.paymentStatus===W.UNPAID&&bt(H)},bt=async T=>{try{t(13,F=!0),t(14,Z=!0),await ce("paypal/capture",{token:T,invoiceId:c.id}),t(11,M=!0),G()}catch(H){t(11,M=!1),fe(H)}finally{t(13,F=!0),t(14,Z=!1)}},$t=()=>{if(b){const H=window.location.pathname.split("/");t(21,g=H.pop()||H.pop())}else t(21,g=f==null?void 0:f.invoizeToken)};Mt(()=>{dt(),$t(),ae(),b?B(gt):pt(),Se("settings/get?key=payment.enablePaymentPage").then(T=>{Ot(Me,a=T.data.value,a)})});function kt(T){F=T,t(13,F)}function wt(T){m=T,t(6,m)}function vt(T){P=T,t(7,P)}function ht(T){I=T,t(8,I)}function Dt(T){w=T,t(9,w)}function Ct(T){R=T,t(10,R)}return s.$$set=T=>{"params"in T&&t(20,f=T.params)},s.$$.update=()=>{var T;s.$$.dirty[0]&1&&t(18,n=u==="invoice"?[{name:"Invoice",link:"invoices"},{name:"Detail",link:"invoice/1"}]:u==="receipt"?[{name:"Receipt",link:"receipts"},{name:"Detail",link:"receipt/1"}]:[]),s.$$.dirty[0]&2&&t(4,i=(c==null?void 0:c.paymentStatus)==="paid"),s.$$.dirty[0]&31&&t(17,l={isPaid:i,invoice:c,publicLink:V,isRecurring:c==null?void 0:c.recurring,note:u==="invoice"||b?c==null?void 0:c.invoiceNote:u==="receipt"?{terms:c==null?void 0:c.receiptTerms,note:(T=c==null?void 0:c.invoiceNote)==null?void 0:T.note}:null}),s.$$.dirty[0]&6291471&&t(16,r={token:g,page:u,publicLink:V,isPublic:b,invoice:c,isLoading:d,isWoocommerce:(c==null?void 0:c.isWoocommerce)??!1})},[u,c,b,V,i,y,m,P,I,w,R,M,S,F,Z,me,r,l,n,de,f,g,d,kt,wt,vt,ht,Dt,Ct]}class qr extends J{constructor(e){super(),K(this,e,xl,Ql,Q,{params:20},null,[-1,-1])}}export{qr as default};
