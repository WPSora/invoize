import{S as Oe,i as Ye,s as Ze,a4 as U,a5 as V,B as je,e as S,c as $,a as C,d as x,f as L,g as f,m as v,C as Ee,aa as Ge,a6 as W,j as c,t as _,k as T,l as w,X as Z,O as Me,x as G,n as Re,o as Xe,h as He,q as Je,p as Ke,Z as E,u as Se,L as Qe}from"./Toaster.svelte_svelte_type_style_lang-89e761ff.js";import{I as xe}from"./input-ab223ce3.js";import{L as y}from"./label-e50396f8.js";import{S as De,s as Ue,f as Ve}from"./Select-70747da0.js";import{A as Ce,Z as Fe,_ as Ie,$ as ze,D as Ne,p as ke,s as We,h as Ae}from"./errorHelper-39e9d1d7.js";import{r as ye}from"./styles-e7e55f44.js";import{t as et,v as ie}from"./options-1651b5d0.js";import"./invoice-store-eba4366e.js";import{T as Pe}from"./MiniStar-8026f138.js";import{l as tt}from"./settings-e565ac59.js";import"./create-9e47477b.js";import"./updater-00e9e1bb.js";import"./index-210676e1.js";import"./arrays-9d05857f.js";import"./Check-a4797a61.js";import"./index-99d0c2fd.js";import"./action-a5acf0e9.js";import"./helpers-9eb8762f.js";import"./separator-95c0d010.js";import"./x-416feb5b.js";import"./saveToStoreHelper-31a463b7.js";function nt(a){let n;return{c(){n=G("Prefix")},m(e,r){L(e,n,r)},d(e){e&&T(n)}}}function st(a){let n;return{c(){n=G("Start From Number")},m(e,r){L(e,n,r)},d(e){e&&T(n)}}}function at(a){let n;return{c(){n=G("Note")},m(e,r){L(e,n,r)},d(e){e&&T(n)}}}function ot(a){let n;return{c(){n=G("Terms & Conditions")},m(e,r){L(e,n,r)},d(e){e&&T(n)}}}function rt(a){let n;return{c(){n=G("Save Changes")},m(e,r){L(e,n,r)},i:Se,o:Se,d(e){e&&T(n)}}}function lt(a){let n,e,r;return n=new Qe({props:{class:"mr-2 w-4 h-4 animate-spin"}}),{c(){$(n.$$.fragment),e=G(`
        Saving`)},m(l,g){v(n,l,g),L(l,e,g),r=!0},i(l){r||(c(n.$$.fragment,l),r=!0)},o(l){_(n.$$.fragment,l),r=!1},d(l){l&&T(e),w(n,l)}}}function it(a){let n,e,r,l;const g=[lt,rt],u=[];function b(m,p){return m[0]?0:1}return n=b(a),e=u[n]=g[n](a),{c(){e.c(),r=Re()},m(m,p){u[n].m(m,p),L(m,r,p),l=!0},p(m,p){let d=n;n=b(m),n!==d&&(Xe(),_(u[d],1,1,()=>{u[d]=null}),He(),e=u[n],e||(e=u[n]=g[n](m),e.c()),c(e,1),e.m(r.parentNode,r))},i(m){l||(c(e),l=!0)},o(m){_(e),l=!1},d(m){m&&T(r),u[n].d(m)}}}function ut(a){let n,e,r,l,g,u,b,m,p,d,M,h,o,R,N,q,F,H,j,I,J,k,A,z,ee,t,B,X,D,O,ue,P,te,me,K,Y,Q,ne,fe;l=new y({props:{for:"prefix",class:"md:text-sm text-xs",$$slots:{default:[nt]},$$scope:{ctx:a}}});function Le(s){a[7](s)}let de={type:"text",id:"prefix",class:"md:text-sm text-xs",disabled:a[0]};a[3].prefix!==void 0&&(de.value=a[3].prefix),u=new xe({props:de}),U.push(()=>V(u,"value",Le)),d=new y({props:{for:"startFromNumber",class:"md:text-sm text-xs",$$slots:{default:[st]},$$scope:{ctx:a}}});function Te(s){a[8](s)}let pe={type:"number",id:"startFromNumber",class:ye+" md:text-sm text-xs",disabled:a[0]};a[3].startFromNumber!==void 0&&(pe.value=a[3].startFromNumber),h=new xe({props:pe}),U.push(()=>V(h,"value",Te)),F=new De({props:{id:"due-date",label:"Default Due Date",placeholder:"Choose paper size for download",selectionList:et,selected:a[1],onSelectedChange:a[5]}}),I=new De({props:{id:"download-paper-size",label:"Download Paper Size",placeholder:"Choose download paper size",selectionList:ie,selected:a[2],onSelectedChange:a[6]}}),z=new y({props:{class:"cursor-default md:text-sm text-xs",$$slots:{default:[at]},$$scope:{ctx:a}}});function qe(s){a[9](s)}let ce={id:"note",disabled:a[0],placeholder:"Your invoice note here",class:"md:h-32 h-60 w-full p-4 md:text-sm text-xs"};a[3].note!==void 0&&(ce.value=a[3].note),t=new Pe({props:ce}),U.push(()=>V(t,"value",qe)),O=new y({props:{class:"cursor-default md:text-sm text-xs",$$slots:{default:[ot]},$$scope:{ctx:a}}});function Be(s){a[10](s)}let _e={id:"note",disabled:a[0],placeholder:"Your terms & conditions here",class:"w-full md:h-32 h-60 p-4 md:text-sm text-xs"};return a[3].termsAndConditions!==void 0&&(_e.value=a[3].termsAndConditions),P=new Pe({props:_e}),U.push(()=>V(P,"value",Be)),Y=new je({props:{disabled:a[0],class:"md:w-fit w-full",$$slots:{default:[it]},$$scope:{ctx:a}}}),{c(){n=S("form"),e=S("div"),r=S("div"),$(l.$$.fragment),g=C(),$(u.$$.fragment),m=C(),p=S("div"),$(d.$$.fragment),M=C(),$(h.$$.fragment),R=C(),N=S("div"),q=S("div"),$(F.$$.fragment),H=C(),j=S("div"),$(I.$$.fragment),J=C(),k=S("div"),A=S("div"),$(z.$$.fragment),ee=C(),$(t.$$.fragment),X=C(),D=S("div"),$(O.$$.fragment),ue=C(),$(P.$$.fragment),me=C(),K=S("div"),$(Y.$$.fragment),x(r,"class","w-full md:w-1/2"),x(p,"class","w-full md:w-1/2"),x(e,"class","flex flex-wrap-reverse md:flex-nowrap gap-8 md:gap-16"),x(q,"class","w-full md:w-1/2"),x(j,"class","w-full md:w-1/2"),x(N,"class","flex flex-wrap-reverse md:flex-nowrap gap-8 md:gap-16"),x(A,"class","w-full md:w-1/2 space-y-1"),x(D,"class","w-full md:w-1/2 space-y-1"),x(k,"class","flex flex-wrap md:flex-nowrap md:gap-16 gap-8"),x(K,"class","mt-5"),x(n,"class","md:space-y-10 space-y-8")},m(s,i){L(s,n,i),f(n,e),f(e,r),v(l,r,null),f(r,g),v(u,r,null),f(e,m),f(e,p),v(d,p,null),f(p,M),v(h,p,null),f(n,R),f(n,N),f(N,q),v(F,q,null),f(N,H),f(N,j),v(I,j,null),f(n,J),f(n,k),f(k,A),v(z,A,null),f(A,ee),v(t,A,null),f(k,X),f(k,D),v(O,D,null),f(D,ue),v(P,D,null),f(n,me),f(n,K),v(Y,K,null),Q=!0,ne||(fe=Ee(n,"submit",Ge(a[11])),ne=!0)},p(s,[i]){const ge={};i&8388608&&(ge.$$scope={dirty:i,ctx:s}),l.$set(ge);const se={};i&1&&(se.disabled=s[0]),!b&&i&8&&(b=!0,se.value=s[3].prefix,W(()=>b=!1)),u.$set(se);const be={};i&8388608&&(be.$$scope={dirty:i,ctx:s}),d.$set(be);const ae={};i&1&&(ae.disabled=s[0]),!o&&i&8&&(o=!0,ae.value=s[3].startFromNumber,W(()=>o=!1)),h.$set(ae);const $e={};i&2&&($e.selected=s[1]),F.$set($e);const ve={};i&4&&(ve.selected=s[2]),I.$set(ve);const we={};i&8388608&&(we.$$scope={dirty:i,ctx:s}),z.$set(we);const oe={};i&1&&(oe.disabled=s[0]),!B&&i&8&&(B=!0,oe.value=s[3].note,W(()=>B=!1)),t.$set(oe);const he={};i&8388608&&(he.$$scope={dirty:i,ctx:s}),O.$set(he);const re={};i&1&&(re.disabled=s[0]),!te&&i&8&&(te=!0,re.value=s[3].termsAndConditions,W(()=>te=!1)),P.$set(re);const le={};i&1&&(le.disabled=s[0]),i&8388609&&(le.$$scope={dirty:i,ctx:s}),Y.$set(le)},i(s){Q||(c(l.$$.fragment,s),c(u.$$.fragment,s),c(d.$$.fragment,s),c(h.$$.fragment,s),c(F.$$.fragment,s),c(I.$$.fragment,s),c(z.$$.fragment,s),c(t.$$.fragment,s),c(O.$$.fragment,s),c(P.$$.fragment,s),c(Y.$$.fragment,s),Q=!0)},o(s){_(l.$$.fragment,s),_(u.$$.fragment,s),_(d.$$.fragment,s),_(h.$$.fragment,s),_(F.$$.fragment,s),_(I.$$.fragment,s),_(z.$$.fragment,s),_(t.$$.fragment,s),_(O.$$.fragment,s),_(P.$$.fragment,s),_(Y.$$.fragment,s),Q=!1},d(s){s&&T(n),w(l),w(u),w(d),w(h),w(F),w(I),w(z),w(t),w(O),w(P),w(Y),ne=!1,fe()}}}function mt(a,n,e){let r,l,g,u,b,m,p;Z(a,Ce,t=>e(12,r=t)),Z(a,Fe,t=>e(13,l=t)),Z(a,Ie,t=>e(14,g=t)),Z(a,ze,t=>e(15,u=t)),Z(a,Ne,t=>e(16,b=t)),Z(a,ke,t=>e(17,m=t)),Z(a,We,t=>e(18,p=t));let d=!1,M,h,o={prefix:"#",dueDateInterval:null,note:"",termsAndConditions:"",startFromNumber:1,downloadPaperSize:""};const R=()=>{e(3,o.startFromNumber=p,o),e(3,o.prefix=m,o),e(3,o.note=u,o),e(3,o.termsAndConditions=g,o),b&&e(1,M=Ue(b)),e(3,o.downloadPaperSize=l,o),e(2,h=j(l))},N=t=>{E(ke,m=(t==null?void 0:t.prefix)??"",m),E(Ne,b=(t==null?void 0:t.dueDateInterval)??"",b),E(ze,u=(t==null?void 0:t.note)??"",u),E(Ie,g=(t==null?void 0:t.termsAndConditions)??"",g),E(Fe,l=(t==null?void 0:t.downloadPaperSize)??"",l)},q=()=>{d||(e(0,d=!0),Je.promise(Ke("settings/update?tab=invoice",o),{loading:"Saving...",success:()=>(N(o),e(0,d=!1),"Setting Saved"),error:t=>(e(0,d=!1),Ae(t,"Failed to save settings"))}))},F=t=>{e(3,o.dueDateInterval=Ve(t),o)},H=t=>{e(3,o.downloadPaperSize=t.value,o)},j=t=>{const B=ie.find(D=>D.id===t),X=ie.find(D=>D.id==="a4");return B?{label:B.name,value:B.id}:{label:X.name,value:X.id}},I=async()=>{try{await tt(),R(),E(Ce,r=!0,r)}catch(t){Ae(t,"Failed to retrieve settings data")}};Me(()=>{r?R():I()});function J(t){a.$$.not_equal(o.prefix,t)&&(o.prefix=t,e(3,o))}function k(t){a.$$.not_equal(o.startFromNumber,t)&&(o.startFromNumber=t,e(3,o))}function A(t){a.$$.not_equal(o.note,t)&&(o.note=t,e(3,o))}function z(t){a.$$.not_equal(o.termsAndConditions,t)&&(o.termsAndConditions=t,e(3,o))}return[d,M,h,o,q,F,H,J,k,A,z,()=>q()]}class Pt extends Oe{constructor(n){super(),Ye(this,n,mt,ut,Ze,{})}}export{Pt as default};
