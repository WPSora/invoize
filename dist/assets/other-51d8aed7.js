import{S as G,i as I,s as A,c as b,m as k,j as i,t as p,l as h,X as D,O as H,a as w,f as g,k as d,P as J,r as Q,q as U,o as X,p as K,h as T,x as v,B as W,e as q,d as E,g as C,C as Y,aa as Z,L as j,n as M,z as y,a7 as N}from"./Toaster.svelte_svelte_type_style_lang-7f7e6c6a.js";import{S as ee,a as te,b as se,V as re,c as x}from"./index-dc1d53ab.js";import{C as ne,X as oe,a as le,h as P}from"./errorHelper-c5761fa6.js";import{C as ae}from"./card-description-64c50d70.js";import{a as fe,C as ce,s as R}from"./index-8135346f.js";import{L as z}from"./label-a6e03658.js";import{c as $e}from"./saveToStoreHelper-5248b7cc.js";import{C as ue}from"./checkbox-f6f93199.js";import"./arrays-9d05857f.js";import"./updater-76d8237b.js";import"./Check-ec98a9d8.js";import"./options-d5ba9c63.js";import"./x-b214d010.js";import"./action-d784a92a.js";import"./helpers-5c749aec.js";import"./create-eb81c484.js";import"./invoice-store-15af1eec.js";function ie(f){let e;return{c(){e=v("Log Setting")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function pe(f){let e;return{c(){e=v("Logs can be found in logs folder in this plugin's folder")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function me(f){let e,t,s,n;return e=new ce({props:{class:"md:text-lg text-base border-l-2 border-primary pl-2",$$slots:{default:[ie]},$$scope:{ctx:f}}}),s=new ae({props:{class:"ml-3 md:text-sm text-xs",$$slots:{default:[pe]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),t=w(),b(s.$$.fragment)},m(r,o){k(e,r,o),g(r,t,o),k(s,r,o),n=!0},p(r,o){const c={};o&4096&&(c.$$scope={dirty:o,ctx:r}),e.$set(c);const l={};o&4096&&(l.$$scope={dirty:o,ctx:r}),s.$set(l)},i(r){n||(i(e.$$.fragment,r),i(s.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),p(s.$$.fragment,r),n=!1},d(r){r&&d(t),h(e,r),h(s,r)}}}function _e(f){let e,t,s,n,r,o,c,l,a,$,L,S;n=new ue({props:{id:"enable-log-setting",checked:f[0],onCheckedChange:f[5]}}),o=new z({props:{for:"enable-log-setting",class:"md:text-sm text-xs",$$slots:{default:[de]},$$scope:{ctx:f}}});let _=f[0]&&V(f);return a=new W({props:{type:"submit",class:"w-fit",disabled:f[2],$$slots:{default:[qe]},$$scope:{ctx:f}}}),{c(){e=q("form"),t=q("div"),s=q("div"),b(n.$$.fragment),r=w(),b(o.$$.fragment),c=w(),_&&_.c(),l=w(),b(a.$$.fragment),E(s,"class","flex flex-nowrap gap-2 items-center w-80"),E(t,"class","flex flex-col gap-4"),E(e,"class","flex flex-col gap-6")},m(m,u){g(m,e,u),C(e,t),C(t,s),k(n,s,null),C(s,r),k(o,s,null),C(t,c),_&&_.m(t,null),C(e,l),k(a,e,null),$=!0,L||(S=Y(e,"submit",Z(f[6])),L=!0)},p(m,u){const F={};u&1&&(F.checked=m[0]),n.$set(F);const B={};u&4096&&(B.$$scope={dirty:u,ctx:m}),o.$set(B),m[0]?_?(_.p(m,u),u&1&&i(_,1)):(_=V(m),_.c(),i(_,1),_.m(t,null)):_&&(K(),p(_,1,1,()=>{_=null}),T());const O={};u&4&&(O.disabled=m[2]),u&4100&&(O.$$scope={dirty:u,ctx:m}),a.$set(O)},i(m){$||(i(n.$$.fragment,m),i(o.$$.fragment,m),i(_),i(a.$$.fragment,m),$=!0)},o(m){p(n.$$.fragment,m),p(o.$$.fragment,m),p(_),p(a.$$.fragment,m),$=!1},d(m){m&&d(e),h(n),h(o),_&&_.d(),h(a),L=!1,S()}}}function ge(f){let e,t;return e=new j({props:{class:"h-5 w-5 text-primary animate-spin"}}),{c(){b(e.$$.fragment)},m(s,n){k(e,s,n),t=!0},p:M,i(s){t||(i(e.$$.fragment,s),t=!0)},o(s){p(e.$$.fragment,s),t=!1},d(s){h(e,s)}}}function de(f){let e;return{c(){e=v("Enable Logs")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function V(f){let e,t,s,n,r,o;return t=new z({props:{for:"keep-log-for",class:"md:text-sm text-xs",$$slots:{default:[be]},$$scope:{ctx:f}}}),n=new ee({props:{selected:f[1],onSelectedChange:f[4],$$slots:{default:[Ce]},$$scope:{ctx:f}}}),{c(){e=q("div"),b(t.$$.fragment),s=w(),b(n.$$.fragment),E(e,"class","flex flex-col flex-nowrap gap-2 items-start w-80")},m(c,l){g(c,e,l),k(t,e,null),C(e,s),k(n,e,null),o=!0},p(c,l){const a={};l&4096&&(a.$$scope={dirty:l,ctx:c}),t.$set(a);const $={};l&2&&($.selected=c[1]),l&4096&&($.$$scope={dirty:l,ctx:c}),n.$set($)},i(c){o||(i(t.$$.fragment,c),i(n.$$.fragment,c),c&&y(()=>{o&&(r||(r=N(e,R,{},!0)),r.run(1))}),o=!0)},o(c){p(t.$$.fragment,c),p(n.$$.fragment,c),c&&(r||(r=N(e,R,{},!1)),r.run(0)),o=!1},d(c){c&&d(e),h(t),h(n),c&&r&&r.end()}}}function be(f){let e;return{c(){e=v("Keep Logs For")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function ke(f){let e,t;return e=new re({props:{placeholder:"Choose options"}}),{c(){b(e.$$.fragment)},m(s,n){k(e,s,n),t=!0},p:M,i(s){t||(i(e.$$.fragment,s),t=!0)},o(s){p(e.$$.fragment,s),t=!1},d(s){h(e,s)}}}function he(f){let e;return{c(){e=v("Forever")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function we(f){let e;return{c(){e=v("1 month")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function ve(f){let e;return{c(){e=v("3 months")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function Le(f){let e;return{c(){e=v("6 months")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function Se(f){let e,t,s,n,r,o,c,l;return e=new x({props:{value:"forever",$$slots:{default:[he]},$$scope:{ctx:f}}}),s=new x({props:{value:"1-month",$$slots:{default:[we]},$$scope:{ctx:f}}}),r=new x({props:{value:"3-month",$$slots:{default:[ve]},$$scope:{ctx:f}}}),c=new x({props:{value:"6-month",$$slots:{default:[Le]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),t=w(),b(s.$$.fragment),n=w(),b(r.$$.fragment),o=w(),b(c.$$.fragment)},m(a,$){k(e,a,$),g(a,t,$),k(s,a,$),g(a,n,$),k(r,a,$),g(a,o,$),k(c,a,$),l=!0},p(a,$){const L={};$&4096&&(L.$$scope={dirty:$,ctx:a}),e.$set(L);const S={};$&4096&&(S.$$scope={dirty:$,ctx:a}),s.$set(S);const _={};$&4096&&(_.$$scope={dirty:$,ctx:a}),r.$set(_);const m={};$&4096&&(m.$$scope={dirty:$,ctx:a}),c.$set(m)},i(a){l||(i(e.$$.fragment,a),i(s.$$.fragment,a),i(r.$$.fragment,a),i(c.$$.fragment,a),l=!0)},o(a){p(e.$$.fragment,a),p(s.$$.fragment,a),p(r.$$.fragment,a),p(c.$$.fragment,a),l=!1},d(a){a&&(d(t),d(n),d(o)),h(e,a),h(s,a),h(r,a),h(c,a)}}}function Ce(f){let e,t,s,n;return e=new te({props:{id:"keep-log-for",$$slots:{default:[ke]},$$scope:{ctx:f}}}),s=new se({props:{$$slots:{default:[Se]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),t=w(),b(s.$$.fragment)},m(r,o){k(e,r,o),g(r,t,o),k(s,r,o),n=!0},p(r,o){const c={};o&4096&&(c.$$scope={dirty:o,ctx:r}),e.$set(c);const l={};o&4096&&(l.$$scope={dirty:o,ctx:r}),s.$set(l)},i(r){n||(i(e.$$.fragment,r),i(s.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),p(s.$$.fragment,r),n=!1},d(r){r&&d(t),h(e,r),h(s,r)}}}function Fe(f){let e;return{c(){e=v("Save Changes")},m(t,s){g(t,e,s)},i:M,o:M,d(t){t&&d(e)}}}function xe(f){let e,t,s;return e=new j({props:{class:"h-4 w-4 text-white animate-spin mr-1"}}),{c(){b(e.$$.fragment),t=v(`
            Saving`)},m(n,r){k(e,n,r),g(n,t,r),s=!0},i(n){s||(i(e.$$.fragment,n),s=!0)},o(n){p(e.$$.fragment,n),s=!1},d(n){n&&d(t),h(e,n)}}}function qe(f){let e,t,s,n;const r=[xe,Fe],o=[];function c(l,a){return l[2]?0:1}return e=c(f),t=o[e]=r[e](f),{c(){t.c(),s=X()},m(l,a){o[e].m(l,a),g(l,s,a),n=!0},p(l,a){let $=e;e=c(l),e!==$&&(K(),p(o[$],1,1,()=>{o[$]=null}),T(),t=o[e],t||(t=o[e]=r[e](l),t.c()),i(t,1),t.m(s.parentNode,s))},i(l){n||(i(t),n=!0)},o(l){p(t),n=!1},d(l){l&&d(s),o[e].d(l)}}}function Ee(f){let e,t,s,n;const r=[ge,_e],o=[];function c(l,a){return l[3]?0:1}return e=c(f),t=o[e]=r[e](f),{c(){t.c(),s=X()},m(l,a){o[e].m(l,a),g(l,s,a),n=!0},p(l,a){let $=e;e=c(l),e===$?o[e].p(l,a):(K(),p(o[$],1,1,()=>{o[$]=null}),T(),t=o[e],t?t.p(l,a):(t=o[e]=r[e](l),t.c()),i(t,1),t.m(s.parentNode,s))},i(l){n||(i(t),n=!0)},o(l){p(t),n=!1},d(l){l&&d(s),o[e].d(l)}}}function Me(f){let e,t,s,n;return e=new fe({props:{class:"space-y-0.5 md:p-6 px-0 mb-2",$$slots:{default:[me]},$$scope:{ctx:f}}}),s=new le({props:{$$slots:{default:[Ee]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),t=w(),b(s.$$.fragment)},m(r,o){k(e,r,o),g(r,t,o),k(s,r,o),n=!0},p(r,o){const c={};o&4096&&(c.$$scope={dirty:o,ctx:r}),e.$set(c);const l={};o&4111&&(l.$$scope={dirty:o,ctx:r}),s.$set(l)},i(r){n||(i(e.$$.fragment,r),i(s.$$.fragment,r),n=!0)},o(r){p(e.$$.fragment,r),p(s.$$.fragment,r),n=!1},d(r){r&&d(t),h(e,r),h(s,r)}}}function Oe(f){let e,t;return e=new ne({props:{class:"p-4",$$slots:{default:[Me]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment)},m(s,n){k(e,s,n),t=!0},p(s,[n]){const r={};n&4111&&(r.$$scope={dirty:n,ctx:s}),e.$set(r)},i(s){t||(i(e.$$.fragment,s),t=!0)},o(s){p(e.$$.fragment,s),t=!1},d(s){h(e,s)}}}function Ke(f,e,t){let s;D(f,oe,u=>t(8,s=u));let n=!1,r={label:null,value:null},o=!1,c=!1,l={log:{enableLog:!1,keepLogsFor:"forever"}};const a=[{label:"Forever",value:"forever"},{label:"1 Month",value:"1-month"},{label:"3 Months",value:"3-month"},{label:"6 Months",value:"6-month"}],$=u=>{t(1,r=u),l.log.keepLogsFor=u.value},L=u=>{t(0,n=u),l.log.enableLog=u},S=()=>{t(0,n=s.log.enableLog==="true"||s.log.enableLog===!0);const u=a.find(F=>F.value===s.log.keepLogsFor);u&&t(1,r=u)},_=async()=>{try{t(3,c=!0);const u=await J("settings/retrieve?tab=other");$e(u.data.data),S(),t(3,c=!1)}catch(u){t(3,c=!1),t(2,o=!1),P(u,"Failed to retrieve settings data")}},m=()=>{console.log(l),t(2,o=!0),Q.promise(U("settings/update?tab=other",l),{loading:"Saving...",success:()=>(t(2,o=!1),"Setting saved"),error:u=>(t(2,o=!1),P(u,"Failed to save settings"))})};return H(()=>{_()}),[n,r,o,c,$,L,m]}class We extends G{constructor(e){super(),I(this,e,Ke,Oe,A,{})}}export{We as default};
