import{S as W,i as Y,s as A,e as _,c as h,d as T,f as u,m as C,j as b,t as w,k as m,l as P,X as J,O as K,n as V,o as Z,h as ee,P as te,a as y,L as ne,u as se,x as v,g as d,Q as q,B as oe}from"./Toaster.svelte_svelte_type_style_lang-89e761ff.js";import{C as re,i as le,h as ae,a as ie}from"./errorHelper-39e9d1d7.js";import{C as ce}from"./card-footer-08d9ee18.js";import{c as U}from"./decimalFormatter-88348579.js";import{X as fe}from"./x-circle-4037c352.js";import{X as ue}from"./x-416feb5b.js";function me(c){let e,n,t,o,l,i,$,a;return e=new fe({props:{class:"h-40 w-40 text-destructive mb-2"}}),t=new ie({props:{class:"flex flex-col justify-center items-center text-center",$$slots:{default:[pe]},$$scope:{ctx:c}}}),l=new ce({props:{$$slots:{default:[_e]},$$scope:{ctx:c}}}),{c(){h(e.$$.fragment),n=y(),h(t.$$.fragment),o=y(),h(l.$$.fragment),i=y(),$=_("div"),$.innerHTML='<img alt="Invoize Logo" src="logohere"/>',T($,"class","absolute bottom-2 right-2")},m(s,r){C(e,s,r),u(s,n,r),C(t,s,r),u(s,o,r),C(l,s,r),u(s,i,r),u(s,$,r),a=!0},p(s,r){const g={};r&131&&(g.$$scope={dirty:r,ctx:s}),t.$set(g);const j={};r&128&&(j.$$scope={dirty:r,ctx:s}),l.$set(j)},i(s){a||(b(e.$$.fragment,s),b(t.$$.fragment,s),b(l.$$.fragment,s),a=!0)},o(s){w(e.$$.fragment,s),w(t.$$.fragment,s),w(l.$$.fragment,s),a=!1},d(s){s&&(m(n),m(o),m(i),m($)),P(e,s),P(t,s),P(l,s)}}}function $e(c){let e,n;return e=new ne({props:{class:"h-40 w-40 text-primary animate-spin",strokeWidth:1}}),{c(){h(e.$$.fragment)},m(t,o){C(e,t,o),n=!0},p:se,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function pe(c){var G,H;let e,n,t,o,l,i,$=c[0].invoiceNumber+"",a,s,r,g,j,X,L=U((H=(G=c[0])==null?void 0:G.currency)==null?void 0:H.name,c[0].total)+"",F,D,z,B,N,R,S,k,I,E,M,x;return I=new ue({props:{class:"h-4 w-4 text-destructive"}}),{c(){e=_("div"),e.textContent="Payment Failed",n=y(),t=_("div"),o=v("Your payment for "),l=_("b"),i=v("Invoice "),a=v($),s=v(" was not successful."),r=y(),g=_("div"),j=v("Total Transaction: "),X=_("b"),F=v(L),D=y(),z=_("div"),B=v("Payment Method: "),N=_("b"),R=v(c[1]),S=y(),k=_("div"),h(I.$$.fragment),E=y(),M=_("div"),M.textContent="Invoice payment status was not updated",T(e,"class","text-2xl font-bold"),T(t,"class",""),T(M,"class","text-sm"),T(k,"class","flex flex-nowrap items-center justify-center gap-2 mt-3")},m(f,p){u(f,e,p),u(f,n,p),u(f,t,p),d(t,o),d(t,l),d(l,i),d(l,a),d(t,s),u(f,r,p),u(f,g,p),d(g,j),d(g,X),d(X,F),u(f,D,p),u(f,z,p),d(z,B),d(z,N),d(N,R),u(f,S,p),u(f,k,p),C(I,k,null),d(k,E),d(k,M),x=!0},p(f,p){var O,Q;(!x||p&1)&&$!==($=f[0].invoiceNumber+"")&&q(a,$),(!x||p&1)&&L!==(L=U((Q=(O=f[0])==null?void 0:O.currency)==null?void 0:Q.name,f[0].total)+"")&&q(F,L),(!x||p&2)&&q(R,f[1])},i(f){x||(b(I.$$.fragment,f),x=!0)},o(f){w(I.$$.fragment,f),x=!1},d(f){f&&(m(e),m(n),m(t),m(r),m(g),m(D),m(z),m(S),m(k)),P(I)}}}function de(c){let e;return{c(){e=v("Return to Invoice")},m(n,t){u(n,e,t)},d(n){n&&m(e)}}}function _e(c){let e,n;return e=new oe({props:{$$slots:{default:[de]},$$scope:{ctx:c}}}),e.$on("click",c[2]),{c(){h(e.$$.fragment)},m(t,o){C(e,t,o),n=!0},p(t,o){const l={};o&128&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){P(e,t)}}}function ve(c){let e,n,t,o;const l=[$e,me],i=[];function $(a,s){return a[0]?1:0}return e=$(c),n=i[e]=l[e](c),{c(){n.c(),t=V()},m(a,s){i[e].m(a,s),u(a,t,s),o=!0},p(a,s){let r=e;e=$(a),e===r?i[e].p(a,s):(Z(),w(i[r],1,1,()=>{i[r]=null}),ee(),n=i[e],n?n.p(a,s):(n=i[e]=l[e](a),n.c()),b(n,1),n.m(t.parentNode,t))},i(a){o||(b(n),o=!0)},o(a){w(n),o=!1},d(a){a&&m(t),i[e].d(a)}}}function be(c){let e,n,t;return n=new re({props:{class:"bg-gradient-to-tr from-slate-100 to-white flex flex-col justify-center items-center sm:w-1/2 w-10/12 h-1/2 relative",$$slots:{default:[ve]},$$scope:{ctx:c}}}),{c(){e=_("div"),h(n.$$.fragment),T(e,"class","w-full h-screen bg-gradient-to-tr from-primary to-primary-600 flex justify-center items-center")},m(o,l){u(o,e,l),C(n,e,null),t=!0},p(o,[l]){const i={};l&131&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){t||(b(n.$$.fragment,o),t=!0)},o(o){w(n.$$.fragment,o),t=!1},d(o){o&&m(e),P(n)}}}function we(c,e,n){let t;J(c,le,r=>n(4,t=r));let o,l,i;const $=async()=>{try{const r=await te(`invoice/detail?invoizeToken=${o}`);n(0,l=r.data),t&&console.log(l)}catch(r){ae(r,"Failed to get invoice detail")}},a=()=>{window.location.href=`${invoize.base_url}/invoize-preview/${o}`},s=()=>{const r=window.location.href;r.includes("xendit")?n(1,i="Xendit"):r.includes("paypal")&&n(1,i="Paypal")};return K(()=>{s(),o=new URLSearchParams(window.location.search).get("invoizeToken"),$()}),[l,i,a]}class Pe extends W{constructor(e){super(),Y(this,e,we,be,A,{})}}export{Pe as default};
